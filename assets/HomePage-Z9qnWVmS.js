const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/PackageCard-DMCc74wF.js","assets/index-DeRyRCZC.js","assets/index-B7rZpWz0.css","assets/ratingService-C22f36dO.js","assets/RatingInput-DKlRJ6dW.js","assets/Delete-sXEDT8nb.js","assets/PackageMetrics-ZkrKlrJy.js","assets/CardContent-BtX_L1MN.js","assets/PackageList-DwdA2Z_P.js"])))=>i.map(i=>d[i]);
import{g as re,a as ie,_ as Y,u as Oe,b as k,c as A,j as o,r as b,d as le,e as Se,s as H,f as oe,h as S,i as ce,B as Pe,k as J,l as De,m as ne,n as ae,o as ve,C as We,p as G,q as xe,T as W,A as Ae,F as Ve,S as Ee,M as K,I as Ge,G as he,t as be,v as Te}from"./index-DeRyRCZC.js";import{R as He}from"./ratingService-C22f36dO.js";import{g as Ue}from"./getValidReactChildren-BJG_g-nK.js";function qe(e){return re("MuiPagination",e)}ie("MuiPagination",["root","ul","outlined","text"]);const Qe=["boundaryCount","componentName","count","defaultPage","disabled","hideNextButton","hidePrevButton","onChange","page","showFirstButton","showLastButton","siblingCount"];function Je(e={}){const{boundaryCount:t=1,componentName:a="usePagination",count:s=1,defaultPage:v=1,disabled:p=!1,hideNextButton:f=!1,hidePrevButton:r=!1,onChange:g,page:y,showFirstButton:x=!1,showLastButton:T=!1,siblingCount:d=1}=e,l=Y(e,Qe),[u,R]=Oe({controlled:y,default:v,name:a,state:"page"}),$=(c,M)=>{y||R(M),g&&g(c,M)},C=(c,M)=>{const U=M-c+1;return Array.from({length:U},(Z,V)=>c+V)},w=C(1,Math.min(t,s)),z=C(Math.max(s-t+1,t+1),s),L=Math.max(Math.min(u-d,s-t-d*2-1),t+2),j=Math.min(Math.max(u+d,t+d*2+2),z.length>0?z[0]-2:s-1),F=[...x?["first"]:[],...r?[]:["previous"],...w,...L>t+2?["start-ellipsis"]:t+1<s-t?[t+1]:[],...C(L,j),...j<s-t-1?["end-ellipsis"]:s-t>t?[s-t]:[],...z,...f?[]:["next"],...T?["last"]:[]],P=c=>{switch(c){case"first":return 1;case"previous":return u-1;case"next":return u+1;case"last":return s;default:return null}},m=F.map(c=>typeof c=="number"?{onClick:M=>{$(M,c)},type:"page",page:c,selected:c===u,disabled:p,"aria-current":c===u?"true":void 0}:{onClick:M=>{$(M,P(c))},type:c,page:P(c),selected:!1,disabled:p||c.indexOf("ellipsis")===-1&&(c==="next"||c==="last"?u>=s:u<=1)});return k({items:m},l)}function Ke(e){return re("MuiPaginationItem",e)}const N=ie("MuiPaginationItem",["root","page","sizeSmall","sizeLarge","text","textPrimary","textSecondary","outlined","outlinedPrimary","outlinedSecondary","rounded","ellipsis","firstLast","previousNext","focusVisible","disabled","selected","icon","colorPrimary","colorSecondary"]),ye=A(o.jsx("path",{d:"M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"}),"FirstPage"),$e=A(o.jsx("path",{d:"M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"}),"LastPage"),Ce=A(o.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"NavigateBefore"),Be=A(o.jsx("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"NavigateNext"),Xe=["className","color","component","components","disabled","page","selected","shape","size","slots","type","variant"],Re=(e,t)=>{const{ownerState:a}=e;return[t.root,t[a.variant],t[`size${S(a.size)}`],a.variant==="text"&&t[`text${S(a.color)}`],a.variant==="outlined"&&t[`outlined${S(a.color)}`],a.shape==="rounded"&&t.rounded,a.type==="page"&&t.page,(a.type==="start-ellipsis"||a.type==="end-ellipsis")&&t.ellipsis,(a.type==="previous"||a.type==="next")&&t.previousNext,(a.type==="first"||a.type==="last")&&t.firstLast]},Ye=e=>{const{classes:t,color:a,disabled:s,selected:v,size:p,shape:f,type:r,variant:g}=e,y={root:["root",`size${S(p)}`,g,f,a!=="standard"&&`color${S(a)}`,a!=="standard"&&`${g}${S(a)}`,s&&"disabled",v&&"selected",{page:"page",first:"firstLast",last:"firstLast","start-ellipsis":"ellipsis","end-ellipsis":"ellipsis",previous:"previousNext",next:"previousNext"}[r]],icon:["icon"]};return ce(y,Ke,t)},Ze=H("div",{name:"MuiPaginationItem",slot:"Root",overridesResolver:Re})(({theme:e,ownerState:t})=>k({},e.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,padding:"0 6px",margin:"0 3px",color:(e.vars||e).palette.text.primary,height:"auto",[`&.${N.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity}},t.size==="small"&&{minWidth:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},t.size==="large"&&{minWidth:40,borderRadius:40/2,padding:"0 10px",fontSize:e.typography.pxToRem(15)})),et=H(Pe,{name:"MuiPaginationItem",slot:"Root",overridesResolver:Re})(({theme:e,ownerState:t})=>k({},e.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,height:32,padding:"0 6px",margin:"0 3px",color:(e.vars||e).palette.text.primary,[`&.${N.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${N.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},transition:e.transitions.create(["color","background-color"],{duration:e.transitions.duration.short}),"&:hover":{backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${N.selected}`]:{backgroundColor:(e.vars||e).palette.action.selected,"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:J.alpha(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(e.vars||e).palette.action.selected}},[`&.${N.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:J.alpha(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)},[`&.${N.disabled}`]:{opacity:1,color:(e.vars||e).palette.action.disabled,backgroundColor:(e.vars||e).palette.action.selected}}},t.size==="small"&&{minWidth:26,height:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},t.size==="large"&&{minWidth:40,height:40,borderRadius:40/2,padding:"0 10px",fontSize:e.typography.pxToRem(15)},t.shape==="rounded"&&{borderRadius:(e.vars||e).shape.borderRadius}),({theme:e,ownerState:t})=>k({},t.variant==="text"&&{[`&.${N.selected}`]:k({},t.color!=="standard"&&{color:(e.vars||e).palette[t.color].contrastText,backgroundColor:(e.vars||e).palette[t.color].main,"&:hover":{backgroundColor:(e.vars||e).palette[t.color].dark,"@media (hover: none)":{backgroundColor:(e.vars||e).palette[t.color].main}},[`&.${N.focusVisible}`]:{backgroundColor:(e.vars||e).palette[t.color].dark}},{[`&.${N.disabled}`]:{color:(e.vars||e).palette.action.disabled}})},t.variant==="outlined"&&{border:e.vars?`1px solid rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${N.selected}`]:k({},t.color!=="standard"&&{color:(e.vars||e).palette[t.color].main,border:`1px solid ${e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / 0.5)`:J.alpha(e.palette[t.color].main,.5)}`,backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.activatedOpacity})`:J.alpha(e.palette[t.color].main,e.palette.action.activatedOpacity),"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / calc(${e.vars.palette.action.activatedOpacity} + ${e.vars.palette.action.focusOpacity}))`:J.alpha(e.palette[t.color].main,e.palette.action.activatedOpacity+e.palette.action.focusOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${N.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / calc(${e.vars.palette.action.activatedOpacity} + ${e.vars.palette.action.focusOpacity}))`:J.alpha(e.palette[t.color].main,e.palette.action.activatedOpacity+e.palette.action.focusOpacity)}},{[`&.${N.disabled}`]:{borderColor:(e.vars||e).palette.action.disabledBackground,color:(e.vars||e).palette.action.disabled}})})),tt=H("div",{name:"MuiPaginationItem",slot:"Icon",overridesResolver:(e,t)=>t.icon})(({theme:e,ownerState:t})=>k({fontSize:e.typography.pxToRem(20),margin:"0 -8px"},t.size==="small"&&{fontSize:e.typography.pxToRem(18)},t.size==="large"&&{fontSize:e.typography.pxToRem(22)})),at=b.forwardRef(function(t,a){const s=le({props:t,name:"MuiPaginationItem"}),{className:v,color:p="standard",component:f,components:r={},disabled:g=!1,page:y,selected:x=!1,shape:T="circular",size:d="medium",slots:l={},type:u="page",variant:R="text"}=s,$=Y(s,Xe),C=k({},s,{color:p,disabled:g,selected:x,shape:T,size:d,type:u,variant:R}),w=Se(),z=Ye(C),j=(w?{previous:l.next||r.next||Be,next:l.previous||r.previous||Ce,last:l.first||r.first||ye,first:l.last||r.last||$e}:{previous:l.previous||r.previous||Ce,next:l.next||r.next||Be,first:l.first||r.first||ye,last:l.last||r.last||$e})[u];return u==="start-ellipsis"||u==="end-ellipsis"?o.jsx(Ze,{ref:a,ownerState:C,className:oe(z.root,v),children:"â€¦"}):o.jsxs(et,k({ref:a,ownerState:C,component:f,disabled:g,className:oe(z.root,v)},$,{children:[u==="page"&&y,j?o.jsx(tt,{as:j,ownerState:C,className:z.icon}):null]}))}),ot=["boundaryCount","className","color","count","defaultPage","disabled","getItemAriaLabel","hideNextButton","hidePrevButton","onChange","page","renderItem","shape","showFirstButton","showLastButton","siblingCount","size","variant"],st=e=>{const{classes:t,variant:a}=e;return ce({root:["root",a],ul:["ul"]},qe,t)},nt=H("nav",{name:"MuiPagination",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,t[a.variant]]}})({}),rt=H("ul",{name:"MuiPagination",slot:"Ul",overridesResolver:(e,t)=>t.ul})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"});function it(e,t,a){return e==="page"?`${a?"":"Go to "}page ${t}`:`Go to ${e} page`}const lt=b.forwardRef(function(t,a){const s=le({props:t,name:"MuiPagination"}),{boundaryCount:v=1,className:p,color:f="standard",count:r=1,defaultPage:g=1,disabled:y=!1,getItemAriaLabel:x=it,hideNextButton:T=!1,hidePrevButton:d=!1,renderItem:l=m=>o.jsx(at,k({},m)),shape:u="circular",showFirstButton:R=!1,showLastButton:$=!1,siblingCount:C=1,size:w="medium",variant:z="text"}=s,L=Y(s,ot),{items:j}=Je(k({},s,{componentName:"Pagination"})),F=k({},s,{boundaryCount:v,color:f,count:r,defaultPage:g,disabled:y,getItemAriaLabel:x,hideNextButton:T,hidePrevButton:d,renderItem:l,shape:u,showFirstButton:R,showLastButton:$,siblingCount:C,size:w,variant:z}),P=st(F);return o.jsx(nt,k({"aria-label":"pagination navigation",className:oe(P.root,p),ownerState:F,ref:a},L,{children:o.jsx(rt,{className:P.ul,ownerState:F,children:j.map((m,c)=>o.jsx("li",{children:l(k({},m,{color:f,"aria-label":x(m.type,m.page,m.selected),shape:u,size:w,variant:z}))},c))})}))});function ct(e){return re("MuiToggleButton",e)}const X=ie("MuiToggleButton",["root","disabled","selected","standard","primary","secondary","sizeSmall","sizeMedium","sizeLarge","fullWidth"]),ze=b.createContext({}),je=b.createContext(void 0);function dt(e,t){return t===void 0||e===void 0?!1:Array.isArray(t)?t.indexOf(e)>=0:e===t}const ut=["value"],pt=["children","className","color","disabled","disableFocusRipple","fullWidth","onChange","onClick","selected","size","value"],gt=e=>{const{classes:t,fullWidth:a,selected:s,disabled:v,size:p,color:f}=e,r={root:["root",s&&"selected",v&&"disabled",a&&"fullWidth",`size${S(p)}`,f]};return ce(r,ct,t)},ft=H(Pe,{name:"MuiToggleButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,t[`size${S(a.size)}`]]}})(({theme:e,ownerState:t})=>{let a=t.color==="standard"?e.palette.text.primary:e.palette[t.color].main,s;return e.vars&&(a=t.color==="standard"?e.vars.palette.text.primary:e.vars.palette[t.color].main,s=t.color==="standard"?e.vars.palette.text.primaryChannel:e.vars.palette[t.color].mainChannel),k({},e.typography.button,{borderRadius:(e.vars||e).shape.borderRadius,padding:11,border:`1px solid ${(e.vars||e).palette.divider}`,color:(e.vars||e).palette.action.active},t.fullWidth&&{width:"100%"},{[`&.${X.disabled}`]:{color:(e.vars||e).palette.action.disabled,border:`1px solid ${(e.vars||e).palette.action.disabledBackground}`},"&:hover":{textDecoration:"none",backgroundColor:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / ${e.vars.palette.action.hoverOpacity})`:ne(e.palette.text.primary,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${X.selected}`]:{color:a,backgroundColor:e.vars?`rgba(${s} / ${e.vars.palette.action.selectedOpacity})`:ne(a,e.palette.action.selectedOpacity),"&:hover":{backgroundColor:e.vars?`rgba(${s} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:ne(a,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${s} / ${e.vars.palette.action.selectedOpacity})`:ne(a,e.palette.action.selectedOpacity)}}}},t.size==="small"&&{padding:7,fontSize:e.typography.pxToRem(13)},t.size==="large"&&{padding:15,fontSize:e.typography.pxToRem(15)})}),ke=b.forwardRef(function(t,a){const s=b.useContext(ze),{value:v}=s,p=Y(s,ut),f=b.useContext(je),r=De(k({},p,{selected:dt(t.value,v)}),t),g=le({props:r,name:"MuiToggleButton"}),{children:y,className:x,color:T="standard",disabled:d=!1,disableFocusRipple:l=!1,fullWidth:u=!1,onChange:R,onClick:$,selected:C,size:w="medium",value:z}=g,L=Y(g,pt),j=k({},g,{color:T,disabled:d,disableFocusRipple:l,fullWidth:u,size:w}),F=gt(j),P=c=>{$&&($(c,z),c.defaultPrevented)||R&&R(c,z)},m=f||"";return o.jsx(ft,k({className:oe(p.className,F.root,x,m),disabled:d,focusRipple:!l,ref:a,onClick:P,onChange:R,value:z,ownerState:j,"aria-pressed":C},L,{children:y}))});function mt(e){return re("MuiToggleButtonGroup",e)}const h=ie("MuiToggleButtonGroup",["root","selected","horizontal","vertical","disabled","grouped","groupedHorizontal","groupedVertical","fullWidth","firstButton","lastButton","middleButton"]),vt=["children","className","color","disabled","exclusive","fullWidth","onChange","orientation","size","value"],xt=e=>{const{classes:t,orientation:a,fullWidth:s,disabled:v}=e,p={root:["root",a==="vertical"&&"vertical",s&&"fullWidth"],grouped:["grouped",`grouped${S(a)}`,v&&"disabled"],firstButton:["firstButton"],lastButton:["lastButton"],middleButton:["middleButton"]};return ce(p,mt,t)},ht=H("div",{name:"MuiToggleButtonGroup",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[{[`& .${h.grouped}`]:t.grouped},{[`& .${h.grouped}`]:t[`grouped${S(a.orientation)}`]},{[`& .${h.firstButton}`]:t.firstButton},{[`& .${h.lastButton}`]:t.lastButton},{[`& .${h.middleButton}`]:t.middleButton},t.root,a.orientation==="vertical"&&t.vertical,a.fullWidth&&t.fullWidth]}})(({ownerState:e,theme:t})=>k({display:"inline-flex",borderRadius:(t.vars||t).shape.borderRadius},e.orientation==="vertical"&&{flexDirection:"column"},e.fullWidth&&{width:"100%"},{[`& .${h.grouped}`]:k({},e.orientation==="horizontal"?{[`&.${h.selected} + .${h.grouped}.${h.selected}`]:{borderLeft:0,marginLeft:0}}:{[`&.${h.selected} + .${h.grouped}.${h.selected}`]:{borderTop:0,marginTop:0}})},e.orientation==="horizontal"?{[`& .${h.firstButton},& .${h.middleButton}`]:{borderTopRightRadius:0,borderBottomRightRadius:0},[`& .${h.lastButton},& .${h.middleButton}`]:{marginLeft:-1,borderLeft:"1px solid transparent",borderTopLeftRadius:0,borderBottomLeftRadius:0}}:{[`& .${h.firstButton},& .${h.middleButton}`]:{borderBottomLeftRadius:0,borderBottomRightRadius:0},[`& .${h.lastButton},& .${h.middleButton}`]:{marginTop:-1,borderTop:"1px solid transparent",borderTopLeftRadius:0,borderTopRightRadius:0}},e.orientation==="horizontal"?{[`& .${h.lastButton}.${X.disabled},& .${h.middleButton}.${X.disabled}`]:{borderLeft:"1px solid transparent"}}:{[`& .${h.lastButton}.${X.disabled},& .${h.middleButton}.${X.disabled}`]:{borderTop:"1px solid transparent"}})),bt=b.forwardRef(function(t,a){const s=le({props:t,name:"MuiToggleButtonGroup"}),{children:v,className:p,color:f="standard",disabled:r=!1,exclusive:g=!1,fullWidth:y=!1,onChange:x,orientation:T="horizontal",size:d="medium",value:l}=s,u=Y(s,vt),R=k({},s,{disabled:r,fullWidth:y,orientation:T,size:d}),$=xt(R),C=b.useCallback((P,m)=>{if(!x)return;const c=l&&l.indexOf(m);let M;l&&c>=0?(M=l.slice(),M.splice(c,1)):M=l?l.concat(m):[m],x(P,M)},[x,l]),w=b.useCallback((P,m)=>{x&&x(P,l===m?null:m)},[x,l]),z=b.useMemo(()=>({className:$.grouped,onChange:g?w:C,value:l,size:d,fullWidth:y,color:f,disabled:r}),[$.grouped,g,w,C,l,d,y,f,r]),L=Ue(v),j=L.length,F=P=>{const m=P===0,c=P===j-1;return m&&c?"":m?$.firstButton:c?$.lastButton:$.middleButton};return o.jsx(ht,k({role:"group",className:oe($.root,p),ref:a,ownerState:R},u,{children:o.jsx(ze.Provider,{value:z,children:L.map((P,m)=>o.jsx(je.Provider,{value:F(m),children:P},m))})}))}),yt=A(o.jsx("path",{d:"m20 12-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8z"}),"ArrowDownward"),$t=A(o.jsx("path",{d:"m4 12 1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8z"}),"ArrowUpward"),Ct=A(o.jsx("path",{d:"M3 14h4v-4H3zm0 5h4v-4H3zM3 9h4V5H3zm5 5h13v-4H8zm0 5h13v-4H8zM8 5v4h13V5z"}),"ViewList"),Bt=A(o.jsx("path",{d:"M14.67 5v6.5H9.33V5zm1 6.5H21V5h-5.33zm-1 7.5v-6.5H9.33V19zm1-6.5V19H21v-6.5zm-7.34 0H3V19h5.33zm0-1V5H3v6.5z"}),"ViewModule"),kt=b.lazy(()=>Te(()=>import("./PackageCard-DMCc74wF.js"),__vite__mapDeps([0,1,2,3,4,5,6,7]))),Pt=b.lazy(()=>Te(()=>import("./PackageList-DwdA2Z_P.js"),__vite__mapDeps([8,1,2,3,4,5,6])));async function Tt(e,t,a=1e3,s="ðŸ“Š"){let v=[],p=0,f=!0,r=0,g=0;const y=performance.now();for(console.log(`${s} Starting paginated data fetch...`);f;){g++;const T=performance.now();console.log(`${s} Fetching batch #${g}, offset: ${p}...`);const{data:d,error:l,count:u}=await e.select(t,{count:"exact"}).range(p,p+a-1);if(l)throw console.error(`${s} âŒ Error fetching paginated data batch #${g}:`,l.message),l;if(u!==null&&r===0&&(r=u),d&&d.length>0){const R=((performance.now()-T)/1e3).toFixed(2);v=v.concat(d);const $=p+d.length;console.log(`${s} âœ… Batch #${g} complete in ${R}s: ${d.length} items, progress: ${$}/${r||"unknown"} (${r?Math.round($/r*100):"?"}%)`),p=$}else console.log(`${s} Batch #${g} returned no data, ending pagination.`),f=!1;r>0&&p>=r&&(console.log(`${s} Reached total count (${r}), ending pagination.`),f=!1),d&&d.length<a&&(console.log(`${s} Received fewer items (${d.length}) than page size (${a}), ending pagination.`),f=!1)}const x=((performance.now()-y)/1e3).toFixed(2);return console.log(`${s} ðŸ All batches complete in ${x}s! Total items: ${v.length}`),v}const Mt=()=>{const{searchTerm:e,selectedTags:t,minStars:a,hasGithub:s,hasWebserver:v,hasPublication:p,minCitations:f,minRating:r,folder1:g,category1:y,selectedLicenses:x,sortBy:T,sortDirection:d,viewMode:l,currentPage:u,totalFilteredCount:R}=ae(ve(i=>({searchTerm:i.searchTerm,selectedTags:i.selectedTags,minStars:i.minStars,hasGithub:i.hasGithub,hasWebserver:i.hasWebserver,hasPublication:i.hasPublication,minCitations:i.minCitations,minRating:i.minRating,folder1:i.folder1,category1:i.category1,selectedLicenses:i.selectedLicenses,sortBy:i.sortBy,sortDirection:i.sortDirection,viewMode:i.viewMode,currentPage:i.currentPage,totalFilteredCount:i.totalFilteredCount}))),{setSort:$,setDisplayedPackages:C,setTotalFilteredCount:w,setViewMode:z,setCurrentPage:L,setOriginalPackagesAndDeriveMetadata:j}=ae(ve(i=>({setSort:i.setSort,setDisplayedPackages:i.setDisplayedPackages,setTotalFilteredCount:i.setTotalFilteredCount,setViewMode:i.setViewMode,setCurrentPage:i.setCurrentPage,setOriginalPackagesAndDeriveMetadata:i.setOriginalPackagesAndDeriveMetadata}))),[F,P]=b.useState([]),[m,c]=b.useState(!0),[M,U]=b.useState("metadata"),[Z,V]=b.useState(""),[ge,q]=b.useState({}),de=24;b.useEffect(()=>{(async()=>{V(""),U("metadata"),c(!0);const B=performance.now();try{console.log("ðŸ“Š Fetching metadata for filters...");const _=await Tt(be.from("packages"),"id, package_name, description, tags, license, github_stars, citations, repo_link, webserver, publication, folder1, category1, last_commit, average_rating, ratings_count, github_owner, github_repo, jif, journal, last_commit_ago, link, page_icon, primary_language, ratings_sum",1e3,"ðŸ“Š"),I=((performance.now()-B)/1e3).toFixed(2);if(console.log(`ðŸ“Š Metadata fetch complete in ${I}s. Found ${(_==null?void 0:_.length)||0} packages for metadata.`),_&&_.length>0){console.log("ðŸ“Š Starting metadata processing...");const O=performance.now();j(_);const n=((performance.now()-O)/1e3).toFixed(2),Q=((performance.now()-B)/1e3).toFixed(2);console.log(`ðŸ“Š Metadata processing completed in ${n}s`),console.log(`ðŸ“Š Total metadata operation completed in ${Q}s`),q(D=>({...D,metadataFetch:{success:!0,count:_.length,fetchTime:`${I}s`,processTime:`${n}s`,totalTime:`${Q}s`,timestamp:new Date().toISOString()}}))}else j([]),V("No packages found for filtering options."),q(O=>({...O,metadataFetch:{success:!1,count:0,time:`${I}s`,error:"No data returned",timestamp:new Date().toISOString()}})),console.warn("âš ï¸ No packages found for metadata.")}catch(E){const _=((performance.now()-B)/1e3).toFixed(2);console.error("âŒ Error in fetchGlobalDataAndSetMetadata:",E),V("Failed to load filter options. Please try refreshing the page."),j([]),q(I=>({...I,metadataFetch:{success:!1,time:`${_}s`,error:E.message||"Unknown error",timestamp:new Date().toISOString()}}))}finally{U("packages")}})()},[j]),b.useEffect(()=>He.subscribe(B=>{console.log(`HomePage received rating update for package ${B.packageId}: ${B.averageRating} (${B.ratingsCount} ratings)`),P(I=>I.map(O=>O.id===B.packageId?{...O,average_rating:B.averageRating,ratings_count:B.ratingsCount}:O));const _=ae.getState().displayedPackages.map(I=>I.id===B.packageId?{...I,average_rating:B.averageRating,ratings_count:B.ratingsCount}:I);C(_)}),[C]),b.useEffect(()=>{(async()=>{if(!(ae.getState().allAvailableFolders.length>0||ae.getState().originalPackages.length>0)){console.log("â³ Metadata not yet loaded, packages fetch will wait for metadata.");return}c(!0),U("packages"),V("");const E=performance.now(),I=(u-1)*de,O=I+de-1;console.log(`ðŸ”Ž Fetching packages (page ${u}):`,{sortBy:T,sortDirection:d,searchTerm:e||"none",filters:{tags:t.length>0?t:"none",minStars:a||"none",hasGithub:s,hasWebserver:v,hasPublication:p,minCitations:f||"none",minRating:r||"none",folder1:g||"none",category1:y||"none",licenses:x.length>0?x:"none"},pagination:{from:I,to:O}});try{console.log("ðŸ”Ž Building query with filters...");let n=be.from("packages").select("*, average_rating, ratings_count",{count:"exact"});if(e&&(n=n.or(`package_name.ilike.%${e}%,description.ilike.%${e}%`)),t.length>0){const te=JSON.stringify(t);n=n.contains("tags",te)}a!==null&&a>0&&(n=n.gte("github_stars",a)),s&&(n=n.not("repo_link","is",null)),v&&(n=n.not("webserver","is",null)),p&&(n=n.not("publication","is",null)),f!==null&&f>0&&(n=n.gte("citations",f)),r!==null&&r>0&&(n=n.gte("average_rating",r)),g&&(n=n.eq("folder1",g)),y&&(n=n.eq("category1",y)),x.length>0&&(n=n.in("license",x)),T&&d?n=n.order(T,{ascending:d==="asc",nullsFirst:!1}):n=n.order("package_name",{ascending:!0,nullsFirst:!1}),n=n.range(I,O),console.log(`ðŸ”Ž Executing query for page ${u}...`);const Q=performance.now(),{data:D,error:ee,count:ue}=await n,pe=((performance.now()-Q)/1e3).toFixed(2),se=((performance.now()-E)/1e3).toFixed(2);if(ee)throw console.error(`ðŸ”Ž âŒ Query error after ${pe}s:`,ee),ee;if(D){console.log(`ðŸ”Ž âœ… Query successful in ${pe}s. Total matches: ${ue||0}, current page items: ${D.length}`);const te=performance.now();console.log("ðŸ”Ž Processing package data..."),P(D),C(D);const me=((performance.now()-te)/1e3).toFixed(2);console.log(`ðŸ”Ž Data processing complete in ${me}s. Total operation time: ${se}s`),q(Ne=>({...Ne,packageFetch:{success:!0,totalCount:ue,displayedCount:D.length,queryTime:`${pe}s`,processingTime:`${me}s`,totalTime:`${se}s`,filters:{searchTerm:e||"none",tags:t.length,minStars:a,hasGithub:s,hasWebserver:v,hasPublication:p,minCitations:f,minRating:r,folder1:g,category1:y,licenses:x.length},timestamp:new Date().toISOString()}}))}else console.warn(`âš ï¸ No packages found for current filters (${se}s).`),P([]),C([]),q(te=>({...te,packageFetch:{success:!0,totalCount:0,displayedCount:0,time:`${se}s`,timestamp:new Date().toISOString()}}));w(ue??0)}catch(n){const Q=((performance.now()-E)/1e3).toFixed(2),D=`Failed to fetch packages: ${(n==null?void 0:n.message)||"Unknown error"}`;V(D),console.error("âŒ Error fetching packages:",n),console.error("Query parameters:",{page:u,sortBy:T,sortDirection:d,searchTerm:e,filters:{tags:t,minStars:a,hasGithub:s,hasWebserver:v,hasPublication:p,minCitations:f,minRating:r,folder1:g,category1:y,licenses:x}}),P([]),C([]),w(0),q(ee=>({...ee,packageFetch:{success:!1,error:(n==null?void 0:n.message)||"Unknown error",time:`${Q}s`,timestamp:new Date().toISOString()}}))}finally{c(!1),U("none")}})()},[u,e,t,a,s,v,p,f,r,g,y,x,T,d,C,w]),b.useEffect(()=>{console.log("ðŸ”§ HomePage Debug Info:",ge)},[ge]);const Me=(i,B)=>{L(B),window.scrollTo(0,0)},we=i=>{const B=i.target.value;L(1),$(B===""?null:B,d)},Ie=()=>{L(1),$(T,d==="asc"?"desc":"asc")},Le=(i,B)=>{B!==null&&z(B)},Fe=o.jsx(G,{display:"flex",justifyContent:"center",py:4,children:o.jsx(xe,{})}),fe=Math.ceil(R/de),_e=()=>M==="metadata"?"Loading filter options and metadata...":M==="packages"?`Loading packages (page ${u})...`:"Loading...";return o.jsxs(We,{maxWidth:"lg",sx:{pt:2,px:{xs:1,sm:2},pb:0},children:[m&&o.jsxs(G,{display:"flex",flexDirection:"column",alignItems:"center",py:4,gap:2,children:[o.jsx(xe,{}),o.jsx(W,{variant:"body1",color:"text.secondary",align:"center",children:_e()}),o.jsx(W,{variant:"body2",color:"text.secondary",align:"center",sx:{maxWidth:600},children:M==="metadata"?"This may take a moment as we're loading all metadata needed for filtering.":"Applying filters and sorting to find matching packages."})]}),Z&&!m&&o.jsx(G,{py:4,children:o.jsxs(Ae,{severity:"error",sx:{mb:2},children:[o.jsx(W,{variant:"body1",fontWeight:"medium",children:Z}),o.jsx(W,{variant:"body2",sx:{mt:1},children:"Please try again or refresh the page. If the problem persists, contact support."})]})}),o.jsxs(G,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,flexWrap:"wrap",gap:1},children:[o.jsxs(W,{variant:"h4",component:"h1",sx:{mb:{xs:1,sm:0},color:"text.primary",fontWeight:500,letterSpacing:"-0.01em"},children:[R," Entries Found"]}),o.jsxs(G,{sx:{display:"flex",alignItems:"center",gap:1,flexWrap:"wrap"},children:[o.jsx(W,{variant:"body2",sx:{mr:1,minWidth:55,color:"text.secondary"},children:"Sort by:"}),o.jsx(Ve,{size:"small",variant:"outlined",sx:{minWidth:150},children:o.jsxs(Ee,{id:"sort-by-select",name:"sortBy",value:T??"",displayEmpty:!0,onChange:we,MenuProps:{PaperProps:{sx:{mt:1,borderRadius:2,minWidth:180}}},children:[o.jsx(K,{value:"package_name",children:"Name"}),o.jsx(K,{value:"average_rating",children:"Rating"}),o.jsx(K,{value:"ratings_count",children:"Number of Ratings"}),o.jsx(K,{value:"github_stars",children:"GitHub Stars"}),o.jsx(K,{value:"citations",children:"Citations"}),o.jsx(K,{value:"last_commit",children:"Last Commit"})]})}),o.jsx(Ge,{onClick:Ie,size:"small","aria-label":"toggle sort direction",sx:{border:"1px solid",borderColor:"divider",ml:1,background:i=>i.palette.mode==="dark"?"rgba(255,255,255,0.08)":"rgba(0,0,0,0.04)","&:hover":{background:i=>i.palette.action.hover}},children:d==="asc"?o.jsx($t,{fontSize:"small"}):o.jsx(yt,{fontSize:"small"})}),o.jsxs(bt,{value:l,exclusive:!0,onChange:Le,"aria-label":"view mode",size:"small",sx:{ml:{sm:2},background:"transparent",borderRadius:2},children:[o.jsx(ke,{value:"card","aria-label":"card view",sx:{borderRadius:1,px:1.5},children:o.jsx(Bt,{})}),o.jsx(ke,{value:"list","aria-label":"list view",sx:{borderRadius:1,px:1.5},children:o.jsx(Ct,{})})]})]})]}),!m&&!Z&&o.jsx(b.Suspense,{fallback:Fe,children:l==="card"?o.jsxs(b.Fragment,{children:[o.jsx(he,{container:!0,spacing:2,sx:{p:0},children:F.map(i=>o.jsx(he,{item:!0,xs:12,sm:6,md:4,lg:3,children:o.jsx(kt,{pkg:i})},i.id))}),fe>1&&o.jsx(G,{sx:{display:"flex",justifyContent:"center",mt:4,mb:2},children:o.jsx(lt,{count:fe,page:u,onChange:Me,color:"primary"})})]}):o.jsx(Pt,{packages:F})}),!m&&!Z&&F.length===0&&R===0&&o.jsxs(G,{sx:{textAlign:"center",mt:4,py:4},children:[o.jsx(W,{variant:"h6",color:"text.secondary",children:"No packages found matching your criteria."}),o.jsx(W,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"Try adjusting your filters or search terms."})]})]})};export{Mt as default};
