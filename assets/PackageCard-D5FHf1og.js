import{c as y,j as a,p as v,r as s,m as o,t as i,T as l,W as w,L as C,ay as m,aL as S,V as P,aM as T,N as g,I as z,aN as W}from"./index-B7UqGdPd.js";import{R as I}from"./RatingInput-BAR8hyFa.js";import{P as R,a as O}from"./PackageMetrics-Cyu-BO_H.js";import{C as L,a as h}from"./CardContent-DJCNCAXo.js";import"./Delete-DDjKKTff.js";import"./queryKeys-BVegbOAz.js";import"./Language-Bm4bbRhk.js";const M=y(a.jsx("path",{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2"}),"MoreHoriz"),$=({pkg:n})=>{const f=v(r=>r.addTag),[p,c]=s.useState(null),[t,b]=s.useState(n),u=s.useRef(!0);s.useEffect(()=>{b(n)},[n]),s.useEffect(()=>()=>{u.current=!1},[]);const d=r=>{f(r)},k=r=>{c(r.currentTarget)},x=()=>{c(null)},j=!!p;return a.jsxs(L,{sx:{height:"100%",display:"flex",flexDirection:"column",transition:r=>r.transitions.create(["box-shadow","transform","background"],{duration:r.transitions.duration.short}),"&:hover":{boxShadow:r=>`0 0px 24px ${o(r.palette.primary.main,.3)}`,transform:"translateY(-2px)",background:r=>r.palette.mode==="dark"?"linear-gradient(135deg, rgba(30,30,30,0.95) 0%, rgba(23,23,23,0.95) 100%)":"linear-gradient(135deg, rgba(255,255,255,0.95) 0%, rgba(249,250,251,0.95) 100%)"},background:r=>r.palette.mode==="dark"?"linear-gradient(135deg, rgba(30,30,30,0.8) 0%, rgba(23,23,23,0.8) 100%)":"linear-gradient(135deg, rgba(255,255,255,0.8) 0%, rgba(249,250,251,0.8) 100%)",backdropFilter:"blur(8px)",border:0,overflow:"hidden",borderRadius:2},children:[a.jsxs(h,{sx:{flexGrow:1,display:"flex",flexDirection:"column",p:2,pb:1.5},children:[a.jsxs(i,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:.5},children:[a.jsx(l,{variant:"h6",component:"h2",sx:{fontWeight:600,pr:2,flexGrow:1,fontSize:"1.05rem",color:r=>r.palette.mode==="dark"?r.palette.primary.light:r.palette.primary.dark},children:a.jsx(w,{component:C,to:`/package/${encodeURIComponent(t.id)}`,underline:"none",sx:{position:"relative",transition:"all 0.2s ease-in-out",color:"text.primary","&:hover":{color:r=>(r.palette.mode==="dark",r.palette.primary.main),transform:"translateY(-1px)"},"&::after":{content:'""',position:"absolute",width:"100%",transform:"scaleX(0)",height:"1px",bottom:0,left:0,backgroundColor:"primary.main",transformOrigin:"bottom right",transition:"transform 0.25s ease-out"},"&:hover::after":{transform:"scaleX(1)",transformOrigin:"bottom left"}},children:t.package_name})}),a.jsx(i,{sx:{flexShrink:0},children:a.jsx(I,{packageId:t.id})})]}),a.jsx(m,{title:t.description,children:a.jsx(l,{variant:"body2",color:"text.secondary",sx:{mb:1.25,overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",lineHeight:1.5},children:t.description})}),a.jsx(i,{sx:{flexGrow:1}}),a.jsx(i,{sx:{pt:1},children:a.jsx(R,{pkg:t})}),a.jsx(i,{sx:{pt:1},children:a.jsx(O,{pkg:t,variant:"card"})})]}),t.tags&&t.tags.length>0&&a.jsxs(a.Fragment,{children:[a.jsx(S,{sx:{mx:0}}),a.jsxs(h,{sx:{pt:1.25,pb:"12px !important",px:2,height:"76px",position:"relative",overflow:"hidden"},children:[a.jsxs(P,{direction:"row",alignItems:"flex-start",spacing:1,children:[a.jsx(i,{sx:{display:"flex",alignItems:"center",flexShrink:0,color:"text.secondary",mt:.5},children:a.jsx(T,{size:14})}),a.jsx(i,{sx:{display:"flex",flexWrap:"wrap",gap:.75,alignItems:"flex-start",minWidth:0,maxWidth:"calc(100% - 50px)",maxHeight:"62px",overflow:"hidden",pr:1},children:t.tags.map(r=>a.jsx(g,{label:r,size:"small",sx:{height:"22px",borderRadius:4,bgcolor:e=>e.palette.mode==="dark"?o(e.palette.primary.main,.15):o(e.palette.primary.light,.15),color:"primary.main",fontWeight:500,fontSize:"0.7rem",mb:.35,"&:hover":{bgcolor:e=>e.palette.mode==="dark"?o(e.palette.primary.main,.25):o(e.palette.primary.light,.25)},cursor:"pointer"},onClick:()=>d(r)},r))}),a.jsx(i,{sx:{position:"absolute",right:8,top:10},children:a.jsx(m,{title:"See All Tags",arrow:!0,children:a.jsx(z,{size:"small",onClick:k,sx:{width:28,height:28,bgcolor:r=>o(r.palette.primary.main,.1),color:"primary.main","&:hover":{bgcolor:r=>o(r.palette.primary.main,.2)}},children:a.jsx(M,{fontSize:"small"})})})})]}),a.jsxs(W,{open:j,anchorEl:p,onClose:x,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},PaperProps:{sx:{p:2,maxWidth:320,boxShadow:3}},children:[a.jsx(l,{variant:"subtitle2",sx:{mb:1.5,fontWeight:600},children:"All Tags"}),a.jsx(i,{sx:{display:"flex",flexWrap:"wrap",gap:.75},children:t.tags.map(r=>a.jsx(g,{label:r,size:"small",sx:{height:"24px",borderRadius:4,bgcolor:e=>e.palette.mode==="dark"?o(e.palette.primary.main,.15):o(e.palette.primary.light,.15),color:"primary.main",fontWeight:500,fontSize:"0.7rem",mb:.5,"&:hover":{bgcolor:e=>e.palette.mode==="dark"?o(e.palette.primary.main,.25):o(e.palette.primary.light,.25)},cursor:"pointer"},onClick:()=>{d(r),x()}},r))})]})]})]})]})};export{$ as default};
