import{r as p,w as C,j as t,aS as P,h as l,t as s,aT as z,Z as L,P as T,aC as I,T as k,Y as b,Q as W,R as $}from"./index-QxSUAMeM.js";import{R as E}from"./RatingInput-iaMSEsPG.js";import{P as H,a as O}from"./PackageMetrics-C2XL-l2t.js";import{u as Y}from"./HomePage-Cq8uLUQm.js";import"./Delete-c6H5VuXS.js";import"./queryKeys-D4izN8f8.js";import"./Language-D-B4rR1C.js";import"./getValidReactChildren-CO-yNIWJ.js";const D=p.memo(({pkg:i})=>{const d=C(e=>e.addTag),[a,c]=p.useState(i),n=p.useRef(!0);p.useEffect(()=>{c(i)},[i]),p.useEffect(()=>()=>{n.current=!1},[]);const x=(e,r)=>{e.stopPropagation(),d(r)};return t.jsxs(P,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:2,minHeight:140,maxHeight:140,py:2,px:2,m:0,borderRadius:2,border:0,overflow:"hidden",background:e=>e.palette.mode==="dark"?"linear-gradient(135deg, rgba(30,30,30,0.8) 0%, rgba(23,23,23,0.8) 100%)":"linear-gradient(135deg, rgba(255,255,255,0.8) 0%, rgba(249,250,251,0.8) 100%)",backdropFilter:"blur(8px)",boxShadow:e=>e.shadows[1],transition:e=>e.transitions.create(["box-shadow","background","transform"],{duration:e.transitions.duration.short}),"&:hover":{background:e=>e.palette.mode==="dark"?"linear-gradient(135deg, rgba(30,30,30,0.95) 0%, rgba(23,23,23,0.95) 100%)":"linear-gradient(135deg, rgba(255,255,255,0.95) 0%, rgba(249,250,251,0.95) 100%)",boxShadow:e=>`0 0px 24px ${l(e.palette.primary.main,.3)}`,transform:"translateY(-2px)"}},component:"div",children:[t.jsxs(s,{sx:{flexGrow:1,display:"flex",flexDirection:"column",mr:2,overflow:"hidden",height:"100%",justifyContent:"space-between"},children:[t.jsx(z,{primary:t.jsx(L,{component:T,to:`/package/${encodeURIComponent(a.id)}`,underline:"none",sx:{fontWeight:600,fontSize:"1.05rem",position:"relative",transition:"all 0.2s ease-in-out",color:e=>e.palette.mode==="dark"?e.palette.primary.light:e.palette.primary.dark,textDecoration:"none",display:"block",lineHeight:1.3,"&:hover":{color:"primary.main",transform:"translateY(-1px)",textDecoration:"none"},"&::after":{content:'""',position:"absolute",width:"100%",transform:"scaleX(0)",height:"1.5px",bottom:"-1px",left:0,backgroundColor:"primary.main",transformOrigin:"bottom left",transition:"transform 0.25s ease-out"},"&:hover::after":{transform:"scaleX(1)"}},children:a.package_name}),sx:{mt:0,mb:1}}),t.jsx(s,{sx:{height:36,mb:1},children:a.description&&t.jsx(I,{title:a.description,children:t.jsx(k,{variant:"body2",color:"text.secondary",sx:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",lineHeight:1.4,height:"100%"},children:a.description})})}),t.jsx(s,{sx:{height:24,overflow:"hidden"},children:a.tags&&a.tags.length>0&&t.jsx(b,{direction:"row",spacing:.5,sx:{flexWrap:"nowrap",overflowX:"auto",maxWidth:"100%",height:"100%",alignItems:"center","&::-webkit-scrollbar":{height:"4px"},"&::-webkit-scrollbar-thumb":{backgroundColor:e=>l(e.palette.text.secondary,.5),borderRadius:"2px"}},children:a.tags.map(e=>t.jsx(W,{label:e,size:"small",sx:{height:"20px",borderRadius:4,bgcolor:r=>r.palette.mode==="dark"?l(r.palette.primary.main,.12):l(r.palette.primary.light,.12),color:r=>r.palette.mode==="dark"?r.palette.primary.light:r.palette.primary.main,fontWeight:500,fontSize:"0.7rem",flexShrink:0,"&:hover":{bgcolor:r=>r.palette.mode==="dark"?l(r.palette.primary.main,.18):l(r.palette.primary.light,.18)},cursor:"pointer"},onClick:r=>x(r,e)},e))})})]}),t.jsxs(b,{direction:"column",spacing:1,alignItems:"flex-end",sx:{flexShrink:0,pt:.5,height:"100%",justifyContent:"space-between"},children:[t.jsx(E,{packageId:a.id}),t.jsx(H,{pkg:a,spacing:.5}),t.jsx(O,{pkg:a,variant:"list",spacing:1})]})]})});function X({items:i,renderItem:d,height:a="100%",width:c="100%",estimateSize:n,overscan:x=5,className:e,onScroll:r,getItemKey:g,EmptyComponent:h,LoadingComponent:m,isLoading:f=!1,gap:u=0}){const{parentRef:j,virtualizer:y,virtualItems:w,totalSize:v}=Y({items:i,estimateSize:n,overscan:x,getItemKey:g?o=>g(i[o],o):void 0});return f&&m?t.jsx(m,{}):!f&&i.length===0&&h?t.jsx(h,{}):t.jsx(s,{ref:j,className:e,onScroll:r,sx:{height:a,width:c,overflow:"auto",contain:"strict"},children:t.jsx(s,{sx:{height:v+u*Math.max(0,i.length-1),width:"100%",position:"relative"},children:w.map(o=>{const R=i[o.index],S=u*o.index;return t.jsx(s,{"data-index":o.index,ref:y.measureElement,sx:{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${o.start+S}px)`},children:d(R,o.index,{height:`${o.size}px`,width:"100%"})},o.key)})})})}const A=({packages:i,height:d="100%",onScroll:a})=>{if(i.length===0)return t.jsx(s,{sx:{textAlign:"center",mt:4},children:t.jsx(k,{variant:"h6",color:"text.secondary",children:"No packages found matching your criteria."})});const c=(n,x,e)=>t.jsx(s,{style:e,children:t.jsx(D,{pkg:n})},n.id);return t.jsx(X,{items:i,renderItem:c,height:d,width:"100%",estimateSize:()=>140,overscan:5,getItemKey:n=>n.id,onScroll:a,gap:12})},Q=$.memo(A);export{Q as default};
