const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/PackageCard-BUVs7m2i.js","assets/index-Cq7ylKjH.js","assets/index-B7rZpWz0.css","assets/RatingInput-DhzeLVOk.js","assets/PackageMetrics-BDzWustj.js","assets/CardContent-C-9ZjDjs.js","assets/PackageList-D6fetNwl.js"])))=>i.map(i=>d[i]);
import{r as b,g as J,a as K,_ as G,u as Pt,b as h,c as F,j as o,d as Q,e as kt,s as w,f as H,h as O,i as X,B as gt,k as V,l as zt,m as U,n as q,o as st,C as jt,p as W,q as rt,A as Rt,T as tt,F as Mt,S as Tt,M as A,I as Lt,G as nt,t as it,v as ft}from"./index-Cq7ylKjH.js";function _t(t){return b.Children.toArray(t).filter(a=>b.isValidElement(a))}function It(t){return J("MuiPagination",t)}K("MuiPagination",["root","ul","outlined","text"]);const Nt=["boundaryCount","componentName","count","defaultPage","disabled","hideNextButton","hidePrevButton","onChange","page","showFirstButton","showLastButton","siblingCount"];function Ot(t={}){const{boundaryCount:a=1,componentName:e="usePagination",count:s=1,defaultPage:f=1,disabled:p=!1,hideNextButton:u=!1,hidePrevButton:c=!1,onChange:v,page:k,showFirstButton:y=!1,showLastButton:j=!1,siblingCount:z=1}=t,i=G(t,Nt),[g,M]=Pt({controlled:k,default:f,name:e,state:"page"}),m=(r,P)=>{k||M(P),v&&v(r,P)},B=(r,P)=>{const S=P-r+1;return Array.from({length:S},(at,Y)=>r+Y)},L=B(1,Math.min(a,s)),$=B(Math.max(s-a+1,a+1),s),T=Math.max(Math.min(g-z,s-a-z*2-1),a+2),R=Math.min(Math.max(g+z,a+z*2+2),$.length>0?$[0]-2:s-1),_=[...y?["first"]:[],...c?[]:["previous"],...L,...T>a+2?["start-ellipsis"]:a+1<s-a?[a+1]:[],...B(T,R),...R<s-a-1?["end-ellipsis"]:s-a>a?[s-a]:[],...$,...u?[]:["next"],...j?["last"]:[]],C=r=>{switch(r){case"first":return 1;case"previous":return g-1;case"next":return g+1;case"last":return s;default:return null}},d=_.map(r=>typeof r=="number"?{onClick:P=>{m(P,r)},type:"page",page:r,selected:r===g,disabled:p,"aria-current":r===g?"true":void 0}:{onClick:P=>{m(P,C(r))},type:r,page:C(r),selected:!1,disabled:p||r.indexOf("ellipsis")===-1&&(r==="next"||r==="last"?g>=s:g<=1)});return h({items:d},i)}function Ft(t){return J("MuiPaginationItem",t)}const I=K("MuiPaginationItem",["root","page","sizeSmall","sizeLarge","text","textPrimary","textSecondary","outlined","outlinedPrimary","outlinedSecondary","rounded","ellipsis","firstLast","previousNext","focusVisible","disabled","selected","icon","colorPrimary","colorSecondary"]),lt=F(o.jsx("path",{d:"M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"}),"FirstPage"),ct=F(o.jsx("path",{d:"M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"}),"LastPage"),dt=F(o.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"NavigateBefore"),ut=F(o.jsx("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"NavigateNext"),Wt=["className","color","component","components","disabled","page","selected","shape","size","slots","type","variant"],vt=(t,a)=>{const{ownerState:e}=t;return[a.root,a[e.variant],a[`size${O(e.size)}`],e.variant==="text"&&a[`text${O(e.color)}`],e.variant==="outlined"&&a[`outlined${O(e.color)}`],e.shape==="rounded"&&a.rounded,e.type==="page"&&a.page,(e.type==="start-ellipsis"||e.type==="end-ellipsis")&&a.ellipsis,(e.type==="previous"||e.type==="next")&&a.previousNext,(e.type==="first"||e.type==="last")&&a.firstLast]},wt=t=>{const{classes:a,color:e,disabled:s,selected:f,size:p,shape:u,type:c,variant:v}=t,k={root:["root",`size${O(p)}`,v,u,e!=="standard"&&`color${O(e)}`,e!=="standard"&&`${v}${O(e)}`,s&&"disabled",f&&"selected",{page:"page",first:"firstLast",last:"firstLast","start-ellipsis":"ellipsis","end-ellipsis":"ellipsis",previous:"previousNext",next:"previousNext"}[c]],icon:["icon"]};return X(k,Ft,a)},Vt=w("div",{name:"MuiPaginationItem",slot:"Root",overridesResolver:vt})(({theme:t,ownerState:a})=>h({},t.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,padding:"0 6px",margin:"0 3px",color:(t.vars||t).palette.text.primary,height:"auto",[`&.${I.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity}},a.size==="small"&&{minWidth:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},a.size==="large"&&{minWidth:40,borderRadius:40/2,padding:"0 10px",fontSize:t.typography.pxToRem(15)})),At=w(gt,{name:"MuiPaginationItem",slot:"Root",overridesResolver:vt})(({theme:t,ownerState:a})=>h({},t.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,height:32,padding:"0 6px",margin:"0 3px",color:(t.vars||t).palette.text.primary,[`&.${I.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${I.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity},transition:t.transitions.create(["color","background-color"],{duration:t.transitions.duration.short}),"&:hover":{backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${I.selected}`]:{backgroundColor:(t.vars||t).palette.action.selected,"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.selectedChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:V.alpha(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(t.vars||t).palette.action.selected}},[`&.${I.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.action.selectedChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:V.alpha(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)},[`&.${I.disabled}`]:{opacity:1,color:(t.vars||t).palette.action.disabled,backgroundColor:(t.vars||t).palette.action.selected}}},a.size==="small"&&{minWidth:26,height:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},a.size==="large"&&{minWidth:40,height:40,borderRadius:40/2,padding:"0 10px",fontSize:t.typography.pxToRem(15)},a.shape==="rounded"&&{borderRadius:(t.vars||t).shape.borderRadius}),({theme:t,ownerState:a})=>h({},a.variant==="text"&&{[`&.${I.selected}`]:h({},a.color!=="standard"&&{color:(t.vars||t).palette[a.color].contrastText,backgroundColor:(t.vars||t).palette[a.color].main,"&:hover":{backgroundColor:(t.vars||t).palette[a.color].dark,"@media (hover: none)":{backgroundColor:(t.vars||t).palette[a.color].main}},[`&.${I.focusVisible}`]:{backgroundColor:(t.vars||t).palette[a.color].dark}},{[`&.${I.disabled}`]:{color:(t.vars||t).palette.action.disabled}})},a.variant==="outlined"&&{border:t.vars?`1px solid rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${I.selected}`]:h({},a.color!=="standard"&&{color:(t.vars||t).palette[a.color].main,border:`1px solid ${t.vars?`rgba(${t.vars.palette[a.color].mainChannel} / 0.5)`:V.alpha(t.palette[a.color].main,.5)}`,backgroundColor:t.vars?`rgba(${t.vars.palette[a.color].mainChannel} / ${t.vars.palette.action.activatedOpacity})`:V.alpha(t.palette[a.color].main,t.palette.action.activatedOpacity),"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette[a.color].mainChannel} / calc(${t.vars.palette.action.activatedOpacity} + ${t.vars.palette.action.focusOpacity}))`:V.alpha(t.palette[a.color].main,t.palette.action.activatedOpacity+t.palette.action.focusOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${I.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette[a.color].mainChannel} / calc(${t.vars.palette.action.activatedOpacity} + ${t.vars.palette.action.focusOpacity}))`:V.alpha(t.palette[a.color].main,t.palette.action.activatedOpacity+t.palette.action.focusOpacity)}},{[`&.${I.disabled}`]:{borderColor:(t.vars||t).palette.action.disabledBackground,color:(t.vars||t).palette.action.disabled}})})),Dt=w("div",{name:"MuiPaginationItem",slot:"Icon",overridesResolver:(t,a)=>a.icon})(({theme:t,ownerState:a})=>h({fontSize:t.typography.pxToRem(20),margin:"0 -8px"},a.size==="small"&&{fontSize:t.typography.pxToRem(18)},a.size==="large"&&{fontSize:t.typography.pxToRem(22)})),Gt=b.forwardRef(function(a,e){const s=Q({props:a,name:"MuiPaginationItem"}),{className:f,color:p="standard",component:u,components:c={},disabled:v=!1,page:k,selected:y=!1,shape:j="circular",size:z="medium",slots:i={},type:g="page",variant:M="text"}=s,m=G(s,Wt),B=h({},s,{color:p,disabled:v,selected:y,shape:j,size:z,type:g,variant:M}),L=kt(),$=wt(B),R=(L?{previous:i.next||c.next||ut,next:i.previous||c.previous||dt,last:i.first||c.first||lt,first:i.last||c.last||ct}:{previous:i.previous||c.previous||dt,next:i.next||c.next||ut,first:i.first||c.first||lt,last:i.last||c.last||ct})[g];return g==="start-ellipsis"||g==="end-ellipsis"?o.jsx(Vt,{ref:e,ownerState:B,className:H($.root,f),children:"â€¦"}):o.jsxs(At,h({ref:e,ownerState:B,component:u,disabled:v,className:H($.root,f)},m,{children:[g==="page"&&k,R?o.jsx(Dt,{as:R,ownerState:B,className:$.icon}):null]}))}),St=["boundaryCount","className","color","count","defaultPage","disabled","getItemAriaLabel","hideNextButton","hidePrevButton","onChange","page","renderItem","shape","showFirstButton","showLastButton","siblingCount","size","variant"],Et=t=>{const{classes:a,variant:e}=t;return X({root:["root",e],ul:["ul"]},It,a)},Ht=w("nav",{name:"MuiPagination",slot:"Root",overridesResolver:(t,a)=>{const{ownerState:e}=t;return[a.root,a[e.variant]]}})({}),Ut=w("ul",{name:"MuiPagination",slot:"Ul",overridesResolver:(t,a)=>a.ul})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"});function qt(t,a,e){return t==="page"?`${e?"":"Go to "}page ${a}`:`Go to ${t} page`}const Jt=b.forwardRef(function(a,e){const s=Q({props:a,name:"MuiPagination"}),{boundaryCount:f=1,className:p,color:u="standard",count:c=1,defaultPage:v=1,disabled:k=!1,getItemAriaLabel:y=qt,hideNextButton:j=!1,hidePrevButton:z=!1,renderItem:i=d=>o.jsx(Gt,h({},d)),shape:g="circular",showFirstButton:M=!1,showLastButton:m=!1,siblingCount:B=1,size:L="medium",variant:$="text"}=s,T=G(s,St),{items:R}=Ot(h({},s,{componentName:"Pagination"})),_=h({},s,{boundaryCount:f,color:u,count:c,defaultPage:v,disabled:k,getItemAriaLabel:y,hideNextButton:j,hidePrevButton:z,renderItem:i,shape:g,showFirstButton:M,showLastButton:m,siblingCount:B,size:L,variant:$}),C=Et(_);return o.jsx(Ht,h({"aria-label":"pagination navigation",className:H(C.root,p),ownerState:_,ref:e},T,{children:o.jsx(Ut,{className:C.ul,ownerState:_,children:R.map((d,r)=>o.jsx("li",{children:i(h({},d,{color:u,"aria-label":y(d.type,d.page,d.selected),shape:g,size:L,variant:$}))},r))})}))});function Kt(t){return J("MuiToggleButton",t)}const D=K("MuiToggleButton",["root","disabled","selected","standard","primary","secondary","sizeSmall","sizeMedium","sizeLarge","fullWidth"]),xt=b.createContext({}),bt=b.createContext(void 0);function Qt(t,a){return a===void 0||t===void 0?!1:Array.isArray(a)?a.indexOf(t)>=0:t===a}const Xt=["value"],Yt=["children","className","color","disabled","disableFocusRipple","fullWidth","onChange","onClick","selected","size","value"],Zt=t=>{const{classes:a,fullWidth:e,selected:s,disabled:f,size:p,color:u}=t,c={root:["root",s&&"selected",f&&"disabled",e&&"fullWidth",`size${O(p)}`,u]};return X(c,Kt,a)},ta=w(gt,{name:"MuiToggleButton",slot:"Root",overridesResolver:(t,a)=>{const{ownerState:e}=t;return[a.root,a[`size${O(e.size)}`]]}})(({theme:t,ownerState:a})=>{let e=a.color==="standard"?t.palette.text.primary:t.palette[a.color].main,s;return t.vars&&(e=a.color==="standard"?t.vars.palette.text.primary:t.vars.palette[a.color].main,s=a.color==="standard"?t.vars.palette.text.primaryChannel:t.vars.palette[a.color].mainChannel),h({},t.typography.button,{borderRadius:(t.vars||t).shape.borderRadius,padding:11,border:`1px solid ${(t.vars||t).palette.divider}`,color:(t.vars||t).palette.action.active},a.fullWidth&&{width:"100%"},{[`&.${D.disabled}`]:{color:(t.vars||t).palette.action.disabled,border:`1px solid ${(t.vars||t).palette.action.disabledBackground}`},"&:hover":{textDecoration:"none",backgroundColor:t.vars?`rgba(${t.vars.palette.text.primaryChannel} / ${t.vars.palette.action.hoverOpacity})`:U(t.palette.text.primary,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${D.selected}`]:{color:e,backgroundColor:t.vars?`rgba(${s} / ${t.vars.palette.action.selectedOpacity})`:U(e,t.palette.action.selectedOpacity),"&:hover":{backgroundColor:t.vars?`rgba(${s} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:U(e,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?`rgba(${s} / ${t.vars.palette.action.selectedOpacity})`:U(e,t.palette.action.selectedOpacity)}}}},a.size==="small"&&{padding:7,fontSize:t.typography.pxToRem(13)},a.size==="large"&&{padding:15,fontSize:t.typography.pxToRem(15)})}),pt=b.forwardRef(function(a,e){const s=b.useContext(xt),{value:f}=s,p=G(s,Xt),u=b.useContext(bt),c=zt(h({},p,{selected:Qt(a.value,f)}),a),v=Q({props:c,name:"MuiToggleButton"}),{children:k,className:y,color:j="standard",disabled:z=!1,disableFocusRipple:i=!1,fullWidth:g=!1,onChange:M,onClick:m,selected:B,size:L="medium",value:$}=v,T=G(v,Yt),R=h({},v,{color:j,disabled:z,disableFocusRipple:i,fullWidth:g,size:L}),_=Zt(R),C=r=>{m&&(m(r,$),r.defaultPrevented)||M&&M(r,$)},d=u||"";return o.jsx(ta,h({className:H(p.className,_.root,y,d),disabled:z,focusRipple:!i,ref:e,onClick:C,onChange:M,value:$,ownerState:R,"aria-pressed":B},T,{children:k}))});function aa(t){return J("MuiToggleButtonGroup",t)}const x=K("MuiToggleButtonGroup",["root","selected","horizontal","vertical","disabled","grouped","groupedHorizontal","groupedVertical","fullWidth","firstButton","lastButton","middleButton"]),ea=["children","className","color","disabled","exclusive","fullWidth","onChange","orientation","size","value"],oa=t=>{const{classes:a,orientation:e,fullWidth:s,disabled:f}=t,p={root:["root",e==="vertical"&&"vertical",s&&"fullWidth"],grouped:["grouped",`grouped${O(e)}`,f&&"disabled"],firstButton:["firstButton"],lastButton:["lastButton"],middleButton:["middleButton"]};return X(p,aa,a)},sa=w("div",{name:"MuiToggleButtonGroup",slot:"Root",overridesResolver:(t,a)=>{const{ownerState:e}=t;return[{[`& .${x.grouped}`]:a.grouped},{[`& .${x.grouped}`]:a[`grouped${O(e.orientation)}`]},{[`& .${x.firstButton}`]:a.firstButton},{[`& .${x.lastButton}`]:a.lastButton},{[`& .${x.middleButton}`]:a.middleButton},a.root,e.orientation==="vertical"&&a.vertical,e.fullWidth&&a.fullWidth]}})(({ownerState:t,theme:a})=>h({display:"inline-flex",borderRadius:(a.vars||a).shape.borderRadius},t.orientation==="vertical"&&{flexDirection:"column"},t.fullWidth&&{width:"100%"},{[`& .${x.grouped}`]:h({},t.orientation==="horizontal"?{[`&.${x.selected} + .${x.grouped}.${x.selected}`]:{borderLeft:0,marginLeft:0}}:{[`&.${x.selected} + .${x.grouped}.${x.selected}`]:{borderTop:0,marginTop:0}})},t.orientation==="horizontal"?{[`& .${x.firstButton},& .${x.middleButton}`]:{borderTopRightRadius:0,borderBottomRightRadius:0},[`& .${x.lastButton},& .${x.middleButton}`]:{marginLeft:-1,borderLeft:"1px solid transparent",borderTopLeftRadius:0,borderBottomLeftRadius:0}}:{[`& .${x.firstButton},& .${x.middleButton}`]:{borderBottomLeftRadius:0,borderBottomRightRadius:0},[`& .${x.lastButton},& .${x.middleButton}`]:{marginTop:-1,borderTop:"1px solid transparent",borderTopLeftRadius:0,borderTopRightRadius:0}},t.orientation==="horizontal"?{[`& .${x.lastButton}.${D.disabled},& .${x.middleButton}.${D.disabled}`]:{borderLeft:"1px solid transparent"}}:{[`& .${x.lastButton}.${D.disabled},& .${x.middleButton}.${D.disabled}`]:{borderTop:"1px solid transparent"}})),ra=b.forwardRef(function(a,e){const s=Q({props:a,name:"MuiToggleButtonGroup"}),{children:f,className:p,color:u="standard",disabled:c=!1,exclusive:v=!1,fullWidth:k=!1,onChange:y,orientation:j="horizontal",size:z="medium",value:i}=s,g=G(s,ea),M=h({},s,{disabled:c,fullWidth:k,orientation:j,size:z}),m=oa(M),B=b.useCallback((C,d)=>{if(!y)return;const r=i&&i.indexOf(d);let P;i&&r>=0?(P=i.slice(),P.splice(r,1)):P=i?i.concat(d):[d],y(C,P)},[y,i]),L=b.useCallback((C,d)=>{y&&y(C,i===d?null:d)},[y,i]),$=b.useMemo(()=>({className:m.grouped,onChange:v?L:B,value:i,size:z,fullWidth:k,color:u,disabled:c}),[m.grouped,v,L,B,i,z,k,u,c]),T=_t(f),R=T.length,_=C=>{const d=C===0,r=C===R-1;return d&&r?"":d?m.firstButton:r?m.lastButton:m.middleButton};return o.jsx(sa,h({role:"group",className:H(m.root,p),ref:e,ownerState:M},g,{children:o.jsx(xt.Provider,{value:$,children:T.map((C,d)=>o.jsx(bt.Provider,{value:_(d),children:C},d))})}))}),na=F(o.jsx("path",{d:"m20 12-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8z"}),"ArrowDownward"),ia=F(o.jsx("path",{d:"m4 12 1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8z"}),"ArrowUpward"),la=F(o.jsx("path",{d:"M3 14h4v-4H3zm0 5h4v-4H3zM3 9h4V5H3zm5 5h13v-4H8zm0 5h13v-4H8zM8 5v4h13V5z"}),"ViewList"),ca=F(o.jsx("path",{d:"M14.67 5v6.5H9.33V5zm1 6.5H21V5h-5.33zm-1 7.5v-6.5H9.33V19zm1-6.5V19H21v-6.5zm-7.34 0H3V19h5.33zm0-1V5H3v6.5z"}),"ViewModule"),da=b.lazy(()=>ft(()=>import("./PackageCard-BUVs7m2i.js"),__vite__mapDeps([0,1,2,3,4,5]))),ua=b.lazy(()=>ft(()=>import("./PackageList-D6fetNwl.js"),__vite__mapDeps([6,1,2,3,4])));async function pa(t,a,e=1e3){let s=[],f=0,p=!0;for(;p;){const{data:u,error:c,count:v}=await t.select(a,{count:"exact"}).range(f,f+e-1);if(c)throw console.error("Error fetching paginated data:",c.message),c;u&&u.length>0?(s=s.concat(u),f+=u.length):p=!1,v!==null&&f>=v&&(p=!1),u&&u.length<e&&(p=!1)}return s}const fa=()=>{const{searchTerm:t,selectedTags:a,minStars:e,hasGithub:s,hasWebserver:f,hasPublication:p,minCitations:u,folder1:c,category1:v,selectedLicenses:k,sortBy:y,sortDirection:j,viewMode:z,currentPage:i,totalFilteredCount:g}=q(st(n=>({searchTerm:n.searchTerm,selectedTags:n.selectedTags,minStars:n.minStars,hasGithub:n.hasGithub,hasWebserver:n.hasWebserver,hasPublication:n.hasPublication,minCitations:n.minCitations,folder1:n.folder1,category1:n.category1,selectedLicenses:n.selectedLicenses,sortBy:n.sortBy,sortDirection:n.sortDirection,viewMode:n.viewMode,currentPage:n.currentPage,totalFilteredCount:n.totalFilteredCount}))),{setSort:M,setDisplayedPackages:m,setTotalFilteredCount:B,setViewMode:L,setCurrentPage:$,setOriginalPackagesAndDeriveMetadata:T}=q(st(n=>({setSort:n.setSort,setDisplayedPackages:n.setDisplayedPackages,setTotalFilteredCount:n.setTotalFilteredCount,setViewMode:n.setViewMode,setCurrentPage:n.setCurrentPage,setOriginalPackagesAndDeriveMetadata:n.setOriginalPackagesAndDeriveMetadata}))),[R,_]=b.useState([]),[C,d]=b.useState(!0),[r,P]=b.useState(""),S=24;b.useEffect(()=>{(async()=>{P(""),d(!0);try{const E=await pa(it.from("packages"),"id, package_name, description, tags, license, github_stars, citations, repo_link, webserver, publication, folder1, category1, last_commit, average_rating, ratings_count, github_owner, github_repo, jif, journal, last_commit_ago, link, page_icon, primary_language, ratings_sum");E?T(E):(T([]),P("No packages found for metadata."))}catch(N){console.error("Error in fetchGlobalDataAndSetMetadata:",N.message),P("An unexpected error occurred while loading filter options."),T([])}finally{d(!1)}})()},[T]),b.useEffect(()=>{(async()=>{q.getState().allAvailableFolders.length===0&&q.getState().originalPackages.length,d(!0),P("");const E=(i-1)*S,Ct=E+S-1;try{let l=it.from("packages").select("*, average_rating, ratings_count",{count:"exact"});if(t&&(l=l.or(`package_name.ilike.%${t}%,description.ilike.%${t}%`)),a.length>0){const Bt=JSON.stringify(a);l=l.contains("tags",Bt)}e!==null&&e>0&&(l=l.gte("github_stars",e)),s&&(l=l.not("repo_link","is",null)),f&&(l=l.not("webserver","is",null)),p&&(l=l.not("publication","is",null)),u!==null&&u>0&&(l=l.gte("citations",u)),c&&(l=l.eq("folder1",c)),v&&(l=l.eq("category1",v)),k.length>0&&(l=l.in("license",k)),y&&j?l=l.order(y,{ascending:j==="asc",nullsFirst:!1}):l=l.order("package_name",{ascending:!0,nullsFirst:!1}),l=l.range(E,Ct);const{data:Z,error:ot,count:$t}=await l;if(ot)throw ot;Z?(_(Z),m(Z)):(_([]),m([])),B($t??0)}catch(l){P(`Failed to fetch packages: ${(l==null?void 0:l.message)||"Unknown error"}`),console.error("Error fetching packages from Supabase:",l),_([]),m([]),B(0)}finally{d(!1)}})()},[i,t,a,e,s,f,p,u,c,v,k,y,j,m,B]);const at=(n,N)=>{$(N),window.scrollTo(0,0)},Y=n=>{const N=n.target.value;$(1),M(N===""?null:N,j)},ht=()=>{$(1),M(y,j==="asc"?"desc":"asc")},yt=(n,N)=>{N!==null&&L(N)},mt=o.jsx(W,{display:"flex",justifyContent:"center",py:4,children:o.jsx(rt,{})}),et=Math.ceil(g/S);return o.jsxs(jt,{maxWidth:"lg",sx:{pt:2,px:{xs:1,sm:2},pb:0},children:[C&&o.jsx(W,{display:"flex",justifyContent:"center",py:4,children:o.jsx(rt,{})}),r&&!C&&o.jsx(W,{py:4,children:o.jsx(Rt,{severity:"error",children:r})}),o.jsxs(W,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,flexWrap:"wrap",gap:1},children:[o.jsxs(tt,{variant:"h4",component:"h1",sx:{mb:{xs:1,sm:0},color:"text.primary",fontWeight:500,letterSpacing:"-0.01em"},children:[g," Entries Found"]}),o.jsxs(W,{sx:{display:"flex",alignItems:"center",gap:1,flexWrap:"wrap"},children:[o.jsx(tt,{variant:"body2",sx:{mr:1,minWidth:55,color:"text.secondary"},children:"Sort by:"}),o.jsx(Mt,{size:"small",variant:"outlined",sx:{minWidth:150},children:o.jsxs(Tt,{id:"sort-by-select",name:"sortBy",value:y??"",displayEmpty:!0,onChange:Y,MenuProps:{PaperProps:{sx:{mt:1,borderRadius:2,minWidth:180}}},children:[o.jsx(A,{value:"package_name",children:"Name"}),o.jsx(A,{value:"average_rating",children:"Rating"}),o.jsx(A,{value:"ratings_count",children:"Number of Ratings"}),o.jsx(A,{value:"github_stars",children:"GitHub Stars"}),o.jsx(A,{value:"citations",children:"Citations"}),o.jsx(A,{value:"last_commit",children:"Last Commit"})]})}),o.jsx(Lt,{onClick:ht,size:"small","aria-label":"toggle sort direction",sx:{border:"1px solid",borderColor:"divider",ml:1,background:n=>n.palette.mode==="dark"?"rgba(255,255,255,0.08)":"rgba(0,0,0,0.04)","&:hover":{background:n=>n.palette.action.hover}},children:j==="asc"?o.jsx(ia,{fontSize:"small"}):o.jsx(na,{fontSize:"small"})}),o.jsxs(ra,{value:z,exclusive:!0,onChange:yt,"aria-label":"view mode",size:"small",sx:{ml:{sm:2},background:"transparent",borderRadius:2},children:[o.jsx(pt,{value:"card","aria-label":"card view",sx:{borderRadius:1,px:1.5},children:o.jsx(ca,{})}),o.jsx(pt,{value:"list","aria-label":"list view",sx:{borderRadius:1,px:1.5},children:o.jsx(la,{})})]})]})]}),!C&&!r&&o.jsx(b.Suspense,{fallback:mt,children:z==="card"?o.jsxs(b.Fragment,{children:[o.jsx(nt,{container:!0,spacing:2,sx:{p:0},children:R.map(n=>o.jsx(nt,{item:!0,xs:12,sm:6,md:4,lg:3,children:o.jsx(da,{pkg:n})},n.id))}),et>1&&o.jsx(W,{sx:{display:"flex",justifyContent:"center",mt:4,mb:2},children:o.jsx(Jt,{count:et,page:i,onChange:at,color:"primary"})})]}):o.jsx(ua,{packages:R})}),!C&&!r&&R.length===0&&g===0&&o.jsx(W,{sx:{textAlign:"center",mt:4,py:4},children:o.jsx(tt,{variant:"h6",color:"text.secondary",children:"No packages found matching your criteria."})})]})};export{fa as default};
