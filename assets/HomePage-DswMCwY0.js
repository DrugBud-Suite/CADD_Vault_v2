const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/PackageCard-C23pxdMW.js","assets/index-CjBcR77K.js","assets/index-B7rZpWz0.css","assets/RatingInput-2IJ8SmMU.js","assets/PackageMetrics-Cw-yDA9t.js","assets/CardContent-V9ex3Wk0.js","assets/PackageList-Cj_vVAn4.js"])))=>i.map(i=>d[i]);
import{r as v,g as q,a as J,_ as G,u as Pt,b as f,c as W,j as o,d as K,e as kt,s as F,f as H,h as O,i as Q,B as gt,k as V,l as zt,m as U,n as ot,o as st,C as jt,p as w,q as rt,A as Rt,T as Z,F as Mt,S as Tt,M as A,I as Lt,t as nt,v as vt}from"./index-CjBcR77K.js";import{G as it}from"./Grid-BcUaAfDr.js";function _t(t){return v.Children.toArray(t).filter(a=>v.isValidElement(a))}function It(t){return q("MuiPagination",t)}J("MuiPagination",["root","ul","outlined","text"]);const Nt=["boundaryCount","componentName","count","defaultPage","disabled","hideNextButton","hidePrevButton","onChange","page","showFirstButton","showLastButton","siblingCount"];function Ot(t={}){const{boundaryCount:a=1,componentName:e="usePagination",count:s=1,defaultPage:$=1,disabled:y=!1,hideNextButton:m=!1,hidePrevButton:c=!1,onChange:x,page:k,showFirstButton:g=!1,showLastButton:j=!1,siblingCount:z=1}=t,i=G(t,Nt),[u,T]=Pt({controlled:k,default:$,name:e,state:"page"}),b=(r,P)=>{k||T(P),x&&x(r,P)},B=(r,P)=>{const S=P-r+1;return Array.from({length:S},(tt,X)=>r+X)},L=B(1,Math.min(a,s)),C=B(Math.max(s-a+1,a+1),s),R=Math.max(Math.min(u-z,s-a-z*2-1),a+2),M=Math.min(Math.max(u+z,a+z*2+2),C.length>0?C[0]-2:s-1),_=[...g?["first"]:[],...c?[]:["previous"],...L,...R>a+2?["start-ellipsis"]:a+1<s-a?[a+1]:[],...B(R,M),...M<s-a-1?["end-ellipsis"]:s-a>a?[s-a]:[],...C,...m?[]:["next"],...j?["last"]:[]],h=r=>{switch(r){case"first":return 1;case"previous":return u-1;case"next":return u+1;case"last":return s;default:return null}},d=_.map(r=>typeof r=="number"?{onClick:P=>{b(P,r)},type:"page",page:r,selected:r===u,disabled:y,"aria-current":r===u?"true":void 0}:{onClick:P=>{b(P,h(r))},type:r,page:h(r),selected:!1,disabled:y||r.indexOf("ellipsis")===-1&&(r==="next"||r==="last"?u>=s:u<=1)});return f({items:d},i)}function Wt(t){return q("MuiPaginationItem",t)}const N=J("MuiPaginationItem",["root","page","sizeSmall","sizeLarge","text","textPrimary","textSecondary","outlined","outlinedPrimary","outlinedSecondary","rounded","ellipsis","firstLast","previousNext","focusVisible","disabled","selected","icon","colorPrimary","colorSecondary"]),lt=W(o.jsx("path",{d:"M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"}),"FirstPage"),ct=W(o.jsx("path",{d:"M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"}),"LastPage"),dt=W(o.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"NavigateBefore"),ut=W(o.jsx("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"NavigateNext"),wt=["className","color","component","components","disabled","page","selected","shape","size","slots","type","variant"],ft=(t,a)=>{const{ownerState:e}=t;return[a.root,a[e.variant],a[`size${O(e.size)}`],e.variant==="text"&&a[`text${O(e.color)}`],e.variant==="outlined"&&a[`outlined${O(e.color)}`],e.shape==="rounded"&&a.rounded,e.type==="page"&&a.page,(e.type==="start-ellipsis"||e.type==="end-ellipsis")&&a.ellipsis,(e.type==="previous"||e.type==="next")&&a.previousNext,(e.type==="first"||e.type==="last")&&a.firstLast]},Ft=t=>{const{classes:a,color:e,disabled:s,selected:$,size:y,shape:m,type:c,variant:x}=t,k={root:["root",`size${O(y)}`,x,m,e!=="standard"&&`color${O(e)}`,e!=="standard"&&`${x}${O(e)}`,s&&"disabled",$&&"selected",{page:"page",first:"firstLast",last:"firstLast","start-ellipsis":"ellipsis","end-ellipsis":"ellipsis",previous:"previousNext",next:"previousNext"}[c]],icon:["icon"]};return Q(k,Wt,a)},Vt=F("div",{name:"MuiPaginationItem",slot:"Root",overridesResolver:ft})(({theme:t,ownerState:a})=>f({},t.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,padding:"0 6px",margin:"0 3px",color:(t.vars||t).palette.text.primary,height:"auto",[`&.${N.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity}},a.size==="small"&&{minWidth:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},a.size==="large"&&{minWidth:40,borderRadius:40/2,padding:"0 10px",fontSize:t.typography.pxToRem(15)})),At=F(gt,{name:"MuiPaginationItem",slot:"Root",overridesResolver:ft})(({theme:t,ownerState:a})=>f({},t.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,height:32,padding:"0 6px",margin:"0 3px",color:(t.vars||t).palette.text.primary,[`&.${N.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${N.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity},transition:t.transitions.create(["color","background-color"],{duration:t.transitions.duration.short}),"&:hover":{backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${N.selected}`]:{backgroundColor:(t.vars||t).palette.action.selected,"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.selectedChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:V.alpha(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(t.vars||t).palette.action.selected}},[`&.${N.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.action.selectedChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:V.alpha(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)},[`&.${N.disabled}`]:{opacity:1,color:(t.vars||t).palette.action.disabled,backgroundColor:(t.vars||t).palette.action.selected}}},a.size==="small"&&{minWidth:26,height:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},a.size==="large"&&{minWidth:40,height:40,borderRadius:40/2,padding:"0 10px",fontSize:t.typography.pxToRem(15)},a.shape==="rounded"&&{borderRadius:(t.vars||t).shape.borderRadius}),({theme:t,ownerState:a})=>f({},a.variant==="text"&&{[`&.${N.selected}`]:f({},a.color!=="standard"&&{color:(t.vars||t).palette[a.color].contrastText,backgroundColor:(t.vars||t).palette[a.color].main,"&:hover":{backgroundColor:(t.vars||t).palette[a.color].dark,"@media (hover: none)":{backgroundColor:(t.vars||t).palette[a.color].main}},[`&.${N.focusVisible}`]:{backgroundColor:(t.vars||t).palette[a.color].dark}},{[`&.${N.disabled}`]:{color:(t.vars||t).palette.action.disabled}})},a.variant==="outlined"&&{border:t.vars?`1px solid rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${N.selected}`]:f({},a.color!=="standard"&&{color:(t.vars||t).palette[a.color].main,border:`1px solid ${t.vars?`rgba(${t.vars.palette[a.color].mainChannel} / 0.5)`:V.alpha(t.palette[a.color].main,.5)}`,backgroundColor:t.vars?`rgba(${t.vars.palette[a.color].mainChannel} / ${t.vars.palette.action.activatedOpacity})`:V.alpha(t.palette[a.color].main,t.palette.action.activatedOpacity),"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette[a.color].mainChannel} / calc(${t.vars.palette.action.activatedOpacity} + ${t.vars.palette.action.focusOpacity}))`:V.alpha(t.palette[a.color].main,t.palette.action.activatedOpacity+t.palette.action.focusOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${N.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette[a.color].mainChannel} / calc(${t.vars.palette.action.activatedOpacity} + ${t.vars.palette.action.focusOpacity}))`:V.alpha(t.palette[a.color].main,t.palette.action.activatedOpacity+t.palette.action.focusOpacity)}},{[`&.${N.disabled}`]:{borderColor:(t.vars||t).palette.action.disabledBackground,color:(t.vars||t).palette.action.disabled}})})),Dt=F("div",{name:"MuiPaginationItem",slot:"Icon",overridesResolver:(t,a)=>a.icon})(({theme:t,ownerState:a})=>f({fontSize:t.typography.pxToRem(20),margin:"0 -8px"},a.size==="small"&&{fontSize:t.typography.pxToRem(18)},a.size==="large"&&{fontSize:t.typography.pxToRem(22)})),Gt=v.forwardRef(function(a,e){const s=K({props:a,name:"MuiPaginationItem"}),{className:$,color:y="standard",component:m,components:c={},disabled:x=!1,page:k,selected:g=!1,shape:j="circular",size:z="medium",slots:i={},type:u="page",variant:T="text"}=s,b=G(s,wt),B=f({},s,{color:y,disabled:x,selected:g,shape:j,size:z,type:u,variant:T}),L=kt(),C=Ft(B),M=(L?{previous:i.next||c.next||ut,next:i.previous||c.previous||dt,last:i.first||c.first||lt,first:i.last||c.last||ct}:{previous:i.previous||c.previous||dt,next:i.next||c.next||ut,first:i.first||c.first||lt,last:i.last||c.last||ct})[u];return u==="start-ellipsis"||u==="end-ellipsis"?o.jsx(Vt,{ref:e,ownerState:B,className:H(C.root,$),children:"â€¦"}):o.jsxs(At,f({ref:e,ownerState:B,component:m,disabled:x,className:H(C.root,$)},b,{children:[u==="page"&&k,M?o.jsx(Dt,{as:M,ownerState:B,className:C.icon}):null]}))}),St=["boundaryCount","className","color","count","defaultPage","disabled","getItemAriaLabel","hideNextButton","hidePrevButton","onChange","page","renderItem","shape","showFirstButton","showLastButton","siblingCount","size","variant"],Et=t=>{const{classes:a,variant:e}=t;return Q({root:["root",e],ul:["ul"]},It,a)},Ht=F("nav",{name:"MuiPagination",slot:"Root",overridesResolver:(t,a)=>{const{ownerState:e}=t;return[a.root,a[e.variant]]}})({}),Ut=F("ul",{name:"MuiPagination",slot:"Ul",overridesResolver:(t,a)=>a.ul})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"});function qt(t,a,e){return t==="page"?`${e?"":"Go to "}page ${a}`:`Go to ${t} page`}const Jt=v.forwardRef(function(a,e){const s=K({props:a,name:"MuiPagination"}),{boundaryCount:$=1,className:y,color:m="standard",count:c=1,defaultPage:x=1,disabled:k=!1,getItemAriaLabel:g=qt,hideNextButton:j=!1,hidePrevButton:z=!1,renderItem:i=d=>o.jsx(Gt,f({},d)),shape:u="circular",showFirstButton:T=!1,showLastButton:b=!1,siblingCount:B=1,size:L="medium",variant:C="text"}=s,R=G(s,St),{items:M}=Ot(f({},s,{componentName:"Pagination"})),_=f({},s,{boundaryCount:$,color:m,count:c,defaultPage:x,disabled:k,getItemAriaLabel:g,hideNextButton:j,hidePrevButton:z,renderItem:i,shape:u,showFirstButton:T,showLastButton:b,siblingCount:B,size:L,variant:C}),h=Et(_);return o.jsx(Ht,f({"aria-label":"pagination navigation",className:H(h.root,y),ownerState:_,ref:e},R,{children:o.jsx(Ut,{className:h.ul,ownerState:_,children:M.map((d,r)=>o.jsx("li",{children:i(f({},d,{color:m,"aria-label":g(d.type,d.page,d.selected),shape:u,size:L,variant:C}))},r))})}))});function Kt(t){return q("MuiToggleButton",t)}const D=J("MuiToggleButton",["root","disabled","selected","standard","primary","secondary","sizeSmall","sizeMedium","sizeLarge","fullWidth"]),xt=v.createContext({}),bt=v.createContext(void 0);function Qt(t,a){return a===void 0||t===void 0?!1:Array.isArray(a)?a.indexOf(t)>=0:t===a}const Xt=["value"],Yt=["children","className","color","disabled","disableFocusRipple","fullWidth","onChange","onClick","selected","size","value"],Zt=t=>{const{classes:a,fullWidth:e,selected:s,disabled:$,size:y,color:m}=t,c={root:["root",s&&"selected",$&&"disabled",e&&"fullWidth",`size${O(y)}`,m]};return Q(c,Kt,a)},ta=F(gt,{name:"MuiToggleButton",slot:"Root",overridesResolver:(t,a)=>{const{ownerState:e}=t;return[a.root,a[`size${O(e.size)}`]]}})(({theme:t,ownerState:a})=>{let e=a.color==="standard"?t.palette.text.primary:t.palette[a.color].main,s;return t.vars&&(e=a.color==="standard"?t.vars.palette.text.primary:t.vars.palette[a.color].main,s=a.color==="standard"?t.vars.palette.text.primaryChannel:t.vars.palette[a.color].mainChannel),f({},t.typography.button,{borderRadius:(t.vars||t).shape.borderRadius,padding:11,border:`1px solid ${(t.vars||t).palette.divider}`,color:(t.vars||t).palette.action.active},a.fullWidth&&{width:"100%"},{[`&.${D.disabled}`]:{color:(t.vars||t).palette.action.disabled,border:`1px solid ${(t.vars||t).palette.action.disabledBackground}`},"&:hover":{textDecoration:"none",backgroundColor:t.vars?`rgba(${t.vars.palette.text.primaryChannel} / ${t.vars.palette.action.hoverOpacity})`:U(t.palette.text.primary,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${D.selected}`]:{color:e,backgroundColor:t.vars?`rgba(${s} / ${t.vars.palette.action.selectedOpacity})`:U(e,t.palette.action.selectedOpacity),"&:hover":{backgroundColor:t.vars?`rgba(${s} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:U(e,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?`rgba(${s} / ${t.vars.palette.action.selectedOpacity})`:U(e,t.palette.action.selectedOpacity)}}}},a.size==="small"&&{padding:7,fontSize:t.typography.pxToRem(13)},a.size==="large"&&{padding:15,fontSize:t.typography.pxToRem(15)})}),pt=v.forwardRef(function(a,e){const s=v.useContext(xt),{value:$}=s,y=G(s,Xt),m=v.useContext(bt),c=zt(f({},y,{selected:Qt(a.value,$)}),a),x=K({props:c,name:"MuiToggleButton"}),{children:k,className:g,color:j="standard",disabled:z=!1,disableFocusRipple:i=!1,fullWidth:u=!1,onChange:T,onClick:b,selected:B,size:L="medium",value:C}=x,R=G(x,Yt),M=f({},x,{color:j,disabled:z,disableFocusRipple:i,fullWidth:u,size:L}),_=Zt(M),h=r=>{b&&(b(r,C),r.defaultPrevented)||T&&T(r,C)},d=m||"";return o.jsx(ta,f({className:H(y.className,_.root,g,d),disabled:z,focusRipple:!i,ref:e,onClick:h,onChange:T,value:C,ownerState:M,"aria-pressed":B},R,{children:k}))});function aa(t){return q("MuiToggleButtonGroup",t)}const p=J("MuiToggleButtonGroup",["root","selected","horizontal","vertical","disabled","grouped","groupedHorizontal","groupedVertical","fullWidth","firstButton","lastButton","middleButton"]),ea=["children","className","color","disabled","exclusive","fullWidth","onChange","orientation","size","value"],oa=t=>{const{classes:a,orientation:e,fullWidth:s,disabled:$}=t,y={root:["root",e==="vertical"&&"vertical",s&&"fullWidth"],grouped:["grouped",`grouped${O(e)}`,$&&"disabled"],firstButton:["firstButton"],lastButton:["lastButton"],middleButton:["middleButton"]};return Q(y,aa,a)},sa=F("div",{name:"MuiToggleButtonGroup",slot:"Root",overridesResolver:(t,a)=>{const{ownerState:e}=t;return[{[`& .${p.grouped}`]:a.grouped},{[`& .${p.grouped}`]:a[`grouped${O(e.orientation)}`]},{[`& .${p.firstButton}`]:a.firstButton},{[`& .${p.lastButton}`]:a.lastButton},{[`& .${p.middleButton}`]:a.middleButton},a.root,e.orientation==="vertical"&&a.vertical,e.fullWidth&&a.fullWidth]}})(({ownerState:t,theme:a})=>f({display:"inline-flex",borderRadius:(a.vars||a).shape.borderRadius},t.orientation==="vertical"&&{flexDirection:"column"},t.fullWidth&&{width:"100%"},{[`& .${p.grouped}`]:f({},t.orientation==="horizontal"?{[`&.${p.selected} + .${p.grouped}.${p.selected}`]:{borderLeft:0,marginLeft:0}}:{[`&.${p.selected} + .${p.grouped}.${p.selected}`]:{borderTop:0,marginTop:0}})},t.orientation==="horizontal"?{[`& .${p.firstButton},& .${p.middleButton}`]:{borderTopRightRadius:0,borderBottomRightRadius:0},[`& .${p.lastButton},& .${p.middleButton}`]:{marginLeft:-1,borderLeft:"1px solid transparent",borderTopLeftRadius:0,borderBottomLeftRadius:0}}:{[`& .${p.firstButton},& .${p.middleButton}`]:{borderBottomLeftRadius:0,borderBottomRightRadius:0},[`& .${p.lastButton},& .${p.middleButton}`]:{marginTop:-1,borderTop:"1px solid transparent",borderTopLeftRadius:0,borderTopRightRadius:0}},t.orientation==="horizontal"?{[`& .${p.lastButton}.${D.disabled},& .${p.middleButton}.${D.disabled}`]:{borderLeft:"1px solid transparent"}}:{[`& .${p.lastButton}.${D.disabled},& .${p.middleButton}.${D.disabled}`]:{borderTop:"1px solid transparent"}})),ra=v.forwardRef(function(a,e){const s=K({props:a,name:"MuiToggleButtonGroup"}),{children:$,className:y,color:m="standard",disabled:c=!1,exclusive:x=!1,fullWidth:k=!1,onChange:g,orientation:j="horizontal",size:z="medium",value:i}=s,u=G(s,ea),T=f({},s,{disabled:c,fullWidth:k,orientation:j,size:z}),b=oa(T),B=v.useCallback((h,d)=>{if(!g)return;const r=i&&i.indexOf(d);let P;i&&r>=0?(P=i.slice(),P.splice(r,1)):P=i?i.concat(d):[d],g(h,P)},[g,i]),L=v.useCallback((h,d)=>{g&&g(h,i===d?null:d)},[g,i]),C=v.useMemo(()=>({className:b.grouped,onChange:x?L:B,value:i,size:z,fullWidth:k,color:m,disabled:c}),[b.grouped,x,L,B,i,z,k,m,c]),R=_t($),M=R.length,_=h=>{const d=h===0,r=h===M-1;return d&&r?"":d?b.firstButton:r?b.lastButton:b.middleButton};return o.jsx(sa,f({role:"group",className:H(b.root,y),ref:e,ownerState:T},u,{children:o.jsx(xt.Provider,{value:C,children:R.map((h,d)=>o.jsx(bt.Provider,{value:_(d),children:h},d))})}))}),na=W(o.jsx("path",{d:"m20 12-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8z"}),"ArrowDownward"),ia=W(o.jsx("path",{d:"m4 12 1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8z"}),"ArrowUpward"),la=W(o.jsx("path",{d:"M3 14h4v-4H3zm0 5h4v-4H3zM3 9h4V5H3zm5 5h13v-4H8zm0 5h13v-4H8zM8 5v4h13V5z"}),"ViewList"),ca=W(o.jsx("path",{d:"M14.67 5v6.5H9.33V5zm1 6.5H21V5h-5.33zm-1 7.5v-6.5H9.33V19zm1-6.5V19H21v-6.5zm-7.34 0H3V19h5.33zm0-1V5H3v6.5z"}),"ViewModule"),da=v.lazy(()=>vt(()=>import("./PackageCard-C23pxdMW.js"),__vite__mapDeps([0,1,2,3,4,5]))),ua=v.lazy(()=>vt(()=>import("./PackageList-Cj_vVAn4.js"),__vite__mapDeps([6,1,2,3,4]))),va=()=>{const{searchTerm:t,selectedTags:a,minStars:e,hasGithub:s,hasWebserver:$,hasPublication:y,minCitations:m,folder1:c,category1:x,selectedLicenses:k,sortBy:g,sortDirection:j,viewMode:z,currentPage:i,totalFilteredCount:u}=ot(st(n=>({searchTerm:n.searchTerm,selectedTags:n.selectedTags,minStars:n.minStars,hasGithub:n.hasGithub,hasWebserver:n.hasWebserver,hasPublication:n.hasPublication,minCitations:n.minCitations,folder1:n.folder1,category1:n.category1,selectedLicenses:n.selectedLicenses,sortBy:n.sortBy,sortDirection:n.sortDirection,viewMode:n.viewMode,currentPage:n.currentPage,totalFilteredCount:n.totalFilteredCount}))),{setSort:T,setDisplayedPackages:b,setTotalFilteredCount:B,setViewMode:L,setCurrentPage:C,setOriginalPackagesAndDeriveMetadata:R}=ot(st(n=>({setSort:n.setSort,setDisplayedPackages:n.setDisplayedPackages,setTotalFilteredCount:n.setTotalFilteredCount,setViewMode:n.setViewMode,setCurrentPage:n.setCurrentPage,setOriginalPackagesAndDeriveMetadata:n.setOriginalPackagesAndDeriveMetadata}))),[M,_]=v.useState([]),[h,d]=v.useState(!0),[r,P]=v.useState(""),S=24;v.useEffect(()=>{(async()=>{P("");try{const{data:I,error:E}=await nt.from("packages").select("id, package_name, description, tags, license, github_stars, citations, repo_link, webserver, publication, folder1, category1, last_commit, average_rating, ratings_count, github_owner, github_repo, jif, journal, last_commit_ago, link, page_icon, primary_language, ratings_sum");if(E){console.error("Error fetching all packages for metadata:",E.message),P("Could not load initial filter options."),R([]);return}R(I||[])}catch(I){console.error("Error in fetchGlobalDataAndSetMetadata:",I.message),P("An unexpected error occurred while loading filter options."),R([])}})()},[R]),v.useEffect(()=>{(async()=>{d(!0),P(""),console.log(`Workspaceing packages. Page: ${i}, SortBy: ${g}, Dir: ${j}, Search: ${t}`);const E=(i-1)*S,Ct=E+S-1;try{let l=nt.from("packages").select("*, average_rating, ratings_count",{count:"exact"});if(t&&(l=l.or(`package_name.ilike.%${t}%,description.ilike.%${t}%`)),a.length>0){const Bt=JSON.stringify(a);l=l.contains("tags",Bt)}e!==null&&e>0&&(l=l.gte("github_stars",e)),s&&(l=l.not("repo_link","is",null)),$&&(l=l.not("webserver","is",null)),y&&(l=l.not("publication","is",null)),m!==null&&m>0&&(l=l.gte("citations",m)),c&&(l=l.eq("folder1",c)),x&&(l=l.eq("category1",x)),k.length>0&&(l=l.in("license",k)),g&&j?l=l.order(g,{ascending:j==="asc",nullsFirst:!1}):l=l.order("package_name",{ascending:!0,nullsFirst:!1}),l=l.range(E,Ct);const{data:Y,error:et,count:$t}=await l;if(et)throw et;Y?(_(Y),b(Y)):(_([]),b([])),B($t??0)}catch(l){P(`Failed to fetch packages: ${(l==null?void 0:l.message)||"Unknown error"}`),console.error("Error fetching packages from Supabase:",l),_([]),b([]),B(0)}finally{d(!1)}})()},[i,t,a,e,s,$,y,m,c,x,k,g,j,b,B]);const tt=(n,I)=>{C(I),window.scrollTo(0,0)},X=n=>{const I=n.target.value;C(1),T(I===""?null:I,j)},ht=()=>{C(1),T(g,j==="asc"?"desc":"asc")},yt=(n,I)=>{I!==null&&L(I)},mt=o.jsx(w,{display:"flex",justifyContent:"center",py:4,children:o.jsx(rt,{})}),at=Math.ceil(u/S);return o.jsxs(jt,{maxWidth:"lg",sx:{pt:2,px:{xs:1,sm:2},pb:0},children:[h&&o.jsx(w,{display:"flex",justifyContent:"center",py:4,children:o.jsx(rt,{})}),r&&!h&&o.jsx(w,{py:4,children:o.jsx(Rt,{severity:"error",children:r})}),o.jsxs(w,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,flexWrap:"wrap",gap:1},children:[o.jsxs(Z,{variant:"h4",component:"h1",sx:{mb:{xs:1,sm:0},color:"text.primary",fontWeight:500,letterSpacing:"-0.01em"},children:[u," Entries Found"]}),o.jsxs(w,{sx:{display:"flex",alignItems:"center",gap:1,flexWrap:"wrap"},children:[o.jsx(Z,{variant:"body2",sx:{mr:1,minWidth:55,color:"text.secondary"},children:"Sort by:"}),o.jsx(Mt,{size:"small",variant:"outlined",sx:{minWidth:150},children:o.jsxs(Tt,{id:"sort-by-select",name:"sortBy",value:g??"",displayEmpty:!0,onChange:X,MenuProps:{PaperProps:{sx:{mt:1,borderRadius:2,minWidth:180}}},children:[o.jsx(A,{value:"package_name",children:"Name"}),o.jsx(A,{value:"average_rating",children:"Rating"}),o.jsx(A,{value:"ratings_count",children:"Number of Ratings"}),o.jsx(A,{value:"github_stars",children:"GitHub Stars"}),o.jsx(A,{value:"citations",children:"Citations"}),o.jsx(A,{value:"last_commit",children:"Last Commit"})]})}),o.jsx(Lt,{onClick:ht,size:"small","aria-label":"toggle sort direction",sx:{border:"1px solid",borderColor:"divider",ml:1,background:n=>n.palette.mode==="dark"?"rgba(255,255,255,0.08)":"rgba(0,0,0,0.04)","&:hover":{background:n=>n.palette.action.hover}},children:j==="asc"?o.jsx(ia,{fontSize:"small"}):o.jsx(na,{fontSize:"small"})}),o.jsxs(ra,{value:z,exclusive:!0,onChange:yt,"aria-label":"view mode",size:"small",sx:{ml:{sm:2},background:"transparent",borderRadius:2},children:[o.jsx(pt,{value:"card","aria-label":"card view",sx:{borderRadius:1,px:1.5},children:o.jsx(ca,{})}),o.jsx(pt,{value:"list","aria-label":"list view",sx:{borderRadius:1,px:1.5},children:o.jsx(la,{})})]})]})]}),!h&&!r&&o.jsx(v.Suspense,{fallback:mt,children:z==="card"?o.jsxs(v.Fragment,{children:[o.jsx(it,{container:!0,spacing:2,sx:{p:0},children:M.map(n=>o.jsx(it,{item:!0,xs:12,sm:6,md:4,lg:3,children:o.jsx(da,{pkg:n})},n.id))}),at>1&&o.jsx(w,{sx:{display:"flex",justifyContent:"center",mt:4,mb:2},children:o.jsx(Jt,{count:at,page:i,onChange:tt,color:"primary"})})]}):o.jsx(ua,{packages:M})}),!h&&!r&&M.length===0&&u===0&&o.jsx(w,{sx:{textAlign:"center",mt:4,py:4},children:o.jsx(Z,{variant:"h6",color:"text.secondary",children:"No packages found matching your criteria."})})]})};export{va as default};
