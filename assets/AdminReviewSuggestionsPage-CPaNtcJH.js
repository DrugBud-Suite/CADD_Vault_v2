import{a as Ce,g as _e,r as d,d as Re,_ as ce,b as S,j as e,s as se,f as Ge,a7 as lt,a8 as dt,h as E,i as ke,k as Qe,a9 as ct,aa as ut,ab as ye,ac as be,ad as pt,ae as Ee,U as Xe,O as ht,af as ft,ag as xt,x as q,y as U,z as N,D as V,Q as mt,R as vt,t as W,p as B,q as ge,C as De,A as Le,T as b,ah as bt,ai as je,H as J,aj as gt,ak as jt,al as yt,am as $e,an as k,ao as M,ap as Ct,N as _t,I as Y,aq as Rt,$ as kt,a0 as St,a1 as wt,a3 as zt,a2 as Et}from"./index-BMoqsGA1.js";import{E as Dt}from"./Edit-eRXCwzQ6.js";import{T as Lt,a as le}from"./Tabs-D7UYi8IL.js";import{g as $t}from"./getValidReactChildren-DayCWjBU.js";import{D as Tt}from"./DialogContentText-BPypIeOJ.js";function Bt(t){return _e("MuiButtonGroup",t)}const w=Ce("MuiButtonGroup",["root","contained","outlined","text","disableElevation","disabled","firstButton","fullWidth","vertical","grouped","groupedHorizontal","groupedVertical","groupedText","groupedTextHorizontal","groupedTextVertical","groupedTextPrimary","groupedTextSecondary","groupedOutlined","groupedOutlinedHorizontal","groupedOutlinedVertical","groupedOutlinedPrimary","groupedOutlinedSecondary","groupedContained","groupedContainedHorizontal","groupedContainedVertical","groupedContainedPrimary","groupedContainedSecondary","lastButton","middleButton"]),At=["children","className","color","component","disabled","disableElevation","disableFocusRipple","disableRipple","fullWidth","orientation","size","variant"],Mt=(t,r)=>{const{ownerState:o}=t;return[{[`& .${w.grouped}`]:r.grouped},{[`& .${w.grouped}`]:r[`grouped${E(o.orientation)}`]},{[`& .${w.grouped}`]:r[`grouped${E(o.variant)}`]},{[`& .${w.grouped}`]:r[`grouped${E(o.variant)}${E(o.orientation)}`]},{[`& .${w.grouped}`]:r[`grouped${E(o.variant)}${E(o.color)}`]},{[`& .${w.firstButton}`]:r.firstButton},{[`& .${w.lastButton}`]:r.lastButton},{[`& .${w.middleButton}`]:r.middleButton},r.root,r[o.variant],o.disableElevation===!0&&r.disableElevation,o.fullWidth&&r.fullWidth,o.orientation==="vertical"&&r.vertical]},Pt=t=>{const{classes:r,color:o,disabled:a,disableElevation:c,fullWidth:f,orientation:g,variant:x}=t,h={root:["root",x,g==="vertical"&&"vertical",f&&"fullWidth",c&&"disableElevation"],grouped:["grouped",`grouped${E(g)}`,`grouped${E(x)}`,`grouped${E(x)}${E(g)}`,`grouped${E(x)}${E(o)}`,a&&"disabled"],firstButton:["firstButton"],lastButton:["lastButton"],middleButton:["middleButton"]};return ke(h,Bt,r)},Ot=se("div",{name:"MuiButtonGroup",slot:"Root",overridesResolver:Mt})(({theme:t,ownerState:r})=>S({display:"inline-flex",borderRadius:(t.vars||t).shape.borderRadius},r.variant==="contained"&&{boxShadow:(t.vars||t).shadows[2]},r.disableElevation&&{boxShadow:"none"},r.fullWidth&&{width:"100%"},r.orientation==="vertical"&&{flexDirection:"column"},{[`& .${w.grouped}`]:S({minWidth:40,"&:hover":S({},r.variant==="contained"&&{boxShadow:"none"})},r.variant==="contained"&&{boxShadow:"none"}),[`& .${w.firstButton},& .${w.middleButton}`]:S({},r.orientation==="horizontal"&&{borderTopRightRadius:0,borderBottomRightRadius:0},r.orientation==="vertical"&&{borderBottomRightRadius:0,borderBottomLeftRadius:0},r.variant==="text"&&r.orientation==="horizontal"&&{borderRight:t.vars?`1px solid rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${w.disabled}`]:{borderRight:`1px solid ${(t.vars||t).palette.action.disabled}`}},r.variant==="text"&&r.orientation==="vertical"&&{borderBottom:t.vars?`1px solid rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${w.disabled}`]:{borderBottom:`1px solid ${(t.vars||t).palette.action.disabled}`}},r.variant==="text"&&r.color!=="inherit"&&{borderColor:t.vars?`rgba(${t.vars.palette[r.color].mainChannel} / 0.5)`:Qe.alpha(t.palette[r.color].main,.5)},r.variant==="outlined"&&r.orientation==="horizontal"&&{borderRightColor:"transparent"},r.variant==="outlined"&&r.orientation==="vertical"&&{borderBottomColor:"transparent"},r.variant==="contained"&&r.orientation==="horizontal"&&{borderRight:`1px solid ${(t.vars||t).palette.grey[400]}`,[`&.${w.disabled}`]:{borderRight:`1px solid ${(t.vars||t).palette.action.disabled}`}},r.variant==="contained"&&r.orientation==="vertical"&&{borderBottom:`1px solid ${(t.vars||t).palette.grey[400]}`,[`&.${w.disabled}`]:{borderBottom:`1px solid ${(t.vars||t).palette.action.disabled}`}},r.variant==="contained"&&r.color!=="inherit"&&{borderColor:(t.vars||t).palette[r.color].dark},{"&:hover":S({},r.variant==="outlined"&&r.orientation==="horizontal"&&{borderRightColor:"currentColor"},r.variant==="outlined"&&r.orientation==="vertical"&&{borderBottomColor:"currentColor"})}),[`& .${w.lastButton},& .${w.middleButton}`]:S({},r.orientation==="horizontal"&&{borderTopLeftRadius:0,borderBottomLeftRadius:0},r.orientation==="vertical"&&{borderTopRightRadius:0,borderTopLeftRadius:0},r.variant==="outlined"&&r.orientation==="horizontal"&&{marginLeft:-1},r.variant==="outlined"&&r.orientation==="vertical"&&{marginTop:-1})})),It=d.forwardRef(function(r,o){const a=Re({props:r,name:"MuiButtonGroup"}),{children:c,className:f,color:g="primary",component:x="div",disabled:h=!1,disableElevation:m=!1,disableFocusRipple:y=!1,disableRipple:i=!1,fullWidth:$=!1,orientation:C="horizontal",size:u="medium",variant:j="outlined"}=a,z=ce(a,At),s=S({},a,{color:g,component:x,disabled:h,disableElevation:m,disableFocusRipple:y,disableRipple:i,fullWidth:$,orientation:C,size:u,variant:j}),l=Pt(s),_=d.useMemo(()=>({className:l.grouped,color:g,disabled:h,disableElevation:m,disableFocusRipple:y,disableRipple:i,fullWidth:$,size:u,variant:j}),[g,h,m,y,i,$,u,j,l.grouped]),F=$t(c),G=F.length,K=A=>{const R=A===0,Q=A===G-1;return R&&Q?"":R?l.firstButton:Q?l.lastButton:l.middleButton};return e.jsx(Ot,S({as:x,role:"group",className:Ge(l.root,f),ref:o,ownerState:s},z,{children:e.jsx(lt.Provider,{value:_,children:F.map((A,R)=>e.jsx(dt.Provider,{value:K(R),children:A},R))})}))});function Te(t){return t.substring(2).toLowerCase()}function Wt(t,r){return r.documentElement.clientWidth<t.clientX||r.documentElement.clientHeight<t.clientY}function Ft(t){const{children:r,disableReactTree:o=!1,mouseEvent:a="onClick",onClickAway:c,touchEvent:f="onTouchEnd"}=t,g=d.useRef(!1),x=d.useRef(null),h=d.useRef(!1),m=d.useRef(!1);d.useEffect(()=>(setTimeout(()=>{h.current=!0},0),()=>{h.current=!1}),[]);const y=ct(ut(r),x),i=ye(u=>{const j=m.current;m.current=!1;const z=be(x.current);if(!h.current||!x.current||"clientX"in u&&Wt(u,z))return;if(g.current){g.current=!1;return}let s;u.composedPath?s=u.composedPath().indexOf(x.current)>-1:s=!z.documentElement.contains(u.target)||x.current.contains(u.target),!s&&(o||!j)&&c(u)}),$=u=>j=>{m.current=!0;const z=r.props[u];z&&z(j)},C={ref:y};return f!==!1&&(C[f]=$(f)),d.useEffect(()=>{if(f!==!1){const u=Te(f),j=be(x.current),z=()=>{g.current=!0};return j.addEventListener(u,i),j.addEventListener("touchmove",z),()=>{j.removeEventListener(u,i),j.removeEventListener("touchmove",z)}}},[i,f]),a!==!1&&(C[a]=$(a)),d.useEffect(()=>{if(a!==!1){const u=Te(a),j=be(x.current);return j.addEventListener(u,i),()=>{j.removeEventListener(u,i)}}},[i,a]),e.jsx(d.Fragment,{children:d.cloneElement(r,C)})}function Ht(t={}){const{autoHideDuration:r=null,disableWindowBlurListener:o=!1,onClose:a,open:c,resumeHideDuration:f}=t,g=pt();d.useEffect(()=>{if(!c)return;function s(l){l.defaultPrevented||(l.key==="Escape"||l.key==="Esc")&&(a==null||a(l,"escapeKeyDown"))}return document.addEventListener("keydown",s),()=>{document.removeEventListener("keydown",s)}},[c,a]);const x=ye((s,l)=>{a==null||a(s,l)}),h=ye(s=>{!a||s==null||g.start(s,()=>{x(null,"timeout")})});d.useEffect(()=>(c&&h(r),g.clear),[c,r,h,g]);const m=s=>{a==null||a(s,"clickaway")},y=g.clear,i=d.useCallback(()=>{r!=null&&h(f??r*.5)},[r,f,h]),$=s=>l=>{const _=s.onBlur;_==null||_(l),i()},C=s=>l=>{const _=s.onFocus;_==null||_(l),y()},u=s=>l=>{const _=s.onMouseEnter;_==null||_(l),y()},j=s=>l=>{const _=s.onMouseLeave;_==null||_(l),i()};return d.useEffect(()=>{if(!o&&c)return window.addEventListener("focus",i),window.addEventListener("blur",y),()=>{window.removeEventListener("focus",i),window.removeEventListener("blur",y)}},[o,c,i,y]),{getRootProps:(s={})=>{const l=S({},Ee(t),Ee(s));return S({role:"presentation"},s,l,{onBlur:$(l),onFocus:C(l),onMouseEnter:u(l),onMouseLeave:j(l)})},onClickAway:m}}function qt(t){return _e("MuiSnackbarContent",t)}Ce("MuiSnackbarContent",["root","message","action"]);const Ut=["action","className","message","role"],Nt=t=>{const{classes:r}=t;return ke({root:["root"],action:["action"],message:["message"]},qt,r)},Vt=se(Xe,{name:"MuiSnackbarContent",slot:"Root",overridesResolver:(t,r)=>r.root})(({theme:t})=>{const r=t.palette.mode==="light"?.8:.98,o=Qe.emphasize(t.palette.background.default,r);return S({},t.typography.body2,{color:t.vars?t.vars.palette.SnackbarContent.color:t.palette.getContrastText(o),backgroundColor:t.vars?t.vars.palette.SnackbarContent.bg:o,display:"flex",alignItems:"center",flexWrap:"wrap",padding:"6px 16px",borderRadius:(t.vars||t).shape.borderRadius,flexGrow:1,[t.breakpoints.up("sm")]:{flexGrow:"initial",minWidth:288}})}),Gt=se("div",{name:"MuiSnackbarContent",slot:"Message",overridesResolver:(t,r)=>r.message})({padding:"8px 0"}),Qt=se("div",{name:"MuiSnackbarContent",slot:"Action",overridesResolver:(t,r)=>r.action})({display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:16,marginRight:-8}),Xt=d.forwardRef(function(r,o){const a=Re({props:r,name:"MuiSnackbarContent"}),{action:c,className:f,message:g,role:x="alert"}=a,h=ce(a,Ut),m=a,y=Nt(m);return e.jsxs(Vt,S({role:x,square:!0,elevation:6,className:Ge(y.root,f),ownerState:m,ref:o},h,{children:[e.jsx(Gt,{className:y.message,ownerState:m,children:g}),c?e.jsx(Qt,{className:y.action,ownerState:m,children:c}):null]}))});function Kt(t){return _e("MuiSnackbar",t)}Ce("MuiSnackbar",["root","anchorOriginTopCenter","anchorOriginBottomCenter","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft"]);const Jt=["onEnter","onExited"],Yt=["action","anchorOrigin","autoHideDuration","children","className","ClickAwayListenerProps","ContentProps","disableWindowBlurListener","message","onBlur","onClose","onFocus","onMouseEnter","onMouseLeave","open","resumeHideDuration","TransitionComponent","transitionDuration","TransitionProps"],Zt=t=>{const{classes:r,anchorOrigin:o}=t,a={root:["root",`anchorOrigin${E(o.vertical)}${E(o.horizontal)}`]};return ke(a,Kt,r)},Be=se("div",{name:"MuiSnackbar",slot:"Root",overridesResolver:(t,r)=>{const{ownerState:o}=t;return[r.root,r[`anchorOrigin${E(o.anchorOrigin.vertical)}${E(o.anchorOrigin.horizontal)}`]]}})(({theme:t,ownerState:r})=>{const o={left:"50%",right:"auto",transform:"translateX(-50%)"};return S({zIndex:(t.vars||t).zIndex.snackbar,position:"fixed",display:"flex",left:8,right:8,justifyContent:"center",alignItems:"center"},r.anchorOrigin.vertical==="top"?{top:8}:{bottom:8},r.anchorOrigin.horizontal==="left"&&{justifyContent:"flex-start"},r.anchorOrigin.horizontal==="right"&&{justifyContent:"flex-end"},{[t.breakpoints.up("sm")]:S({},r.anchorOrigin.vertical==="top"?{top:24}:{bottom:24},r.anchorOrigin.horizontal==="center"&&o,r.anchorOrigin.horizontal==="left"&&{left:24,right:"auto"},r.anchorOrigin.horizontal==="right"&&{right:24,left:"auto"})})}),er=d.forwardRef(function(r,o){const a=Re({props:r,name:"MuiSnackbar"}),c=ht(),f={enter:c.transitions.duration.enteringScreen,exit:c.transitions.duration.leavingScreen},{action:g,anchorOrigin:{vertical:x,horizontal:h}={vertical:"bottom",horizontal:"left"},autoHideDuration:m=null,children:y,className:i,ClickAwayListenerProps:$,ContentProps:C,disableWindowBlurListener:u=!1,message:j,open:z,TransitionComponent:s=ft,transitionDuration:l=f,TransitionProps:{onEnter:_,onExited:F}={}}=a,G=ce(a.TransitionProps,Jt),K=ce(a,Yt),A=S({},a,{anchorOrigin:{vertical:x,horizontal:h},autoHideDuration:m,disableWindowBlurListener:u,TransitionComponent:s,transitionDuration:l}),R=Zt(A),{getRootProps:Q,onClickAway:v}=Ht(S({},A)),[O,X]=d.useState(!0),I=xt({elementType:Be,getSlotProps:Q,externalForwardedProps:K,ownerState:A,additionalProps:{ref:o},className:[R.root,i]}),P=L=>{X(!0),F&&F(L)},H=(L,xe)=>{X(!1),_&&_(L,xe)};return!z&&O?null:e.jsx(Ft,S({onClickAway:v},$,{children:e.jsx(Be,S({},I,{children:e.jsx(s,S({appear:!0,in:z,timeout:l,direction:x==="top"?"down":"up",onEnter:H,onExited:P},G,{children:y||e.jsx(Xt,S({message:j,action:g},C))}))}))}))});var Z={},Ae;function tr(){if(Ae)return Z;Ae=1;var t=q();Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var r=t(U()),o=N();return Z.default=(0,r.default)((0,o.jsx)("path",{d:"M1 21h4V9H1zm22-11c0-1.1-.9-2-2-2h-6.31l.95-4.57.03-.32c0-.41-.17-.79-.44-1.06L14.17 1 7.59 7.59C7.22 7.95 7 8.45 7 9v10c0 1.1.9 2 2 2h9c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-.47.14-.73z"}),"ThumbUp"),Z}var rr=tr();const Me=V(rr);var ee={},Pe;function nr(){if(Pe)return ee;Pe=1;var t=q();Object.defineProperty(ee,"__esModule",{value:!0}),ee.default=void 0;var r=t(U()),o=N();return ee.default=(0,r.default)((0,o.jsx)("path",{d:"M15 3H6c-.83 0-1.54.5-1.84 1.22l-3.02 7.05c-.09.23-.14.47-.14.73v2c0 1.1.9 2 2 2h6.31l-.95 4.57-.03.32c0 .41.17.79.44 1.06L9.83 23l6.59-6.59c.36-.36.58-.86.58-1.41V5c0-1.1-.9-2-2-2m4 0v12h4V3z"}),"ThumbDown"),ee}var or=nr();const Oe=V(or);var te={},Ie;function ar(){if(Ie)return te;Ie=1;var t=q();Object.defineProperty(te,"__esModule",{value:!0}),te.default=void 0;var r=t(U()),o=N();return te.default=(0,r.default)((0,o.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zm2.46-7.12 1.41-1.41L12 12.59l2.12-2.12 1.41 1.41L13.41 14l2.12 2.12-1.41 1.41L12 15.41l-2.12 2.12-1.41-1.41L10.59 14zM15.5 4l-1-1h-5l-1 1H5v2h14V4z"}),"DeleteForever"),te}var ir=ar();const We=V(ir);var re={},Fe;function sr(){if(Fe)return re;Fe=1;var t=q();Object.defineProperty(re,"__esModule",{value:!0}),re.default=void 0;var r=t(U()),o=N();return re.default=(0,r.default)((0,o.jsx)("path",{d:"M21 3H3c-1.11 0-2 .89-2 2v12c0 1.1.89 2 2 2h5v2h8v-2h5c1.1 0 1.99-.9 1.99-2L23 5c0-1.11-.9-2-2-2m0 14H3V5h18zm-5-7v2h-3v3h-2v-3H8v-2h3V7h2v3z"}),"AddToQueue"),re}var lr=sr();const dr=V(lr);var ne={},He;function cr(){if(He)return ne;He=1;var t=q();Object.defineProperty(ne,"__esModule",{value:!0}),ne.default=void 0;var r=t(U()),o=N();return ne.default=(0,r.default)((0,o.jsx)("path",{d:"M9.4 16.6 4.8 12l4.6-4.6L8 6l-6 6 6 6zm5.2 0 4.6-4.6-4.6-4.6L16 6l6 6-6 6z"}),"Code"),ne}var ur=cr();const ue=V(ur);var oe={},qe;function pr(){if(qe)return oe;qe=1;var t=q();Object.defineProperty(oe,"__esModule",{value:!0}),oe.default=void 0;var r=t(U()),o=N();return oe.default=(0,r.default)((0,o.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-5 14H7v-2h7zm3-4H7v-2h10zm0-4H7V7h10z"}),"Article"),oe}var hr=pr();const pe=V(hr);var ae={},Ue;function fr(){if(Ue)return ae;Ue=1;var t=q();Object.defineProperty(ae,"__esModule",{value:!0}),ae.default=void 0;var r=t(U()),o=N();return ae.default=(0,r.default)((0,o.jsx)("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2m-5 14H4v-4h11zm0-5H4V9h11zm5 5h-4V9h4z"}),"Web"),ae}var xr=fr();const he=V(xr);var ie={},Ne;function mr(){if(Ne)return ie;Ne=1;var t=q();Object.defineProperty(ie,"__esModule",{value:!0}),ie.default=void 0;var r=t(U()),o=N();return ie.default=(0,r.default)((0,o.jsx)("path",{d:"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1M8 13h8v-2H8zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5"}),"Link"),ie}var vr=mr();const fe=V(vr),Ve=t=>{if(!t)return!1;try{const r=new URL(t);return r.protocol==="http:"||r.protocol==="https:"}catch{return!1}},de=({url:t,type:r,isRequired:o=!1})=>{const a=()=>{switch(r){case"repo":return e.jsx(ue,{fontSize:"small"});case"publication":return e.jsx(pe,{fontSize:"small"});case"webserver":return e.jsx(he,{fontSize:"small"});case"link":return e.jsx(fe,{fontSize:"small"})}},c=()=>!t&&!o?`No ${r} URL provided`:!t&&o?`${r} URL required but missing`:Ve(t)?`${r} URL: ${t}`:`Invalid ${r} URL: ${t}`,f=()=>!t&&!o?"disabled":!t&&o?"error":Ve(t)?"success":"error";return e.jsx(M,{title:c(),children:e.jsx(B,{component:"span",sx:{color:f()==="success"?"success.main":f()==="error"?"error.main":"text.disabled"},children:a()})})},br=({suggestion:t})=>e.jsxs(B,{sx:{maxWidth:500},children:[e.jsx(b,{variant:"subtitle2",sx:{fontWeight:"bold",mb:1,color:"primary.main"},children:t.package_name}),t.description&&e.jsxs(b,{variant:"body2",sx:{mb:1},children:[e.jsx("strong",{children:"Description:"})," ",t.description]}),t.suggestion_reason&&e.jsxs(b,{variant:"body2",sx:{mb:1},children:[e.jsx("strong",{children:"Suggestion Reason:"})," ",t.suggestion_reason]}),t.tags&&t.tags.length>0&&e.jsxs(b,{variant:"body2",sx:{mb:1},children:[e.jsx("strong",{children:"Tags:"})," ",t.tags.join(", ")]}),t.license&&e.jsxs(b,{variant:"body2",sx:{mb:1},children:[e.jsx("strong",{children:"License:"})," ",t.license]}),t.folder1&&e.jsxs(b,{variant:"body2",sx:{mb:1},children:[e.jsx("strong",{children:"Folder:"})," ",t.folder1]}),t.category1&&e.jsxs(b,{variant:"body2",sx:{mb:1},children:[e.jsx("strong",{children:"Category:"})," ",t.category1]}),e.jsx(b,{variant:"body2",sx:{mb:1,fontWeight:"bold"},children:"URLs:"}),e.jsxs(B,{sx:{pl:1,mb:1},children:[t.repo_url?e.jsxs(b,{variant:"body2",sx:{fontSize:"0.75rem",display:"flex",alignItems:"center",gap:.5},children:[e.jsx(ue,{fontSize:"small",color:"success"}),"Repository:",e.jsx(B,{component:"a",href:t.repo_url,target:"_blank",rel:"noopener noreferrer",sx:{color:"primary.main",textDecoration:"none","&:hover":{textDecoration:"underline"}},children:"URL"})]}):e.jsxs(b,{variant:"body2",sx:{fontSize:"0.75rem",color:"text.secondary"},children:[e.jsx(ue,{fontSize:"small",sx:{mr:.5}}),"Repository: Not provided"]}),t.publication_url?e.jsxs(b,{variant:"body2",sx:{fontSize:"0.75rem",display:"flex",alignItems:"center",gap:.5},children:[e.jsx(pe,{fontSize:"small",color:"success"}),"Publication:",e.jsx(B,{component:"a",href:t.publication_url,target:"_blank",rel:"noopener noreferrer",sx:{color:"primary.main",textDecoration:"none","&:hover":{textDecoration:"underline"}},children:"URL"})]}):e.jsxs(b,{variant:"body2",sx:{fontSize:"0.75rem",color:"text.secondary"},children:[e.jsx(pe,{fontSize:"small",sx:{mr:.5}}),"Publication: Not provided"]}),t.webserver_url?e.jsxs(b,{variant:"body2",sx:{fontSize:"0.75rem",display:"flex",alignItems:"center",gap:.5},children:[e.jsx(he,{fontSize:"small",color:"success"}),"Webserver:",e.jsx(B,{component:"a",href:t.webserver_url,target:"_blank",rel:"noopener noreferrer",sx:{color:"primary.main",textDecoration:"none","&:hover":{textDecoration:"underline"}},children:"URL"})]}):e.jsxs(b,{variant:"body2",sx:{fontSize:"0.75rem",color:"text.secondary"},children:[e.jsx(he,{fontSize:"small",sx:{mr:.5}}),"Webserver: Not provided"]}),t.link_url?e.jsxs(b,{variant:"body2",sx:{fontSize:"0.75rem",display:"flex",alignItems:"center",gap:.5},children:[e.jsx(fe,{fontSize:"small",color:"success"}),"Other Link:",e.jsx(B,{component:"a",href:t.link_url,target:"_blank",rel:"noopener noreferrer",sx:{color:"primary.main",textDecoration:"none","&:hover":{textDecoration:"underline"}},children:"URL"})]}):e.jsxs(b,{variant:"body2",sx:{fontSize:"0.75rem",color:"text.secondary"},children:[e.jsx(fe,{fontSize:"small",sx:{mr:.5}}),"Other Link: Not provided"]})]}),e.jsx(b,{variant:"body2",sx:{mb:1,fontWeight:"bold"},children:"Submission Details:"}),e.jsxs(B,{sx:{pl:1,mb:1},children:[e.jsxs(b,{variant:"body2",sx:{fontSize:"0.75rem"},children:[e.jsx("strong",{children:"Submitted by:"})," ",t.suggester_email||"Anonymous"]}),e.jsxs(b,{variant:"body2",sx:{fontSize:"0.75rem"},children:[e.jsx("strong",{children:"Date:"})," ",new Date(t.created_at).toLocaleDateString()," at ",new Date(t.created_at).toLocaleTimeString()]}),e.jsxs(b,{variant:"body2",sx:{fontSize:"0.75rem"},children:[e.jsx("strong",{children:"Status:"})," ",t.status]}),t.reviewed_at&&e.jsxs(b,{variant:"body2",sx:{fontSize:"0.75rem"},children:[e.jsx("strong",{children:"Reviewed:"})," ",new Date(t.reviewed_at).toLocaleDateString()," at ",new Date(t.reviewed_at).toLocaleTimeString()]})]}),t.admin_notes&&e.jsx(B,{sx:{mt:1,p:1,backgroundColor:"action.hover",borderRadius:1},children:e.jsxs(b,{variant:"body2",sx:{fontSize:"0.75rem",fontStyle:"italic"},children:[e.jsx("strong",{children:"Admin Notes:"})," ",t.admin_notes]})})]}),Rr=()=>{const t=mt(),{isAdmin:r,loading:o,currentUser:a}=vt(),[c,f]=d.useState([]),[g,x]=d.useState(!0),[h,m]=d.useState(null),[y,i]=d.useState(null),[$,C]=d.useState(null),[u,j]=d.useState(null),[z,s]=d.useState(!1),[l,_]=d.useState(""),[F,G]=d.useState(null),[K,A]=d.useState(!1),[R,Q]=d.useState("pending"),[v,O]=d.useState(new Set),[X,I]=d.useState(!1),[P,H]=d.useState(!1),L=d.useCallback(async n=>{var p;x(!0),i(null);try{const{data:T,error:D}=await W.rpc("get_suggestions_with_user_email",{filter_status:n});if(D){console.error("Supabase RPC fetch error:",D),D.code==="42804"&&((p=D.details)!=null&&p.includes("character varying(255)"))?i(`Database function error: Email column type mismatch. Ensure 'u.email::text' is used. Original: ${D.message}`):i(`Failed to load suggestions: ${D.message}`),f([]);return}f(T||[])}catch(T){console.error("Error fetching suggestions:",T.message),i(`Failed to load suggestions: ${T.message}`),f([])}finally{x(!1)}},[]);d.useEffect(()=>{!o&&!r?t("/"):r&&L(R)},[r,o,t,L,R]);const xe=async n=>{if(a){m(n);try{const{error:p}=await W.from("package_suggestions").update({status:"approved",reviewed_at:new Date().toISOString(),reviewed_by_admin_id:a.id}).eq("id",n);if(p)throw p;C("Suggestion approved!"),L(R)}catch(p){i(`Failed to approve suggestion: ${p.message}`)}finally{m(null)}}},Ke=async(n,p,T)=>{if(a){m(n);try{const{error:D}=await W.from("package_suggestions").update({status:p,admin_notes:T,reviewed_at:new Date().toISOString(),reviewed_by_admin_id:a.id}).eq("id",n);if(D)throw D;C(`Suggestion status updated to ${p}.`),L(R),s(!1),j(null),_("")}catch(D){i(`Failed to update suggestion status: ${D.message}`)}finally{m(null)}}},Je=async n=>{if(!a)return;m(n.id),i(null),C(null);const T={id:crypto.randomUUID(),package_name:n.package_name,description:n.description||void 0,publication:n.publication_url||void 0,webserver:n.webserver_url||void 0,repo_link:n.repo_url||void 0,link:n.link_url||void 0,license:n.license||void 0,tags:n.tags||void 0,folder1:n.folder1||void 0,category1:n.category1||void 0};try{const{data:D,error:me}=await W.from("packages").insert(T).select().single();if(me)throw console.error("Error inserting into packages table:",me),me;if(D){const{error:ve}=await W.from("package_suggestions").update({status:"added",reviewed_at:new Date().toISOString(),reviewed_by_admin_id:a.id,admin_notes:n.admin_notes?`${n.admin_notes}; Added to DB.`:"Added to DB."}).eq("id",n.id);ve?(console.error("Error updating suggestion status to 'added':",ve),i(`Package added, but failed to update suggestion status: ${ve.message}`)):C(`Package "${n.package_name}" added to database and suggestion marked as 'Added'.`)}L(R)}catch(D){i(`Failed to add package directly: ${D.message}`)}finally{m(null)}},Ye=async(n,p)=>{if(window.confirm(`Are you sure you want to permanently delete the suggestion for "${p}"? This action cannot be undone.`)){m(n),i(null),C(null);try{const{error:T}=await W.from("package_suggestions").delete().eq("id",n);if(T)throw T;C(`Suggestion "${p}" deleted successfully.`),L(R)}catch(T){i(`Failed to delete suggestion: ${T.message}`)}finally{m(null)}}},Se=n=>{G(n),A(!0)},Ze=()=>{G(null),A(!1)},et=()=>{L(R),A(!1),G(null),C("Suggestion updated successfully.")},tt=n=>{j(n),_(n.admin_notes||""),s(!0)},we=()=>{j(null),s(!1),_("")},rt=(n,p)=>{Q(p),O(new Set),I(!1)},ze=()=>{if(X)O(new Set),I(!1);else{const n=new Set(c.map(p=>p.id));O(n),I(!0)}},nt=n=>{const p=new Set(v);p.has(n)?p.delete(n):p.add(n),O(p),I(p.size===c.length)},ot=async()=>{if(v.size!==0&&window.confirm(`Are you sure you want to approve ${v.size} selected suggestion(s)?`)){H(!0),i(null);try{const{error:n}=await W.from("package_suggestions").update({status:"approved",reviewed_at:new Date().toISOString(),reviewed_by_admin_id:a==null?void 0:a.id}).in("id",Array.from(v));if(n)throw n;C(`${v.size} suggestion(s) approved successfully!`),O(new Set),I(!1),L(R)}catch(n){i(`Failed to approve suggestions: ${n.message}`)}finally{H(!1)}}},at=async()=>{if(v.size===0)return;const n=window.prompt(`Please provide a reason for rejecting ${v.size} selected suggestion(s):`);if(n){H(!0),i(null);try{const{error:p}=await W.from("package_suggestions").update({status:"rejected",admin_notes:n,reviewed_at:new Date().toISOString(),reviewed_by_admin_id:a==null?void 0:a.id}).in("id",Array.from(v));if(p)throw p;C(`${v.size} suggestion(s) rejected successfully!`),O(new Set),I(!1),L(R)}catch(p){i(`Failed to reject suggestions: ${p.message}`)}finally{H(!1)}}},it=async()=>{if(v.size!==0&&window.confirm(`Are you sure you want to permanently delete ${v.size} selected suggestion(s)? This action cannot be undone.`)){H(!0),i(null);try{const{error:n}=await W.from("package_suggestions").delete().in("id",Array.from(v));if(n)throw n;C(`${v.size} suggestion(s) deleted successfully!`),O(new Set),I(!1),L(R)}catch(n){i(`Failed to delete suggestions: ${n.message}`)}finally{H(!1)}}},st=n=>{switch(n){case"pending":return"warning";case"approved":return"success";case"rejected":return"error";case"added":return"info";default:return"default"}};return o?e.jsx(B,{display:"flex",justifyContent:"center",alignItems:"center",height:"50vh",children:e.jsx(ge,{})}):r?e.jsxs(De,{maxWidth:"xl",sx:{mt:4,mb:4},children:[e.jsx(b,{variant:"h4",gutterBottom:!0,component:"h1",sx:{mb:2,color:n=>(n.palette.mode==="dark",n.palette.text.primary)},children:"Review Package Suggestions"}),e.jsx(er,{open:!!$,autoHideDuration:6e3,onClose:()=>C(null),message:$}),e.jsx(B,{sx:{borderBottom:1,borderColor:"divider",mb:2},children:e.jsxs(Lt,{value:R,onChange:rt,"aria-label":"suggestion status filter",children:[e.jsx(le,{label:"Pending",value:"pending"}),e.jsx(le,{label:"Approved",value:"approved"}),e.jsx(le,{label:"Rejected",value:"rejected"}),e.jsx(le,{label:"Added to DB",value:"added"})]})}),g&&e.jsx(B,{display:"flex",justifyContent:"center",py:3,children:e.jsx(ge,{})}),y&&e.jsx(Le,{severity:"error",sx:{mb:2},children:y}),!g&&!y&&c.length===0&&e.jsxs(b,{sx:{mt:2},children:["No ",R," suggestions found."]}),!g&&!y&&c.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs(B,{sx:{mb:2,display:"flex",alignItems:"center",gap:2,flexWrap:"wrap"},children:[e.jsx(bt,{control:e.jsx(je,{checked:X,indeterminate:v.size>0&&v.size<c.length,onChange:ze,disabled:P}),label:`Select All (${v.size}/${c.length})`}),v.size>0&&e.jsxs(It,{variant:"outlined",disabled:P,children:[R==="pending"&&e.jsxs(e.Fragment,{children:[e.jsxs(J,{color:"success",onClick:ot,startIcon:e.jsx(Me,{}),disabled:P,children:["Approve (",v.size,")"]}),e.jsxs(J,{color:"error",onClick:at,startIcon:e.jsx(Oe,{}),disabled:P,children:["Reject (",v.size,")"]})]}),e.jsxs(J,{color:"error",onClick:it,startIcon:e.jsx(We,{}),disabled:P,children:["Delete (",v.size,")"]})]}),P&&e.jsx(ge,{size:20})]}),e.jsx(gt,{component:Xe,elevation:2,children:e.jsxs(jt,{sx:{minWidth:800},"aria-label":"review suggestions table",children:[e.jsx(yt,{children:e.jsxs($e,{children:[e.jsx(k,{padding:"checkbox",children:e.jsx(je,{checked:X,indeterminate:v.size>0&&v.size<c.length,onChange:ze,disabled:P})}),e.jsx(k,{children:"Package Name"}),e.jsx(k,{children:"Suggested By"}),e.jsx(k,{children:"Submitted"}),e.jsx(k,{children:"Status"}),e.jsx(k,{align:"center",sx:{width:"50px"},children:e.jsx(M,{title:"Repository URL",children:e.jsx(ue,{fontSize:"small"})})}),e.jsx(k,{align:"center",sx:{width:"50px"},children:e.jsx(M,{title:"Publication URL",children:e.jsx(pe,{fontSize:"small"})})}),e.jsx(k,{align:"center",sx:{width:"50px"},children:e.jsx(M,{title:"Webserver URL",children:e.jsx(he,{fontSize:"small"})})}),e.jsx(k,{align:"center",sx:{width:"50px"},children:e.jsx(M,{title:"Other Link URL",children:e.jsx(fe,{fontSize:"small"})})}),e.jsx(k,{align:"right",sx:{minWidth:"180px"},children:"Actions"})]})}),e.jsx(Ct,{children:c.map(n=>e.jsxs($e,{hover:!0,sx:{opacity:h===n.id?.5:1},children:[e.jsx(k,{padding:"checkbox",children:e.jsx(je,{checked:v.has(n.id),onChange:()=>nt(n.id),disabled:P||h===n.id})}),e.jsx(k,{component:"th",scope:"row",children:e.jsx(M,{title:e.jsx(br,{suggestion:n}),placement:"right",componentsProps:{tooltip:{sx:{bgcolor:"background.paper",color:"text.primary",border:"1px solid",borderColor:"divider",boxShadow:3,"& .MuiTooltip-arrow":{color:"background.paper","&::before":{border:"1px solid",borderColor:"divider"}}}}},arrow:!0,children:e.jsx(b,{sx:{cursor:"pointer",fontWeight:500,color:"primary.main","&:hover":{textDecoration:"underline"}},onClick:()=>Se(n),children:n.package_name})})}),e.jsx(k,{children:n.suggester_email||"Anonymous/Error"}),e.jsx(k,{children:new Date(n.created_at).toLocaleDateString()}),e.jsx(k,{children:e.jsx(_t,{label:n.status,color:st(n.status),size:"small"})}),e.jsx(k,{align:"center",children:e.jsx(de,{url:n.repo_url,type:"repo"})}),e.jsx(k,{align:"center",children:e.jsx(de,{url:n.publication_url,type:"publication",isRequired:!n.webserver_url&&!n.repo_url&&!n.link_url})}),e.jsx(k,{align:"center",children:e.jsx(de,{url:n.webserver_url,type:"webserver"})}),e.jsx(k,{align:"center",children:e.jsx(de,{url:n.link_url,type:"link"})}),e.jsxs(k,{align:"right",children:[e.jsx(M,{title:"View/Edit Details",children:e.jsxs("span",{children:[" ",e.jsx(Y,{size:"small",onClick:()=>Se(n),disabled:h===n.id,children:e.jsx(Dt,{})})]})}),n.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx(M,{title:"Approve",children:e.jsx("span",{children:e.jsx(Y,{size:"small",color:"success",onClick:()=>xe(n.id),sx:{ml:.5},disabled:h===n.id,children:e.jsx(Me,{})})})}),e.jsx(M,{title:"Reject",children:e.jsx("span",{children:e.jsx(Y,{size:"small",color:"error",onClick:()=>tt(n),sx:{ml:.5},disabled:h===n.id,children:e.jsx(Oe,{})})})})]}),n.status==="approved"&&e.jsx(M,{title:"Add to Database Directly",children:e.jsx("span",{children:e.jsx(Y,{size:"small",color:"primary",onClick:()=>Je(n),sx:{ml:.5},disabled:h===n.id,children:e.jsx(dr,{})})})}),e.jsx(M,{title:"Delete Suggestion Permanently",children:e.jsx("span",{children:e.jsx(Y,{size:"small",color:"error",onClick:()=>Ye(n.id,n.package_name),sx:{ml:.5},disabled:h===n.id,children:e.jsx(We,{})})})})]})]},n.id))})]})})]}),F&&e.jsx(Rt,{open:K,onClose:Ze,suggestion:F,onSaveSuccess:et,isAdmin:!0}),e.jsxs(kt,{open:z,onClose:we,maxWidth:"sm",fullWidth:!0,children:[e.jsxs(St,{children:["Reject Suggestion: ",u==null?void 0:u.package_name]}),e.jsxs(wt,{children:[e.jsx(Tt,{sx:{mb:2},children:"Please provide a reason for rejecting this suggestion. This will be visible to the user if they can view their rejected suggestions."}),e.jsx(zt,{autoFocus:!0,margin:"dense",id:"admin_notes_reject",label:"Admin Notes (Reason for Rejection)",type:"text",fullWidth:!0,variant:"outlined",multiline:!0,rows:3,value:l,onChange:n=>_(n.target.value)})]}),e.jsxs(Et,{children:[e.jsx(J,{onClick:we,children:"Cancel"}),e.jsx(J,{onClick:()=>u&&Ke(u.id,"rejected",l),color:"error",disabled:!l.trim(),children:"Confirm Rejection"})]})]})]}):e.jsx(De,{maxWidth:"md",sx:{mt:4},children:e.jsx(Le,{severity:"error",children:"Access Denied. Admins only."})})};export{Rr as default};
