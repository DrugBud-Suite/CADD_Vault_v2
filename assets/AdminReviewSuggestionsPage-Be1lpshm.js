import{r as a,a2 as Ot,a3 as At,a4 as pe,a5 as Oe,j as r,a6 as Wt,b as g,a7 as Ze,g as Te,a as _e,d as Be,_ as ne,s as N,f as G,i as Me,R as gt,k as Ft,N as St,a8 as Ht,a9 as ke,h as he,B as Ct,c as yt,aa as Nt,ab as jt,ac as wt,e as Et,x as se,y as le,z as ae,D as ie,P as $t,Q as qt,t as ue,p as He,q as et,C as tt,A as rt,T as ot,K as Ut,ad as xe,I as ge,Z as Vt,G as nt}from"./index-DJGmrbOz.js";import{T as Xt,a as Kt,b as Yt,c as st,d as M,e as Qt,E as Gt,f as Jt}from"./EditSuggestionModal-DMesCuQu.js";import{D as Zt,a as er,b as tr,c as rr}from"./DialogTitle-Cn6Bmbi-.js";import{D as or}from"./DialogContentText-DBJWoSMY.js";import"./Grid-B0LgO5dT.js";let fe;function Rt(){if(fe)return fe;const e=document.createElement("div"),t=document.createElement("div");return t.style.width="10px",t.style.height="1px",e.appendChild(t),e.dir="rtl",e.style.fontSize="14px",e.style.width="4px",e.style.height="1px",e.style.position="absolute",e.style.top="-1000px",e.style.overflow="scroll",document.body.appendChild(e),fe="reverse",e.scrollLeft>0?fe="default":(e.scrollLeft=1,e.scrollLeft===0&&(fe="negative")),document.body.removeChild(e),fe}function nr(e,t){const o=e.scrollLeft;if(t!=="rtl")return o;switch(Rt()){case"negative":return e.scrollWidth-e.clientWidth+o;case"reverse":return e.scrollWidth-e.clientWidth-o;default:return o}}function lt(e){return e.substring(2).toLowerCase()}function sr(e,t){return t.documentElement.clientWidth<e.clientX||t.documentElement.clientHeight<e.clientY}function lr(e){const{children:t,disableReactTree:o=!1,mouseEvent:s="onClick",onClickAway:i,touchEvent:d="onTouchEnd"}=e,m=a.useRef(!1),b=a.useRef(null),u=a.useRef(!1),v=a.useRef(!1);a.useEffect(()=>(setTimeout(()=>{u.current=!0},0),()=>{u.current=!1}),[]);const y=Ot(At(t),b),f=pe(x=>{const C=v.current;v.current=!1;const E=Oe(b.current);if(!u.current||!b.current||"clientX"in x&&sr(x,E))return;if(m.current){m.current=!1;return}let p;x.composedPath?p=x.composedPath().indexOf(b.current)>-1:p=!E.documentElement.contains(x.target)||b.current.contains(x.target),!p&&(o||!C)&&i(x)}),R=x=>C=>{v.current=!0;const E=t.props[x];E&&E(C)},w={ref:y};return d!==!1&&(w[d]=R(d)),a.useEffect(()=>{if(d!==!1){const x=lt(d),C=Oe(b.current),E=()=>{m.current=!0};return C.addEventListener(x,f),C.addEventListener("touchmove",E),()=>{C.removeEventListener(x,f),C.removeEventListener("touchmove",E)}}},[f,d]),s!==!1&&(w[s]=R(s)),a.useEffect(()=>{if(s!==!1){const x=lt(s),C=Oe(b.current);return C.addEventListener(x,f),()=>{C.removeEventListener(x,f)}}},[f,s]),r.jsx(a.Fragment,{children:a.cloneElement(t,w)})}function ar(e={}){const{autoHideDuration:t=null,disableWindowBlurListener:o=!1,onClose:s,open:i,resumeHideDuration:d}=e,m=Wt();a.useEffect(()=>{if(!i)return;function p(h){h.defaultPrevented||(h.key==="Escape"||h.key==="Esc")&&(s==null||s(h,"escapeKeyDown"))}return document.addEventListener("keydown",p),()=>{document.removeEventListener("keydown",p)}},[i,s]);const b=pe((p,h)=>{s==null||s(p,h)}),u=pe(p=>{!s||p==null||m.start(p,()=>{b(null,"timeout")})});a.useEffect(()=>(i&&u(t),m.clear),[i,t,u,m]);const v=p=>{s==null||s(p,"clickaway")},y=m.clear,f=a.useCallback(()=>{t!=null&&u(d??t*.5)},[t,d,u]),R=p=>h=>{const k=p.onBlur;k==null||k(h),f()},w=p=>h=>{const k=p.onFocus;k==null||k(h),y()},x=p=>h=>{const k=p.onMouseEnter;k==null||k(h),y()},C=p=>h=>{const k=p.onMouseLeave;k==null||k(h),f()};return a.useEffect(()=>{if(!o&&i)return window.addEventListener("focus",f),window.addEventListener("blur",y),()=>{window.removeEventListener("focus",f),window.removeEventListener("blur",y)}},[o,i,f,y]),{getRootProps:(p={})=>{const h=g({},Ze(e),Ze(p));return g({role:"presentation"},p,h,{onBlur:R(h),onFocus:w(h),onMouseEnter:x(h),onMouseLeave:C(h)})},onClickAway:v}}function ir(e){return Te("MuiSnackbarContent",e)}_e("MuiSnackbarContent",["root","message","action"]);const cr=["action","className","message","role"],dr=e=>{const{classes:t}=e;return Me({root:["root"],action:["action"],message:["message"]},ir,t)},ur=N(gt,{name:"MuiSnackbarContent",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>{const t=e.palette.mode==="light"?.8:.98,o=Ft.emphasize(e.palette.background.default,t);return g({},e.typography.body2,{color:e.vars?e.vars.palette.SnackbarContent.color:e.palette.getContrastText(o),backgroundColor:e.vars?e.vars.palette.SnackbarContent.bg:o,display:"flex",alignItems:"center",flexWrap:"wrap",padding:"6px 16px",borderRadius:(e.vars||e).shape.borderRadius,flexGrow:1,[e.breakpoints.up("sm")]:{flexGrow:"initial",minWidth:288}})}),fr=N("div",{name:"MuiSnackbarContent",slot:"Message",overridesResolver:(e,t)=>t.message})({padding:"8px 0"}),pr=N("div",{name:"MuiSnackbarContent",slot:"Action",overridesResolver:(e,t)=>t.action})({display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:16,marginRight:-8}),hr=a.forwardRef(function(t,o){const s=Be({props:t,name:"MuiSnackbarContent"}),{action:i,className:d,message:m,role:b="alert"}=s,u=ne(s,cr),v=s,y=dr(v);return r.jsxs(ur,g({role:b,square:!0,elevation:6,className:G(y.root,d),ownerState:v,ref:o},u,{children:[r.jsx(fr,{className:y.message,ownerState:v,children:m}),i?r.jsx(pr,{className:y.action,ownerState:v,children:i}):null]}))});function br(e){return Te("MuiSnackbar",e)}_e("MuiSnackbar",["root","anchorOriginTopCenter","anchorOriginBottomCenter","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft"]);const vr=["onEnter","onExited"],mr=["action","anchorOrigin","autoHideDuration","children","className","ClickAwayListenerProps","ContentProps","disableWindowBlurListener","message","onBlur","onClose","onFocus","onMouseEnter","onMouseLeave","open","resumeHideDuration","TransitionComponent","transitionDuration","TransitionProps"],xr=e=>{const{classes:t,anchorOrigin:o}=e,s={root:["root",`anchorOrigin${he(o.vertical)}${he(o.horizontal)}`]};return Me(s,br,t)},at=N("div",{name:"MuiSnackbar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,t[`anchorOrigin${he(o.anchorOrigin.vertical)}${he(o.anchorOrigin.horizontal)}`]]}})(({theme:e,ownerState:t})=>{const o={left:"50%",right:"auto",transform:"translateX(-50%)"};return g({zIndex:(e.vars||e).zIndex.snackbar,position:"fixed",display:"flex",left:8,right:8,justifyContent:"center",alignItems:"center"},t.anchorOrigin.vertical==="top"?{top:8}:{bottom:8},t.anchorOrigin.horizontal==="left"&&{justifyContent:"flex-start"},t.anchorOrigin.horizontal==="right"&&{justifyContent:"flex-end"},{[e.breakpoints.up("sm")]:g({},t.anchorOrigin.vertical==="top"?{top:24}:{bottom:24},t.anchorOrigin.horizontal==="center"&&o,t.anchorOrigin.horizontal==="left"&&{left:24,right:"auto"},t.anchorOrigin.horizontal==="right"&&{right:24,left:"auto"})})}),gr=a.forwardRef(function(t,o){const s=Be({props:t,name:"MuiSnackbar"}),i=St(),d={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{action:m,anchorOrigin:{vertical:b,horizontal:u}={vertical:"bottom",horizontal:"left"},autoHideDuration:v=null,children:y,className:f,ClickAwayListenerProps:R,ContentProps:w,disableWindowBlurListener:x=!1,message:C,open:E,TransitionComponent:p=Ht,transitionDuration:h=d,TransitionProps:{onEnter:k,onExited:W}={}}=s,F=ne(s.TransitionProps,vr),$=ne(s,mr),z=g({},s,{anchorOrigin:{vertical:b,horizontal:u},autoHideDuration:v,disableWindowBlurListener:x,TransitionComponent:p,transitionDuration:h}),L=xr(z),{getRootProps:q,onClickAway:_}=ar(g({},z)),[re,ce]=a.useState(!0),A=ke({elementType:at,getSlotProps:q,externalForwardedProps:$,ownerState:z,additionalProps:{ref:o},className:[L.root,f]}),D=U=>{ce(!0),W&&W(U)},K=(U,J)=>{ce(!1),k&&k(U,J)};return!E&&re?null:r.jsx(lr,g({onClickAway:_},R,{children:r.jsx(at,g({},A,{children:r.jsx(p,g({appear:!0,in:E,timeout:h,direction:b==="top"?"down":"up",onEnter:K,onExited:D},F,{children:y||r.jsx(hr,g({message:C,action:m},w))}))}))}))});function Sr(e){return Te("MuiTab",e)}const te=_e("MuiTab",["root","labelIcon","textColorInherit","textColorPrimary","textColorSecondary","selected","disabled","fullWidth","wrapped","iconWrapper"]),Cr=["className","disabled","disableFocusRipple","fullWidth","icon","iconPosition","indicator","label","onChange","onClick","onFocus","selected","selectionFollowsFocus","textColor","value","wrapped"],yr=e=>{const{classes:t,textColor:o,fullWidth:s,wrapped:i,icon:d,label:m,selected:b,disabled:u}=e,v={root:["root",d&&m&&"labelIcon",`textColor${he(o)}`,s&&"fullWidth",i&&"wrapped",b&&"selected",u&&"disabled"],iconWrapper:["iconWrapper"]};return Me(v,Sr,t)},jr=N(Ct,{name:"MuiTab",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,o.label&&o.icon&&t.labelIcon,t[`textColor${he(o.textColor)}`],o.fullWidth&&t.fullWidth,o.wrapped&&t.wrapped,{[`& .${te.iconWrapper}`]:t.iconWrapper}]}})(({theme:e,ownerState:t})=>g({},e.typography.button,{maxWidth:360,minWidth:90,position:"relative",minHeight:48,flexShrink:0,padding:"12px 16px",overflow:"hidden",whiteSpace:"normal",textAlign:"center"},t.label&&{flexDirection:t.iconPosition==="top"||t.iconPosition==="bottom"?"column":"row"},{lineHeight:1.25},t.icon&&t.label&&{minHeight:72,paddingTop:9,paddingBottom:9,[`& > .${te.iconWrapper}`]:g({},t.iconPosition==="top"&&{marginBottom:6},t.iconPosition==="bottom"&&{marginTop:6},t.iconPosition==="start"&&{marginRight:e.spacing(1)},t.iconPosition==="end"&&{marginLeft:e.spacing(1)})},t.textColor==="inherit"&&{color:"inherit",opacity:.6,[`&.${te.selected}`]:{opacity:1},[`&.${te.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity}},t.textColor==="primary"&&{color:(e.vars||e).palette.text.secondary,[`&.${te.selected}`]:{color:(e.vars||e).palette.primary.main},[`&.${te.disabled}`]:{color:(e.vars||e).palette.text.disabled}},t.textColor==="secondary"&&{color:(e.vars||e).palette.text.secondary,[`&.${te.selected}`]:{color:(e.vars||e).palette.secondary.main},[`&.${te.disabled}`]:{color:(e.vars||e).palette.text.disabled}},t.fullWidth&&{flexShrink:1,flexGrow:1,flexBasis:0,maxWidth:"none"},t.wrapped&&{fontSize:e.typography.pxToRem(12)})),Pe=a.forwardRef(function(t,o){const s=Be({props:t,name:"MuiTab"}),{className:i,disabled:d=!1,disableFocusRipple:m=!1,fullWidth:b,icon:u,iconPosition:v="top",indicator:y,label:f,onChange:R,onClick:w,onFocus:x,selected:C,selectionFollowsFocus:E,textColor:p="inherit",value:h,wrapped:k=!1}=s,W=ne(s,Cr),F=g({},s,{disabled:d,disableFocusRipple:m,selected:C,icon:!!u,iconPosition:v,label:!!f,fullWidth:b,textColor:p,wrapped:k}),$=yr(F),z=u&&f&&a.isValidElement(u)?a.cloneElement(u,{className:G($.iconWrapper,u.props.className)}):u,L=_=>{!C&&R&&R(_,h),w&&w(_)},q=_=>{E&&!C&&R&&R(_,h),x&&x(_)};return r.jsxs(jr,g({focusRipple:!m,className:G($.root,i),ref:o,role:"tab","aria-selected":C,disabled:d,onClick:L,onFocus:q,ownerState:F,tabIndex:C?0:-1},W,{children:[v==="top"||v==="start"?r.jsxs(a.Fragment,{children:[z,f]}):r.jsxs(a.Fragment,{children:[f,z]}),y]}))}),wr=yt(r.jsx("path",{d:"M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"}),"KeyboardArrowLeft"),Er=yt(r.jsx("path",{d:"M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"}),"KeyboardArrowRight");function Rr(e){return(1+Math.sin(Math.PI*e-Math.PI/2))/2}function kr(e,t,o,s={},i=()=>{}){const{ease:d=Rr,duration:m=300}=s;let b=null;const u=t[e];let v=!1;const y=()=>{v=!0},f=R=>{if(v){i(new Error("Animation cancelled"));return}b===null&&(b=R);const w=Math.min(1,(R-b)/m);if(t[e]=d(w)*(o-u)+u,w>=1){requestAnimationFrame(()=>{i(null)});return}requestAnimationFrame(f)};return u===o?(i(new Error("Element already at target position")),y):(requestAnimationFrame(f),y)}const Tr=["onChange"],_r={width:99,height:99,position:"absolute",top:-9999,overflow:"scroll"};function Br(e){const{onChange:t}=e,o=ne(e,Tr),s=a.useRef(),i=a.useRef(null),d=()=>{s.current=i.current.offsetHeight-i.current.clientHeight};return Nt(()=>{const m=jt(()=>{const u=s.current;d(),u!==s.current&&t(s.current)}),b=wt(i.current);return b.addEventListener("resize",m),()=>{m.clear(),b.removeEventListener("resize",m)}},[t]),a.useEffect(()=>{d(),t(s.current)},[t]),r.jsx("div",g({style:_r},o,{ref:i}))}function Mr(e){return Te("MuiTabScrollButton",e)}const Ir=_e("MuiTabScrollButton",["root","vertical","horizontal","disabled"]),Lr=["className","slots","slotProps","direction","orientation","disabled"],Pr=e=>{const{classes:t,orientation:o,disabled:s}=e;return Me({root:["root",o,s&&"disabled"]},Mr,t)},zr=N(Ct,{name:"MuiTabScrollButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,o.orientation&&t[o.orientation]]}})(({ownerState:e})=>g({width:40,flexShrink:0,opacity:.8,[`&.${Ir.disabled}`]:{opacity:0}},e.orientation==="vertical"&&{width:"100%",height:40,"& svg":{transform:`rotate(${e.isRtl?-90:90}deg)`}})),Dr=a.forwardRef(function(t,o){var s,i;const d=Be({props:t,name:"MuiTabScrollButton"}),{className:m,slots:b={},slotProps:u={},direction:v}=d,y=ne(d,Lr),f=Et(),R=g({isRtl:f},d),w=Pr(R),x=(s=b.StartScrollButtonIcon)!=null?s:wr,C=(i=b.EndScrollButtonIcon)!=null?i:Er,E=ke({elementType:x,externalSlotProps:u.startScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:R}),p=ke({elementType:C,externalSlotProps:u.endScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:R});return r.jsx(zr,g({component:"div",className:G(w.root,m),ref:o,role:null,ownerState:R,tabIndex:null},y,{children:v==="left"?r.jsx(x,g({},E)):r.jsx(C,g({},p))}))});function Or(e){return Te("MuiTabs",e)}const Ne=_e("MuiTabs",["root","vertical","flexContainer","flexContainerVertical","centered","scroller","fixed","scrollableX","scrollableY","hideScrollbar","scrollButtons","scrollButtonsHideMobile","indicator"]),Ar=["aria-label","aria-labelledby","action","centered","children","className","component","allowScrollButtonsMobile","indicatorColor","onChange","orientation","ScrollButtonComponent","scrollButtons","selectionFollowsFocus","slots","slotProps","TabIndicatorProps","TabScrollButtonProps","textColor","value","variant","visibleScrollbar"],it=(e,t)=>e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:e.firstChild,ct=(e,t)=>e===t?e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:e.lastChild,ze=(e,t,o)=>{let s=!1,i=o(e,t);for(;i;){if(i===e.firstChild){if(s)return;s=!0}const d=i.disabled||i.getAttribute("aria-disabled")==="true";if(!i.hasAttribute("tabindex")||d)i=o(e,i);else{i.focus();return}}},Wr=e=>{const{vertical:t,fixed:o,hideScrollbar:s,scrollableX:i,scrollableY:d,centered:m,scrollButtonsHideMobile:b,classes:u}=e;return Me({root:["root",t&&"vertical"],scroller:["scroller",o&&"fixed",s&&"hideScrollbar",i&&"scrollableX",d&&"scrollableY"],flexContainer:["flexContainer",t&&"flexContainerVertical",m&&"centered"],indicator:["indicator"],scrollButtons:["scrollButtons",b&&"scrollButtonsHideMobile"],scrollableX:[i&&"scrollableX"],hideScrollbar:[s&&"hideScrollbar"]},Or,u)},Fr=N("div",{name:"MuiTabs",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[{[`& .${Ne.scrollButtons}`]:t.scrollButtons},{[`& .${Ne.scrollButtons}`]:o.scrollButtonsHideMobile&&t.scrollButtonsHideMobile},t.root,o.vertical&&t.vertical]}})(({ownerState:e,theme:t})=>g({overflow:"hidden",minHeight:48,WebkitOverflowScrolling:"touch",display:"flex"},e.vertical&&{flexDirection:"column"},e.scrollButtonsHideMobile&&{[`& .${Ne.scrollButtons}`]:{[t.breakpoints.down("sm")]:{display:"none"}}})),Hr=N("div",{name:"MuiTabs",slot:"Scroller",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.scroller,o.fixed&&t.fixed,o.hideScrollbar&&t.hideScrollbar,o.scrollableX&&t.scrollableX,o.scrollableY&&t.scrollableY]}})(({ownerState:e})=>g({position:"relative",display:"inline-block",flex:"1 1 auto",whiteSpace:"nowrap"},e.fixed&&{overflowX:"hidden",width:"100%"},e.hideScrollbar&&{scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}},e.scrollableX&&{overflowX:"auto",overflowY:"hidden"},e.scrollableY&&{overflowY:"auto",overflowX:"hidden"})),Nr=N("div",{name:"MuiTabs",slot:"FlexContainer",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.flexContainer,o.vertical&&t.flexContainerVertical,o.centered&&t.centered]}})(({ownerState:e})=>g({display:"flex"},e.vertical&&{flexDirection:"column"},e.centered&&{justifyContent:"center"})),$r=N("span",{name:"MuiTabs",slot:"Indicator",overridesResolver:(e,t)=>t.indicator})(({ownerState:e,theme:t})=>g({position:"absolute",height:2,bottom:0,width:"100%",transition:t.transitions.create()},e.indicatorColor==="primary"&&{backgroundColor:(t.vars||t).palette.primary.main},e.indicatorColor==="secondary"&&{backgroundColor:(t.vars||t).palette.secondary.main},e.vertical&&{height:"100%",width:2,right:0})),qr=N(Br)({overflowX:"auto",overflowY:"hidden",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}}),dt={},Ur=a.forwardRef(function(t,o){const s=Be({props:t,name:"MuiTabs"}),i=St(),d=Et(),{"aria-label":m,"aria-labelledby":b,action:u,centered:v=!1,children:y,className:f,component:R="div",allowScrollButtonsMobile:w=!1,indicatorColor:x="primary",onChange:C,orientation:E="horizontal",ScrollButtonComponent:p=Dr,scrollButtons:h="auto",selectionFollowsFocus:k,slots:W={},slotProps:F={},TabIndicatorProps:$={},TabScrollButtonProps:z={},textColor:L="primary",value:q,variant:_="standard",visibleScrollbar:re=!1}=s,ce=ne(s,Ar),A=_==="scrollable",D=E==="vertical",K=D?"scrollTop":"scrollLeft",U=D?"top":"left",J=D?"bottom":"right",be=D?"clientHeight":"clientWidth",Z=D?"height":"width",Y=g({},s,{component:R,allowScrollButtonsMobile:w,indicatorColor:x,orientation:E,vertical:D,scrollButtons:h,textColor:L,variant:_,visibleScrollbar:re,fixed:!A,hideScrollbar:A&&!re,scrollableX:A&&!D,scrollableY:A&&D,centered:v&&!A,scrollButtonsHideMobile:!w}),V=Wr(Y),n=ke({elementType:W.StartScrollButtonIcon,externalSlotProps:F.startScrollButtonIcon,ownerState:Y}),B=ke({elementType:W.EndScrollButtonIcon,externalSlotProps:F.endScrollButtonIcon,ownerState:Y}),[P,I]=a.useState(!1),[H,de]=a.useState(dt),[$e,kt]=a.useState(!1),[qe,Tt]=a.useState(!1),[Ue,_t]=a.useState(!1),[Ve,Bt]=a.useState({overflow:"hidden",scrollbarWidth:0}),Xe=new Map,Q=a.useRef(null),oe=a.useRef(null),Ke=()=>{const l=Q.current;let c;if(l){const S=l.getBoundingClientRect();c={clientWidth:l.clientWidth,scrollLeft:l.scrollLeft,scrollTop:l.scrollTop,scrollLeftNormalized:nr(l,d?"rtl":"ltr"),scrollWidth:l.scrollWidth,top:S.top,bottom:S.bottom,left:S.left,right:S.right}}let j;if(l&&q!==!1){const S=oe.current.children;if(S.length>0){const T=S[Xe.get(q)];j=T?T.getBoundingClientRect():null}}return{tabsMeta:c,tabMeta:j}},ve=pe(()=>{const{tabsMeta:l,tabMeta:c}=Ke();let j=0,S;if(D)S="top",c&&l&&(j=c.top-l.top+l.scrollTop);else if(S=d?"right":"left",c&&l){const O=d?l.scrollLeftNormalized+l.clientWidth-l.scrollWidth:l.scrollLeft;j=(d?-1:1)*(c[S]-l[S]+O)}const T={[S]:j,[Z]:c?c[Z]:0};if(isNaN(H[S])||isNaN(H[Z]))de(T);else{const O=Math.abs(H[S]-T[S]),X=Math.abs(H[Z]-T[Z]);(O>=1||X>=1)&&de(T)}}),Ae=(l,{animation:c=!0}={})=>{c?kr(K,Q.current,l,{duration:i.transitions.duration.standard}):Q.current[K]=l},Ye=l=>{let c=Q.current[K];D?c+=l:(c+=l*(d?-1:1),c*=d&&Rt()==="reverse"?-1:1),Ae(c)},Qe=()=>{const l=Q.current[be];let c=0;const j=Array.from(oe.current.children);for(let S=0;S<j.length;S+=1){const T=j[S];if(c+T[be]>l){S===0&&(c=l);break}c+=T[be]}return c},Mt=()=>{Ye(-1*Qe())},It=()=>{Ye(Qe())},Lt=a.useCallback(l=>{Bt({overflow:null,scrollbarWidth:l})},[]),Pt=()=>{const l={};l.scrollbarSizeListener=A?r.jsx(qr,{onChange:Lt,className:G(V.scrollableX,V.hideScrollbar)}):null;const j=A&&(h==="auto"&&($e||qe)||h===!0);return l.scrollButtonStart=j?r.jsx(p,g({slots:{StartScrollButtonIcon:W.StartScrollButtonIcon},slotProps:{startScrollButtonIcon:n},orientation:E,direction:d?"right":"left",onClick:Mt,disabled:!$e},z,{className:G(V.scrollButtons,z.className)})):null,l.scrollButtonEnd=j?r.jsx(p,g({slots:{EndScrollButtonIcon:W.EndScrollButtonIcon},slotProps:{endScrollButtonIcon:B},orientation:E,direction:d?"left":"right",onClick:It,disabled:!qe},z,{className:G(V.scrollButtons,z.className)})):null,l},Ge=pe(l=>{const{tabsMeta:c,tabMeta:j}=Ke();if(!(!j||!c)){if(j[U]<c[U]){const S=c[K]+(j[U]-c[U]);Ae(S,{animation:l})}else if(j[J]>c[J]){const S=c[K]+(j[J]-c[J]);Ae(S,{animation:l})}}}),Ie=pe(()=>{A&&h!==!1&&_t(!Ue)});a.useEffect(()=>{const l=jt(()=>{Q.current&&ve()});let c;const j=O=>{O.forEach(X=>{X.removedNodes.forEach(me=>{var ee;(ee=c)==null||ee.unobserve(me)}),X.addedNodes.forEach(me=>{var ee;(ee=c)==null||ee.observe(me)})}),l(),Ie()},S=wt(Q.current);S.addEventListener("resize",l);let T;return typeof ResizeObserver<"u"&&(c=new ResizeObserver(l),Array.from(oe.current.children).forEach(O=>{c.observe(O)})),typeof MutationObserver<"u"&&(T=new MutationObserver(j),T.observe(oe.current,{childList:!0})),()=>{var O,X;l.clear(),S.removeEventListener("resize",l),(O=T)==null||O.disconnect(),(X=c)==null||X.disconnect()}},[ve,Ie]),a.useEffect(()=>{const l=Array.from(oe.current.children),c=l.length;if(typeof IntersectionObserver<"u"&&c>0&&A&&h!==!1){const j=l[0],S=l[c-1],T={root:Q.current,threshold:.99},O=Fe=>{kt(!Fe[0].isIntersecting)},X=new IntersectionObserver(O,T);X.observe(j);const me=Fe=>{Tt(!Fe[0].isIntersecting)},ee=new IntersectionObserver(me,T);return ee.observe(S),()=>{X.disconnect(),ee.disconnect()}}},[A,h,Ue,y==null?void 0:y.length]),a.useEffect(()=>{I(!0)},[]),a.useEffect(()=>{ve()}),a.useEffect(()=>{Ge(dt!==H)},[Ge,H]),a.useImperativeHandle(u,()=>({updateIndicator:ve,updateScrollButtons:Ie}),[ve,Ie]);const Je=r.jsx($r,g({},$,{className:G(V.indicator,$.className),ownerState:Y,style:g({},H,$.style)}));let Le=0;const zt=a.Children.map(y,l=>{if(!a.isValidElement(l))return null;const c=l.props.value===void 0?Le:l.props.value;Xe.set(c,Le);const j=c===q;return Le+=1,a.cloneElement(l,g({fullWidth:_==="fullWidth",indicator:j&&!P&&Je,selected:j,selectionFollowsFocus:k,onChange:C,textColor:L,value:c},Le===1&&q===!1&&!l.props.tabIndex?{tabIndex:0}:{}))}),Dt=l=>{const c=oe.current,j=Oe(c).activeElement;if(j.getAttribute("role")!=="tab")return;let T=E==="horizontal"?"ArrowLeft":"ArrowUp",O=E==="horizontal"?"ArrowRight":"ArrowDown";switch(E==="horizontal"&&d&&(T="ArrowRight",O="ArrowLeft"),l.key){case T:l.preventDefault(),ze(c,j,ct);break;case O:l.preventDefault(),ze(c,j,it);break;case"Home":l.preventDefault(),ze(c,null,it);break;case"End":l.preventDefault(),ze(c,null,ct);break}},We=Pt();return r.jsxs(Fr,g({className:G(V.root,f),ownerState:Y,ref:o,as:R},ce,{children:[We.scrollButtonStart,We.scrollbarSizeListener,r.jsxs(Hr,{className:V.scroller,ownerState:Y,style:{overflow:Ve.overflow,[D?`margin${d?"Left":"Right"}`:"marginBottom"]:re?void 0:-Ve.scrollbarWidth},ref:Q,children:[r.jsx(Nr,{"aria-label":m,"aria-labelledby":b,"aria-orientation":E==="vertical"?"vertical":null,className:V.flexContainer,ownerState:Y,onKeyDown:Dt,ref:oe,role:"tablist",children:zt}),P&&Je]}),We.scrollButtonEnd]}))});var Se={},ut;function Vr(){if(ut)return Se;ut=1;var e=se();Object.defineProperty(Se,"__esModule",{value:!0}),Se.default=void 0;var t=e(le()),o=ae();return Se.default=(0,t.default)((0,o.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8z"}),"CheckCircle"),Se}var Xr=Vr();const Kr=ie(Xr);var Ce={},ft;function Yr(){if(ft)return Ce;ft=1;var e=se();Object.defineProperty(Ce,"__esModule",{value:!0}),Ce.default=void 0;var t=e(le()),o=ae();return Ce.default=(0,t.default)((0,o.jsx)("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2m5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12z"}),"Cancel"),Ce}var Qr=Yr();const pt=ie(Qr);var ye={},ht;function Gr(){if(ht)return ye;ht=1;var e=se();Object.defineProperty(ye,"__esModule",{value:!0}),ye.default=void 0;var t=e(le()),o=ae();return ye.default=(0,t.default)((0,o.jsx)("path",{d:"M11 18h2v-2h-2zm1-16C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8m0-14c-2.21 0-4 1.79-4 4h2c0-1.1.9-2 2-2s2 .9 2 2c0 2-3 1.75-3 5h2c0-2.25 3-2.5 3-5 0-2.21-1.79-4-4-4"}),"HelpOutline"),ye}var Jr=Gr();const Zr=ie(Jr);var je={},bt;function eo(){if(bt)return je;bt=1;var e=se();Object.defineProperty(je,"__esModule",{value:!0}),je.default=void 0;var t=e(le()),o=ae();return je.default=(0,t.default)((0,o.jsx)("path",{d:"M1 21h4V9H1zm22-11c0-1.1-.9-2-2-2h-6.31l.95-4.57.03-.32c0-.41-.17-.79-.44-1.06L14.17 1 7.59 7.59C7.22 7.95 7 8.45 7 9v10c0 1.1.9 2 2 2h9c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-.47.14-.73z"}),"ThumbUp"),je}var to=eo();const ro=ie(to);var we={},vt;function oo(){if(vt)return we;vt=1;var e=se();Object.defineProperty(we,"__esModule",{value:!0}),we.default=void 0;var t=e(le()),o=ae();return we.default=(0,t.default)((0,o.jsx)("path",{d:"M15 3H6c-.83 0-1.54.5-1.84 1.22l-3.02 7.05c-.09.23-.14.47-.14.73v2c0 1.1.9 2 2 2h6.31l-.95 4.57-.03.32c0 .41.17.79.44 1.06L9.83 23l6.59-6.59c.36-.36.58-.86.58-1.41V5c0-1.1-.9-2-2-2m4 0v12h4V3z"}),"ThumbDown"),we}var no=oo();const so=ie(no);var Ee={},mt;function lo(){if(mt)return Ee;mt=1;var e=se();Object.defineProperty(Ee,"__esModule",{value:!0}),Ee.default=void 0;var t=e(le()),o=ae();return Ee.default=(0,t.default)((0,o.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zm2.46-7.12 1.41-1.41L12 12.59l2.12-2.12 1.41 1.41L13.41 14l2.12 2.12-1.41 1.41L12 15.41l-2.12 2.12-1.41-1.41L10.59 14zM15.5 4l-1-1h-5l-1 1H5v2h14V4z"}),"DeleteForever"),Ee}var ao=lo();const io=ie(ao);var Re={},xt;function co(){if(xt)return Re;xt=1;var e=se();Object.defineProperty(Re,"__esModule",{value:!0}),Re.default=void 0;var t=e(le()),o=ae();return Re.default=(0,t.default)((0,o.jsx)("path",{d:"M21 3H3c-1.11 0-2 .89-2 2v12c0 1.1.89 2 2 2h5v2h8v-2h5c1.1 0 1.99-.9 1.99-2L23 5c0-1.11-.9-2-2-2m0 14H3V5h18zm-5-7v2h-3v3h-2v-3H8v-2h3V7h2v3z"}),"AddToQueue"),Re}var uo=co();const fo=ie(uo),po=e=>{if(!e)return!1;try{const t=new URL(e);return t.protocol==="http:"||t.protocol==="https:"}catch{return!1}},De=({url:e,isRequired:t=!1})=>!e&&!t?r.jsx(Zr,{color:"disabled",fontSize:"small"}):!e&&t?r.jsx(pt,{color:"error",fontSize:"small"}):po(e)?r.jsx(Kr,{color:"success",fontSize:"small"}):r.jsx(pt,{color:"error",fontSize:"small"}),go=()=>{const e=$t(),{isAdmin:t,loading:o,currentUser:s}=qt(),[i,d]=a.useState([]),[m,b]=a.useState(!0),[u,v]=a.useState(null),[y,f]=a.useState(null),[R,w]=a.useState(null),[x,C]=a.useState(null),[E,p]=a.useState(!1),[h,k]=a.useState(""),[W,F]=a.useState(null),[$,z]=a.useState(!1),[L,q]=a.useState("pending"),_=a.useCallback(async n=>{var B;b(!0),f(null);try{const{data:P,error:I}=await ue.rpc("get_suggestions_with_user_email",{filter_status:n});if(I){console.error("Supabase RPC fetch error:",I),I.code==="42804"&&((B=I.details)!=null&&B.includes("character varying(255)"))?f(`Database function error: Email column type mismatch. Ensure 'u.email::text' is used. Original: ${I.message}`):f(`Failed to load suggestions: ${I.message}`),d([]);return}d(P||[])}catch(P){console.error("Error fetching suggestions:",P.message),f(`Failed to load suggestions: ${P.message}`),d([])}finally{b(!1)}},[]);a.useEffect(()=>{!o&&!t?e("/"):t&&_(L)},[t,o,e,_,L]);const re=async n=>{if(s){v(n);try{const{error:B}=await ue.from("package_suggestions").update({status:"approved",reviewed_at:new Date().toISOString(),reviewed_by_admin_id:s.id}).eq("id",n);if(B)throw B;w("Suggestion approved!"),_(L)}catch(B){f(`Failed to approve suggestion: ${B.message}`)}finally{v(null)}}},ce=async(n,B,P)=>{if(s){v(n);try{const{error:I}=await ue.from("package_suggestions").update({status:B,admin_notes:P,reviewed_at:new Date().toISOString(),reviewed_by_admin_id:s.id}).eq("id",n);if(I)throw I;w(`Suggestion status updated to ${B}.`),_(L),p(!1),C(null),k("")}catch(I){f(`Failed to update suggestion status: ${I.message}`)}finally{v(null)}}},A=async n=>{if(!s)return;v(n.id),f(null),w(null);const P={id:crypto.randomUUID(),package_name:n.package_name,description:n.description||void 0,publication:n.publication_url||void 0,webserver:n.webserver_url||void 0,repo_link:n.repo_url||void 0,link:n.link_url||void 0,license:n.license||void 0,tags:n.tags||void 0,folder1:n.folder1||void 0,category1:n.category1||void 0};try{const{data:I,error:H}=await ue.from("packages").insert(P).select().single();if(H)throw console.error("Error inserting into packages table:",H),H;if(I){const{error:de}=await ue.from("package_suggestions").update({status:"added",reviewed_at:new Date().toISOString(),reviewed_by_admin_id:s.id,admin_notes:n.admin_notes?`${n.admin_notes}; Added to DB.`:"Added to DB."}).eq("id",n.id);de?(console.error("Error updating suggestion status to 'added':",de),f(`Package added, but failed to update suggestion status: ${de.message}`)):w(`Package "${n.package_name}" added to database and suggestion marked as 'Added'.`)}_(L)}catch(I){f(`Failed to add package directly: ${I.message}`)}finally{v(null)}},D=async(n,B)=>{if(window.confirm(`Are you sure you want to permanently delete the suggestion for "${B}"? This action cannot be undone.`)){v(n),f(null),w(null);try{const{error:P}=await ue.from("package_suggestions").delete().eq("id",n);if(P)throw P;w(`Suggestion "${B}" deleted successfully.`),_(L)}catch(P){f(`Failed to delete suggestion: ${P.message}`)}finally{v(null)}}},K=n=>{F(n),z(!0)},U=()=>{F(null),z(!1)},J=()=>{_(L),z(!1),F(null),w("Suggestion updated successfully.")},be=n=>{C(n),k(n.admin_notes||""),p(!0)},Z=()=>{C(null),p(!1),k("")},Y=(n,B)=>{q(B)},V=n=>{switch(n){case"pending":return"warning";case"approved":return"success";case"rejected":return"error";case"added":return"info";default:return"default"}};return o?r.jsx(He,{display:"flex",justifyContent:"center",alignItems:"center",height:"50vh",children:r.jsx(et,{})}):t?r.jsxs(tt,{maxWidth:"xl",sx:{mt:4,mb:4},children:[r.jsx(ot,{variant:"h4",gutterBottom:!0,component:"h1",sx:{mb:2,color:n=>(n.palette.mode==="dark",n.palette.text.primary)},children:"Review Package Suggestions"}),r.jsx(gr,{open:!!R,autoHideDuration:6e3,onClose:()=>w(null),message:R}),r.jsx(He,{sx:{borderBottom:1,borderColor:"divider",mb:2},children:r.jsxs(Ur,{value:L,onChange:Y,"aria-label":"suggestion status filter",children:[r.jsx(Pe,{label:"Pending",value:"pending"}),r.jsx(Pe,{label:"Approved",value:"approved"}),r.jsx(Pe,{label:"Rejected",value:"rejected"}),r.jsx(Pe,{label:"Added to DB",value:"added"})]})}),m&&r.jsx(He,{display:"flex",justifyContent:"center",py:3,children:r.jsx(et,{})}),y&&r.jsx(rt,{severity:"error",sx:{mb:2},children:y}),!m&&!y&&i.length===0&&r.jsxs(ot,{sx:{mt:2},children:["No ",L," suggestions found."]}),!m&&!y&&i.length>0&&r.jsx(Xt,{component:gt,elevation:2,children:r.jsxs(Kt,{sx:{minWidth:900},"aria-label":"review suggestions table",children:[r.jsx(Yt,{children:r.jsxs(st,{children:[r.jsx(M,{children:"Package Name"}),r.jsx(M,{children:"Suggested By"}),r.jsx(M,{children:"Submitted"}),r.jsx(M,{children:"Status"}),r.jsx(M,{children:"Repo URL"}),r.jsx(M,{children:"Publication URL"}),r.jsx(M,{children:"Webserver URL"}),r.jsx(M,{children:"Other Link"}),r.jsx(M,{align:"right",sx:{minWidth:"180px"},children:"Actions"})]})}),r.jsx(Qt,{children:i.map(n=>r.jsxs(st,{hover:!0,sx:{opacity:u===n.id?.5:1},children:[r.jsx(M,{component:"th",scope:"row",children:n.package_name}),r.jsx(M,{children:n.suggester_email||"Anonymous/Error"}),r.jsx(M,{children:new Date(n.created_at).toLocaleDateString()}),r.jsx(M,{children:r.jsx(Ut,{label:n.status,color:V(n.status),size:"small"})}),r.jsx(M,{children:r.jsx(De,{url:n.repo_url})}),r.jsx(M,{children:r.jsx(De,{url:n.publication_url,isRequired:!n.webserver_url&&!n.repo_url&&!n.link_url})}),r.jsx(M,{children:r.jsx(De,{url:n.webserver_url})}),r.jsx(M,{children:r.jsx(De,{url:n.link_url})}),r.jsxs(M,{align:"right",children:[r.jsx(xe,{title:"View/Edit Details",children:r.jsxs("span",{children:[" ",r.jsx(ge,{size:"small",onClick:()=>K(n),disabled:u===n.id,children:r.jsx(Gt,{})})]})}),n.status==="pending"&&r.jsxs(r.Fragment,{children:[r.jsx(xe,{title:"Approve",children:r.jsx("span",{children:r.jsx(ge,{size:"small",color:"success",onClick:()=>re(n.id),sx:{ml:.5},disabled:u===n.id,children:r.jsx(ro,{})})})}),r.jsx(xe,{title:"Reject",children:r.jsx("span",{children:r.jsx(ge,{size:"small",color:"error",onClick:()=>be(n),sx:{ml:.5},disabled:u===n.id,children:r.jsx(so,{})})})})]}),n.status==="approved"&&r.jsx(xe,{title:"Add to Database Directly",children:r.jsx("span",{children:r.jsx(ge,{size:"small",color:"primary",onClick:()=>A(n),sx:{ml:.5},disabled:u===n.id,children:r.jsx(fo,{})})})}),r.jsx(xe,{title:"Delete Suggestion Permanently",children:r.jsx("span",{children:r.jsx(ge,{size:"small",color:"error",onClick:()=>D(n.id,n.package_name),sx:{ml:.5},disabled:u===n.id,children:r.jsx(io,{})})})})]})]},n.id))})]})}),W&&r.jsx(Jt,{open:$,onClose:U,suggestion:W,onSaveSuccess:J,isAdmin:!0}),r.jsxs(Zt,{open:E,onClose:Z,maxWidth:"sm",fullWidth:!0,children:[r.jsxs(er,{children:["Reject Suggestion: ",x==null?void 0:x.package_name]}),r.jsxs(tr,{children:[r.jsx(or,{sx:{mb:2},children:"Please provide a reason for rejecting this suggestion. This will be visible to the user if they can view their rejected suggestions."}),r.jsx(Vt,{autoFocus:!0,margin:"dense",id:"admin_notes_reject",label:"Admin Notes (Reason for Rejection)",type:"text",fullWidth:!0,variant:"outlined",multiline:!0,rows:3,value:h,onChange:n=>k(n.target.value)})]}),r.jsxs(rr,{children:[r.jsx(nt,{onClick:Z,children:"Cancel"}),r.jsx(nt,{onClick:()=>x&&ce(x.id,"rejected",h),color:"error",disabled:!h.trim(),children:"Confirm Rejection"})]})]})]}):r.jsx(tt,{maxWidth:"md",sx:{mt:4},children:r.jsx(rt,{severity:"error",children:"Access Denied. Admins only."})})};export{go as default};
