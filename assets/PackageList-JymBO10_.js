import{r as p,w as R,j as e,aS as S,h as s,t as l,aT as P,Z as z,P as C,aC as L,T as b,Y as u,Q as T,R as I}from"./index-CwGLBZlN.js";import{R as W}from"./RatingInput-1b8khlwn.js";import{P as $,a as E}from"./PackageMetrics-Cunyp_nb.js";import{u as Y}from"./HomePage-r3n050Tu.js";import"./Delete-BjtmaXS0.js";import"./queryKeys-CrtVUg2v.js";import"./Language-xQ4BntdC.js";import"./getValidReactChildren-MSLbGqvN.js";const B=p.memo(({pkg:i})=>{const d=R(t=>t.addTag),[a,c]=p.useState(i),n=p.useRef(!0);p.useEffect(()=>{c(i)},[i]),p.useEffect(()=>()=>{n.current=!1},[]);const x=(t,r)=>{t.stopPropagation(),d(r)};return e.jsxs(S,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:2,py:1.5,px:2,borderRadius:2,border:0,overflow:"hidden",mb:1,background:t=>t.palette.mode==="dark"?"linear-gradient(135deg, rgba(30,30,30,0.8) 0%, rgba(23,23,23,0.8) 100%)":"linear-gradient(135deg, rgba(255,255,255,0.8) 0%, rgba(249,250,251,0.8) 100%)",backdropFilter:"blur(8px)",boxShadow:t=>t.shadows[1],transition:t=>t.transitions.create(["box-shadow","background","transform"],{duration:t.transitions.duration.short}),"&:hover":{background:t=>t.palette.mode==="dark"?"linear-gradient(135deg, rgba(30,30,30,0.95) 0%, rgba(23,23,23,0.95) 100%)":"linear-gradient(135deg, rgba(255,255,255,0.95) 0%, rgba(249,250,251,0.95) 100%)",boxShadow:t=>`0 0px 24px ${s(t.palette.primary.main,.3)}`,transform:"translateY(-2px)"},"&:last-child":{borderBottom:"none",mb:0}},component:"div",children:[e.jsxs(l,{sx:{flexGrow:1,display:"flex",flexDirection:"column",mr:2,overflow:"hidden"},children:[e.jsx(P,{primary:e.jsx(z,{component:C,to:`/package/${encodeURIComponent(a.id)}`,underline:"none",sx:{fontWeight:600,fontSize:"1.05rem",position:"relative",transition:"all 0.2s ease-in-out",color:t=>t.palette.mode==="dark"?t.palette.primary.light:t.palette.primary.dark,textDecoration:"none","&:hover":{color:"primary.main",transform:"translateY(-1px)",textDecoration:"none"},"&::after":{content:'""',position:"absolute",width:"100%",transform:"scaleX(0)",height:"1.5px",bottom:"-1px",left:0,backgroundColor:"primary.main",transformOrigin:"bottom left",transition:"transform 0.25s ease-out"},"&:hover::after":{transform:"scaleX(1)"}},children:a.package_name}),sx:{mt:.5,mb:.5}}),a.description&&e.jsx(L,{title:a.description,children:e.jsx(b,{variant:"body2",color:"text.secondary",sx:{mb:1.25,overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",lineHeight:1.5},children:a.description})}),a.tags&&a.tags.length>0&&e.jsx(u,{direction:"row",spacing:.5,sx:{flexWrap:"nowrap",overflowX:"auto",maxWidth:"100%",pb:.5,"&::-webkit-scrollbar":{height:"4px"},"&::-webkit-scrollbar-thumb":{backgroundColor:t=>s(t.palette.text.secondary,.5),borderRadius:"2px"}},children:a.tags.map(t=>e.jsx(T,{label:t,size:"small",sx:{height:"22px",borderRadius:4,bgcolor:r=>r.palette.mode==="dark"?s(r.palette.primary.main,.12):s(r.palette.primary.light,.12),color:r=>r.palette.mode==="dark"?r.palette.primary.light:r.palette.primary.main,fontWeight:500,fontSize:"0.7rem","&:hover":{bgcolor:r=>r.palette.mode==="dark"?s(r.palette.primary.main,.18):s(r.palette.primary.light,.18)},cursor:"pointer"},onClick:r=>x(r,t)},t))})]}),e.jsxs(u,{direction:"column",spacing:1,alignItems:"flex-end",sx:{flexShrink:0,pt:.5},children:[e.jsx(W,{packageId:a.id}),e.jsx($,{pkg:a,spacing:.5}),e.jsx(E,{pkg:a,variant:"list",spacing:1})]})]})});function D({items:i,renderItem:d,height:a="100%",width:c="100%",estimateSize:n,overscan:x=5,className:t,onScroll:r,getItemKey:m,EmptyComponent:g,LoadingComponent:f,isLoading:h=!1}){const{parentRef:k,virtualizer:j,virtualItems:y,totalSize:w}=Y({items:i,estimateSize:n,overscan:x,getItemKey:m?o=>m(i[o],o):void 0});return h&&f?e.jsx(f,{}):!h&&i.length===0&&g?e.jsx(g,{}):e.jsx(l,{ref:k,className:t,onScroll:r,sx:{height:a,width:c,overflow:"auto",contain:"strict"},children:e.jsx(l,{sx:{height:w,width:"100%",position:"relative"},children:y.map(o=>{const v=i[o.index];return e.jsx(l,{"data-index":o.index,ref:j.measureElement,sx:{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${o.start}px)`},children:d(v,o.index,{height:`${o.size}px`,width:"100%"})},o.key)})})})}const O=({packages:i,height:d="100%",onScroll:a})=>{if(i.length===0)return e.jsx(l,{sx:{textAlign:"center",mt:4},children:e.jsx(b,{variant:"h6",color:"text.secondary",children:"No packages found matching your criteria."})});const c=(n,x,t)=>e.jsx(l,{style:t,children:e.jsx(B,{pkg:n})},n.id);return e.jsx(D,{items:i,renderItem:c,height:d,width:"100%",estimateSize:()=>120,overscan:5,getItemKey:n=>n.id,onScroll:a})},M=I.memo(O);export{M as default};
