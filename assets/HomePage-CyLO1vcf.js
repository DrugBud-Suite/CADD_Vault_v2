const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/PackageCard-DV2KLwW8.js","assets/index-BUAb653Z.js","assets/index-B7rZpWz0.css","assets/RatingInput-256AohUC.js","assets/PackageMetrics-BeYw6raC.js","assets/CardContent-sbYg9MK6.js","assets/PackageList-D7kbY7vC.js"])))=>i.map(i=>d[i]);
import{r as h,g as Z,a as tt,_ as q,u as Bt,b as y,c as w,j as o,d as at,e as kt,s as D,f as X,h as O,i as et,B as xt,k as S,l as zt,m as Y,n as Q,o as it,C as Rt,p as V,q as lt,A as jt,T as st,F as Mt,S as _t,M as H,I as Tt,G as ct,t as dt,v as bt}from"./index-BUAb653Z.js";function Lt(t){return h.Children.toArray(t).filter(a=>h.isValidElement(a))}function It(t){return Z("MuiPagination",t)}tt("MuiPagination",["root","ul","outlined","text"]);const Nt=["boundaryCount","componentName","count","defaultPage","disabled","hideNextButton","hidePrevButton","onChange","page","showFirstButton","showLastButton","siblingCount"];function Ot(t={}){const{boundaryCount:a=1,componentName:e="usePagination",count:s=1,defaultPage:v=1,disabled:p=!1,hideNextButton:u=!1,hidePrevButton:c=!1,onChange:f,page:k,showFirstButton:m=!1,showLastButton:R=!1,siblingCount:z=1}=t,l=q(t,Nt),[g,M]=Bt({controlled:k,default:v,name:e,state:"page"}),b=(n,B)=>{k||M(B),f&&f(n,B)},P=(n,B)=>{const J=B-n+1;return Array.from({length:J},(rt,ot)=>n+ot)},L=P(1,Math.min(a,s)),$=P(Math.max(s-a+1,a+1),s),_=Math.max(Math.min(g-z,s-a-z*2-1),a+2),j=Math.min(Math.max(g+z,a+z*2+2),$.length>0?$[0]-2:s-1),T=[...m?["first"]:[],...c?[]:["previous"],...L,..._>a+2?["start-ellipsis"]:a+1<s-a?[a+1]:[],...P(_,j),...j<s-a-1?["end-ellipsis"]:s-a>a?[s-a]:[],...$,...u?[]:["next"],...R?["last"]:[]],C=n=>{switch(n){case"first":return 1;case"previous":return g-1;case"next":return g+1;case"last":return s;default:return null}},d=T.map(n=>typeof n=="number"?{onClick:B=>{b(B,n)},type:"page",page:n,selected:n===g,disabled:p,"aria-current":n===g?"true":void 0}:{onClick:B=>{b(B,C(n))},type:n,page:C(n),selected:!1,disabled:p||n.indexOf("ellipsis")===-1&&(n==="next"||n==="last"?g>=s:g<=1)});return y({items:d},l)}function wt(t){return Z("MuiPaginationItem",t)}const I=tt("MuiPaginationItem",["root","page","sizeSmall","sizeLarge","text","textPrimary","textSecondary","outlined","outlinedPrimary","outlinedSecondary","rounded","ellipsis","firstLast","previousNext","focusVisible","disabled","selected","icon","colorPrimary","colorSecondary"]),ut=w(o.jsx("path",{d:"M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"}),"FirstPage"),pt=w(o.jsx("path",{d:"M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"}),"LastPage"),gt=w(o.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"NavigateBefore"),vt=w(o.jsx("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"NavigateNext"),Ft=["className","color","component","components","disabled","page","selected","shape","size","slots","type","variant"],ht=(t,a)=>{const{ownerState:e}=t;return[a.root,a[e.variant],a[`size${O(e.size)}`],e.variant==="text"&&a[`text${O(e.color)}`],e.variant==="outlined"&&a[`outlined${O(e.color)}`],e.shape==="rounded"&&a.rounded,e.type==="page"&&a.page,(e.type==="start-ellipsis"||e.type==="end-ellipsis")&&a.ellipsis,(e.type==="previous"||e.type==="next")&&a.previousNext,(e.type==="first"||e.type==="last")&&a.firstLast]},Wt=t=>{const{classes:a,color:e,disabled:s,selected:v,size:p,shape:u,type:c,variant:f}=t,k={root:["root",`size${O(p)}`,f,u,e!=="standard"&&`color${O(e)}`,e!=="standard"&&`${f}${O(e)}`,s&&"disabled",v&&"selected",{page:"page",first:"firstLast",last:"firstLast","start-ellipsis":"ellipsis","end-ellipsis":"ellipsis",previous:"previousNext",next:"previousNext"}[c]],icon:["icon"]};return et(k,wt,a)},At=D("div",{name:"MuiPaginationItem",slot:"Root",overridesResolver:ht})(({theme:t,ownerState:a})=>y({},t.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,padding:"0 6px",margin:"0 3px",color:(t.vars||t).palette.text.primary,height:"auto",[`&.${I.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity}},a.size==="small"&&{minWidth:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},a.size==="large"&&{minWidth:40,borderRadius:40/2,padding:"0 10px",fontSize:t.typography.pxToRem(15)})),Vt=D(xt,{name:"MuiPaginationItem",slot:"Root",overridesResolver:ht})(({theme:t,ownerState:a})=>y({},t.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,height:32,padding:"0 6px",margin:"0 3px",color:(t.vars||t).palette.text.primary,[`&.${I.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${I.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity},transition:t.transitions.create(["color","background-color"],{duration:t.transitions.duration.short}),"&:hover":{backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${I.selected}`]:{backgroundColor:(t.vars||t).palette.action.selected,"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.selectedChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:S.alpha(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(t.vars||t).palette.action.selected}},[`&.${I.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.action.selectedChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:S.alpha(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)},[`&.${I.disabled}`]:{opacity:1,color:(t.vars||t).palette.action.disabled,backgroundColor:(t.vars||t).palette.action.selected}}},a.size==="small"&&{minWidth:26,height:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},a.size==="large"&&{minWidth:40,height:40,borderRadius:40/2,padding:"0 10px",fontSize:t.typography.pxToRem(15)},a.shape==="rounded"&&{borderRadius:(t.vars||t).shape.borderRadius}),({theme:t,ownerState:a})=>y({},a.variant==="text"&&{[`&.${I.selected}`]:y({},a.color!=="standard"&&{color:(t.vars||t).palette[a.color].contrastText,backgroundColor:(t.vars||t).palette[a.color].main,"&:hover":{backgroundColor:(t.vars||t).palette[a.color].dark,"@media (hover: none)":{backgroundColor:(t.vars||t).palette[a.color].main}},[`&.${I.focusVisible}`]:{backgroundColor:(t.vars||t).palette[a.color].dark}},{[`&.${I.disabled}`]:{color:(t.vars||t).palette.action.disabled}})},a.variant==="outlined"&&{border:t.vars?`1px solid rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${I.selected}`]:y({},a.color!=="standard"&&{color:(t.vars||t).palette[a.color].main,border:`1px solid ${t.vars?`rgba(${t.vars.palette[a.color].mainChannel} / 0.5)`:S.alpha(t.palette[a.color].main,.5)}`,backgroundColor:t.vars?`rgba(${t.vars.palette[a.color].mainChannel} / ${t.vars.palette.action.activatedOpacity})`:S.alpha(t.palette[a.color].main,t.palette.action.activatedOpacity),"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette[a.color].mainChannel} / calc(${t.vars.palette.action.activatedOpacity} + ${t.vars.palette.action.focusOpacity}))`:S.alpha(t.palette[a.color].main,t.palette.action.activatedOpacity+t.palette.action.focusOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${I.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette[a.color].mainChannel} / calc(${t.vars.palette.action.activatedOpacity} + ${t.vars.palette.action.focusOpacity}))`:S.alpha(t.palette[a.color].main,t.palette.action.activatedOpacity+t.palette.action.focusOpacity)}},{[`&.${I.disabled}`]:{borderColor:(t.vars||t).palette.action.disabledBackground,color:(t.vars||t).palette.action.disabled}})})),Dt=D("div",{name:"MuiPaginationItem",slot:"Icon",overridesResolver:(t,a)=>a.icon})(({theme:t,ownerState:a})=>y({fontSize:t.typography.pxToRem(20),margin:"0 -8px"},a.size==="small"&&{fontSize:t.typography.pxToRem(18)},a.size==="large"&&{fontSize:t.typography.pxToRem(22)})),Gt=h.forwardRef(function(a,e){const s=at({props:a,name:"MuiPaginationItem"}),{className:v,color:p="standard",component:u,components:c={},disabled:f=!1,page:k,selected:m=!1,shape:R="circular",size:z="medium",slots:l={},type:g="page",variant:M="text"}=s,b=q(s,Ft),P=y({},s,{color:p,disabled:f,selected:m,shape:R,size:z,type:g,variant:M}),L=kt(),$=Wt(P),j=(L?{previous:l.next||c.next||vt,next:l.previous||c.previous||gt,last:l.first||c.first||ut,first:l.last||c.last||pt}:{previous:l.previous||c.previous||gt,next:l.next||c.next||vt,first:l.first||c.first||ut,last:l.last||c.last||pt})[g];return g==="start-ellipsis"||g==="end-ellipsis"?o.jsx(At,{ref:e,ownerState:P,className:X($.root,v),children:"â€¦"}):o.jsxs(Vt,y({ref:e,ownerState:P,component:u,disabled:f,className:X($.root,v)},b,{children:[g==="page"&&k,j?o.jsx(Dt,{as:j,ownerState:P,className:$.icon}):null]}))}),Et=["boundaryCount","className","color","count","defaultPage","disabled","getItemAriaLabel","hideNextButton","hidePrevButton","onChange","page","renderItem","shape","showFirstButton","showLastButton","siblingCount","size","variant"],St=t=>{const{classes:a,variant:e}=t;return et({root:["root",e],ul:["ul"]},It,a)},Ht=D("nav",{name:"MuiPagination",slot:"Root",overridesResolver:(t,a)=>{const{ownerState:e}=t;return[a.root,a[e.variant]]}})({}),Ut=D("ul",{name:"MuiPagination",slot:"Ul",overridesResolver:(t,a)=>a.ul})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"});function qt(t,a,e){return t==="page"?`${e?"":"Go to "}page ${a}`:`Go to ${t} page`}const Jt=h.forwardRef(function(a,e){const s=at({props:a,name:"MuiPagination"}),{boundaryCount:v=1,className:p,color:u="standard",count:c=1,defaultPage:f=1,disabled:k=!1,getItemAriaLabel:m=qt,hideNextButton:R=!1,hidePrevButton:z=!1,renderItem:l=d=>o.jsx(Gt,y({},d)),shape:g="circular",showFirstButton:M=!1,showLastButton:b=!1,siblingCount:P=1,size:L="medium",variant:$="text"}=s,_=q(s,Et),{items:j}=Ot(y({},s,{componentName:"Pagination"})),T=y({},s,{boundaryCount:v,color:u,count:c,defaultPage:f,disabled:k,getItemAriaLabel:m,hideNextButton:R,hidePrevButton:z,renderItem:l,shape:g,showFirstButton:M,showLastButton:b,siblingCount:P,size:L,variant:$}),C=St(T);return o.jsx(Ht,y({"aria-label":"pagination navigation",className:X(C.root,p),ownerState:T,ref:e},_,{children:o.jsx(Ut,{className:C.ul,ownerState:T,children:j.map((d,n)=>o.jsx("li",{children:l(y({},d,{color:u,"aria-label":m(d.type,d.page,d.selected),shape:g,size:L,variant:$}))},n))})}))});function Kt(t){return Z("MuiToggleButton",t)}const U=tt("MuiToggleButton",["root","disabled","selected","standard","primary","secondary","sizeSmall","sizeMedium","sizeLarge","fullWidth"]),yt=h.createContext({}),mt=h.createContext(void 0);function Qt(t,a){return a===void 0||t===void 0?!1:Array.isArray(a)?a.indexOf(t)>=0:t===a}const Xt=["value"],Yt=["children","className","color","disabled","disableFocusRipple","fullWidth","onChange","onClick","selected","size","value"],Zt=t=>{const{classes:a,fullWidth:e,selected:s,disabled:v,size:p,color:u}=t,c={root:["root",s&&"selected",v&&"disabled",e&&"fullWidth",`size${O(p)}`,u]};return et(c,Kt,a)},ta=D(xt,{name:"MuiToggleButton",slot:"Root",overridesResolver:(t,a)=>{const{ownerState:e}=t;return[a.root,a[`size${O(e.size)}`]]}})(({theme:t,ownerState:a})=>{let e=a.color==="standard"?t.palette.text.primary:t.palette[a.color].main,s;return t.vars&&(e=a.color==="standard"?t.vars.palette.text.primary:t.vars.palette[a.color].main,s=a.color==="standard"?t.vars.palette.text.primaryChannel:t.vars.palette[a.color].mainChannel),y({},t.typography.button,{borderRadius:(t.vars||t).shape.borderRadius,padding:11,border:`1px solid ${(t.vars||t).palette.divider}`,color:(t.vars||t).palette.action.active},a.fullWidth&&{width:"100%"},{[`&.${U.disabled}`]:{color:(t.vars||t).palette.action.disabled,border:`1px solid ${(t.vars||t).palette.action.disabledBackground}`},"&:hover":{textDecoration:"none",backgroundColor:t.vars?`rgba(${t.vars.palette.text.primaryChannel} / ${t.vars.palette.action.hoverOpacity})`:Y(t.palette.text.primary,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${U.selected}`]:{color:e,backgroundColor:t.vars?`rgba(${s} / ${t.vars.palette.action.selectedOpacity})`:Y(e,t.palette.action.selectedOpacity),"&:hover":{backgroundColor:t.vars?`rgba(${s} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:Y(e,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?`rgba(${s} / ${t.vars.palette.action.selectedOpacity})`:Y(e,t.palette.action.selectedOpacity)}}}},a.size==="small"&&{padding:7,fontSize:t.typography.pxToRem(13)},a.size==="large"&&{padding:15,fontSize:t.typography.pxToRem(15)})}),ft=h.forwardRef(function(a,e){const s=h.useContext(yt),{value:v}=s,p=q(s,Xt),u=h.useContext(mt),c=zt(y({},p,{selected:Qt(a.value,v)}),a),f=at({props:c,name:"MuiToggleButton"}),{children:k,className:m,color:R="standard",disabled:z=!1,disableFocusRipple:l=!1,fullWidth:g=!1,onChange:M,onClick:b,selected:P,size:L="medium",value:$}=f,_=q(f,Yt),j=y({},f,{color:R,disabled:z,disableFocusRipple:l,fullWidth:g,size:L}),T=Zt(j),C=n=>{b&&(b(n,$),n.defaultPrevented)||M&&M(n,$)},d=u||"";return o.jsx(ta,y({className:X(p.className,T.root,m,d),disabled:z,focusRipple:!l,ref:e,onClick:C,onChange:M,value:$,ownerState:j,"aria-pressed":P},_,{children:k}))});function aa(t){return Z("MuiToggleButtonGroup",t)}const x=tt("MuiToggleButtonGroup",["root","selected","horizontal","vertical","disabled","grouped","groupedHorizontal","groupedVertical","fullWidth","firstButton","lastButton","middleButton"]),ea=["children","className","color","disabled","exclusive","fullWidth","onChange","orientation","size","value"],oa=t=>{const{classes:a,orientation:e,fullWidth:s,disabled:v}=t,p={root:["root",e==="vertical"&&"vertical",s&&"fullWidth"],grouped:["grouped",`grouped${O(e)}`,v&&"disabled"],firstButton:["firstButton"],lastButton:["lastButton"],middleButton:["middleButton"]};return et(p,aa,a)},sa=D("div",{name:"MuiToggleButtonGroup",slot:"Root",overridesResolver:(t,a)=>{const{ownerState:e}=t;return[{[`& .${x.grouped}`]:a.grouped},{[`& .${x.grouped}`]:a[`grouped${O(e.orientation)}`]},{[`& .${x.firstButton}`]:a.firstButton},{[`& .${x.lastButton}`]:a.lastButton},{[`& .${x.middleButton}`]:a.middleButton},a.root,e.orientation==="vertical"&&a.vertical,e.fullWidth&&a.fullWidth]}})(({ownerState:t,theme:a})=>y({display:"inline-flex",borderRadius:(a.vars||a).shape.borderRadius},t.orientation==="vertical"&&{flexDirection:"column"},t.fullWidth&&{width:"100%"},{[`& .${x.grouped}`]:y({},t.orientation==="horizontal"?{[`&.${x.selected} + .${x.grouped}.${x.selected}`]:{borderLeft:0,marginLeft:0}}:{[`&.${x.selected} + .${x.grouped}.${x.selected}`]:{borderTop:0,marginTop:0}})},t.orientation==="horizontal"?{[`& .${x.firstButton},& .${x.middleButton}`]:{borderTopRightRadius:0,borderBottomRightRadius:0},[`& .${x.lastButton},& .${x.middleButton}`]:{marginLeft:-1,borderLeft:"1px solid transparent",borderTopLeftRadius:0,borderBottomLeftRadius:0}}:{[`& .${x.firstButton},& .${x.middleButton}`]:{borderBottomLeftRadius:0,borderBottomRightRadius:0},[`& .${x.lastButton},& .${x.middleButton}`]:{marginTop:-1,borderTop:"1px solid transparent",borderTopLeftRadius:0,borderTopRightRadius:0}},t.orientation==="horizontal"?{[`& .${x.lastButton}.${U.disabled},& .${x.middleButton}.${U.disabled}`]:{borderLeft:"1px solid transparent"}}:{[`& .${x.lastButton}.${U.disabled},& .${x.middleButton}.${U.disabled}`]:{borderTop:"1px solid transparent"}})),ra=h.forwardRef(function(a,e){const s=at({props:a,name:"MuiToggleButtonGroup"}),{children:v,className:p,color:u="standard",disabled:c=!1,exclusive:f=!1,fullWidth:k=!1,onChange:m,orientation:R="horizontal",size:z="medium",value:l}=s,g=q(s,ea),M=y({},s,{disabled:c,fullWidth:k,orientation:R,size:z}),b=oa(M),P=h.useCallback((C,d)=>{if(!m)return;const n=l&&l.indexOf(d);let B;l&&n>=0?(B=l.slice(),B.splice(n,1)):B=l?l.concat(d):[d],m(C,B)},[m,l]),L=h.useCallback((C,d)=>{m&&m(C,l===d?null:d)},[m,l]),$=h.useMemo(()=>({className:b.grouped,onChange:f?L:P,value:l,size:z,fullWidth:k,color:u,disabled:c}),[b.grouped,f,L,P,l,z,k,u,c]),_=Lt(v),j=_.length,T=C=>{const d=C===0,n=C===j-1;return d&&n?"":d?b.firstButton:n?b.lastButton:b.middleButton};return o.jsx(sa,y({role:"group",className:X(b.root,p),ref:e,ownerState:M},g,{children:o.jsx(yt.Provider,{value:$,children:_.map((C,d)=>o.jsx(mt.Provider,{value:T(d),children:C},d))})}))}),na=w(o.jsx("path",{d:"m20 12-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8z"}),"ArrowDownward"),ia=w(o.jsx("path",{d:"m4 12 1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8z"}),"ArrowUpward"),la=w(o.jsx("path",{d:"M3 14h4v-4H3zm0 5h4v-4H3zM3 9h4V5H3zm5 5h13v-4H8zm0 5h13v-4H8zM8 5v4h13V5z"}),"ViewList"),ca=w(o.jsx("path",{d:"M14.67 5v6.5H9.33V5zm1 6.5H21V5h-5.33zm-1 7.5v-6.5H9.33V19zm1-6.5V19H21v-6.5zm-7.34 0H3V19h5.33zm0-1V5H3v6.5z"}),"ViewModule"),da=h.lazy(()=>bt(()=>import("./PackageCard-DV2KLwW8.js"),__vite__mapDeps([0,1,2,3,4,5]))),ua=h.lazy(()=>bt(()=>import("./PackageList-D7kbY7vC.js"),__vite__mapDeps([6,1,2,3,4])));async function pa(t,a,e=1e3){let s=[],v=0,p=!0;for(;p;){const{data:u,error:c,count:f}=await t.select(a,{count:"exact"}).range(v,v+e-1);if(c)throw console.error("Error fetching paginated data:",c.message),c;u&&u.length>0?(s=s.concat(u),v+=u.length):p=!1,f!==null&&v>=f&&(p=!1),u&&u.length<e&&(p=!1)}return s}const va=()=>{const{searchTerm:t,selectedTags:a,minStars:e,hasGithub:s,hasWebserver:v,hasPublication:p,minCitations:u,folder1:c,category1:f,selectedLicenses:k,sortBy:m,sortDirection:R,viewMode:z,currentPage:l,totalFilteredCount:g}=Q(it(i=>({searchTerm:i.searchTerm,selectedTags:i.selectedTags,minStars:i.minStars,hasGithub:i.hasGithub,hasWebserver:i.hasWebserver,hasPublication:i.hasPublication,minCitations:i.minCitations,folder1:i.folder1,category1:i.category1,selectedLicenses:i.selectedLicenses,sortBy:i.sortBy,sortDirection:i.sortDirection,viewMode:i.viewMode,currentPage:i.currentPage,totalFilteredCount:i.totalFilteredCount}))),{setSort:M,setDisplayedPackages:b,setTotalFilteredCount:P,setViewMode:L,setCurrentPage:$,setOriginalPackagesAndDeriveMetadata:_}=Q(it(i=>({setSort:i.setSort,setDisplayedPackages:i.setDisplayedPackages,setTotalFilteredCount:i.setTotalFilteredCount,setViewMode:i.setViewMode,setCurrentPage:i.setCurrentPage,setOriginalPackagesAndDeriveMetadata:i.setOriginalPackagesAndDeriveMetadata}))),[j,T]=h.useState([]),[C,d]=h.useState(!0),[n,B]=h.useState(""),J=24;h.useEffect(()=>{(async()=>{B(""),d(!0);try{const G=await pa(dt.from("packages"),"id, package_name, description, tags, license, github_stars, citations, repo_link, webserver, publication, folder1, category1, last_commit, average_rating, ratings_count, github_owner, github_repo, jif, journal, last_commit_ago, link, page_icon, primary_language, ratings_sum");G?_(G):(_([]),B("No packages found for metadata."))}catch(F){console.error("Error in fetchGlobalDataAndSetMetadata:",F.message),B("An unexpected error occurred while loading filter options."),_([])}finally{d(!1)}})();const N=F=>{const G=F,{packageId:r,newAverageRating:W,newRatingsCount:E}=G.detail;console.log(`HomePage received rating update for package ${r}: ${W} (${E} ratings)`),T(A=>A.map(K=>K.id===r?{...K,average_rating:W,ratings_count:E}:K)),b(Q.getState().displayedPackages.map(A=>A.id===r?{...A,average_rating:W,ratings_count:E}:A))};return document.addEventListener("package-rating-updated",N),()=>{document.removeEventListener("package-rating-updated",N)}},[_]),h.useEffect(()=>{(async()=>{Q.getState().allAvailableFolders.length===0&&Q.getState().originalPackages.length,d(!0),B("");const F=(l-1)*J,G=F+J-1;try{let r=dt.from("packages").select("*, average_rating, ratings_count",{count:"exact"});if(t&&(r=r.or(`package_name.ilike.%${t}%,description.ilike.%${t}%`)),a.length>0){const K=JSON.stringify(a);r=r.contains("tags",K)}e!==null&&e>0&&(r=r.gte("github_stars",e)),s&&(r=r.not("repo_link","is",null)),v&&(r=r.not("webserver","is",null)),p&&(r=r.not("publication","is",null)),u!==null&&u>0&&(r=r.gte("citations",u)),c&&(r=r.eq("folder1",c)),f&&(r=r.eq("category1",f)),k.length>0&&(r=r.in("license",k)),m&&R?r=r.order(m,{ascending:R==="asc",nullsFirst:!1}):r=r.order("package_name",{ascending:!0,nullsFirst:!1}),r=r.range(F,G);const{data:W,error:E,count:A}=await r;if(E)throw E;W?(T(W),b(W)):(T([]),b([])),P(A??0)}catch(r){B(`Failed to fetch packages: ${(r==null?void 0:r.message)||"Unknown error"}`),console.error("Error fetching packages from Supabase:",r),T([]),b([]),P(0)}finally{d(!1)}})()},[l,t,a,e,s,v,p,u,c,f,k,m,R,b,P]);const rt=(i,N)=>{$(N),window.scrollTo(0,0)},ot=i=>{const N=i.target.value;$(1),M(N===""?null:N,R)},Ct=()=>{$(1),M(m,R==="asc"?"desc":"asc")},$t=(i,N)=>{N!==null&&L(N)},Pt=o.jsx(V,{display:"flex",justifyContent:"center",py:4,children:o.jsx(lt,{})}),nt=Math.ceil(g/J);return o.jsxs(Rt,{maxWidth:"lg",sx:{pt:2,px:{xs:1,sm:2},pb:0},children:[C&&o.jsx(V,{display:"flex",justifyContent:"center",py:4,children:o.jsx(lt,{})}),n&&!C&&o.jsx(V,{py:4,children:o.jsx(jt,{severity:"error",children:n})}),o.jsxs(V,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,flexWrap:"wrap",gap:1},children:[o.jsxs(st,{variant:"h4",component:"h1",sx:{mb:{xs:1,sm:0},color:"text.primary",fontWeight:500,letterSpacing:"-0.01em"},children:[g," Entries Found"]}),o.jsxs(V,{sx:{display:"flex",alignItems:"center",gap:1,flexWrap:"wrap"},children:[o.jsx(st,{variant:"body2",sx:{mr:1,minWidth:55,color:"text.secondary"},children:"Sort by:"}),o.jsx(Mt,{size:"small",variant:"outlined",sx:{minWidth:150},children:o.jsxs(_t,{id:"sort-by-select",name:"sortBy",value:m??"",displayEmpty:!0,onChange:ot,MenuProps:{PaperProps:{sx:{mt:1,borderRadius:2,minWidth:180}}},children:[o.jsx(H,{value:"package_name",children:"Name"}),o.jsx(H,{value:"average_rating",children:"Rating"}),o.jsx(H,{value:"ratings_count",children:"Number of Ratings"}),o.jsx(H,{value:"github_stars",children:"GitHub Stars"}),o.jsx(H,{value:"citations",children:"Citations"}),o.jsx(H,{value:"last_commit",children:"Last Commit"})]})}),o.jsx(Tt,{onClick:Ct,size:"small","aria-label":"toggle sort direction",sx:{border:"1px solid",borderColor:"divider",ml:1,background:i=>i.palette.mode==="dark"?"rgba(255,255,255,0.08)":"rgba(0,0,0,0.04)","&:hover":{background:i=>i.palette.action.hover}},children:R==="asc"?o.jsx(ia,{fontSize:"small"}):o.jsx(na,{fontSize:"small"})}),o.jsxs(ra,{value:z,exclusive:!0,onChange:$t,"aria-label":"view mode",size:"small",sx:{ml:{sm:2},background:"transparent",borderRadius:2},children:[o.jsx(ft,{value:"card","aria-label":"card view",sx:{borderRadius:1,px:1.5},children:o.jsx(ca,{})}),o.jsx(ft,{value:"list","aria-label":"list view",sx:{borderRadius:1,px:1.5},children:o.jsx(la,{})})]})]})]}),!C&&!n&&o.jsx(h.Suspense,{fallback:Pt,children:z==="card"?o.jsxs(h.Fragment,{children:[o.jsx(ct,{container:!0,spacing:2,sx:{p:0},children:j.map(i=>o.jsx(ct,{item:!0,xs:12,sm:6,md:4,lg:3,children:o.jsx(da,{pkg:i})},i.id))}),nt>1&&o.jsx(V,{sx:{display:"flex",justifyContent:"center",mt:4,mb:2},children:o.jsx(Jt,{count:nt,page:l,onChange:rt,color:"primary"})})]}):o.jsx(ua,{packages:j})}),!C&&!n&&j.length===0&&g===0&&o.jsx(V,{sx:{textAlign:"center",mt:4,py:4},children:o.jsx(st,{variant:"h6",color:"text.secondary",children:"No packages found matching your criteria."})})]})};export{va as default};
