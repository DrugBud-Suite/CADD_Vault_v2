import{r as o,o as u,j as e,az as b,m as n,q as l,aA as f,V as h,L as k,ap as y,T as g,U as p,N as j,a5 as w,aB as v}from"./index-CPAnlw5F.js";import{R}from"./ratingService-BQeyHWyl.js";import{R as C}from"./RatingInput-C5FgOE7z.js";import{P as L,a as I}from"./PackageMetrics-BH6YlyTZ.js";import"./Delete-CRJxB3R-.js";const P=o.memo(({pkg:i})=>{const s=u(a=>a.addTag),[r,d]=o.useState(i),c=o.useRef(!0);o.useEffect(()=>{d(i)},[i]),o.useEffect(()=>R.subscribe(t=>{t.packageId===i.id&&c.current&&d(x=>({...x,average_rating:t.averageRating,ratings_count:t.ratingsCount}))}),[i.id]),o.useEffect(()=>()=>{c.current=!1},[]);const m=(a,t)=>{a.stopPropagation(),s(t)};return e.jsxs(b,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:2,py:1.5,px:2,borderRadius:2,border:0,overflow:"hidden",mb:1,background:a=>a.palette.mode==="dark"?"linear-gradient(135deg, rgba(30,30,30,0.8) 0%, rgba(23,23,23,0.8) 100%)":"linear-gradient(135deg, rgba(255,255,255,0.8) 0%, rgba(249,250,251,0.8) 100%)",backdropFilter:"blur(8px)",boxShadow:a=>a.shadows[1],transition:a=>a.transitions.create(["box-shadow","background","transform"],{duration:a.transitions.duration.short}),"&:hover":{background:a=>a.palette.mode==="dark"?"linear-gradient(135deg, rgba(30,30,30,0.95) 0%, rgba(23,23,23,0.95) 100%)":"linear-gradient(135deg, rgba(255,255,255,0.95) 0%, rgba(249,250,251,0.95) 100%)",boxShadow:a=>`0 0px 24px ${n(a.palette.primary.main,.3)}`,transform:"translateY(-2px)"},"&:last-child":{borderBottom:"none",mb:0}},component:"div",children:[e.jsxs(l,{sx:{flexGrow:1,display:"flex",flexDirection:"column",mr:2,overflow:"hidden"},children:[e.jsx(f,{primary:e.jsx(h,{component:k,to:`/package/${encodeURIComponent(r.id)}`,underline:"none",sx:{fontWeight:600,fontSize:"1.05rem",position:"relative",transition:"all 0.2s ease-in-out",color:a=>a.palette.mode==="dark"?a.palette.primary.light:a.palette.primary.dark,textDecoration:"none","&:hover":{color:"primary.main",transform:"translateY(-1px)",textDecoration:"none"},"&::after":{content:'""',position:"absolute",width:"100%",transform:"scaleX(0)",height:"1.5px",bottom:"-1px",left:0,backgroundColor:"primary.main",transformOrigin:"bottom left",transition:"transform 0.25s ease-out"},"&:hover::after":{transform:"scaleX(1)"}},children:r.package_name}),sx:{mt:.5,mb:.5}}),r.description&&e.jsx(y,{title:r.description,children:e.jsx(g,{variant:"body2",color:"text.secondary",sx:{mb:1.25,overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",lineHeight:1.5},children:r.description})}),r.tags&&r.tags.length>0&&e.jsx(p,{direction:"row",spacing:.5,sx:{flexWrap:"nowrap",overflowX:"auto",maxWidth:"100%",pb:.5,"&::-webkit-scrollbar":{height:"4px"},"&::-webkit-scrollbar-thumb":{backgroundColor:a=>n(a.palette.text.secondary,.5),borderRadius:"2px"}},children:r.tags.map(a=>e.jsx(j,{label:a,size:"small",sx:{height:"22px",borderRadius:4,bgcolor:t=>t.palette.mode==="dark"?n(t.palette.primary.main,.12):n(t.palette.primary.light,.12),color:t=>t.palette.mode==="dark"?t.palette.primary.light:t.palette.primary.main,fontWeight:500,fontSize:"0.7rem","&:hover":{bgcolor:t=>t.palette.mode==="dark"?n(t.palette.primary.main,.18):n(t.palette.primary.light,.18)},cursor:"pointer"},onClick:t=>m(t,a)},a))})]}),e.jsxs(p,{direction:"column",spacing:1,alignItems:"flex-end",sx:{flexShrink:0,pt:.5},children:[e.jsx(C,{packageId:r.id,averageRating:r.average_rating??0,ratingsCount:r.ratings_count??0,userRating:r.user_rating,userRatingId:r.user_rating_id}),e.jsx(L,{pkg:r,spacing:.5}),e.jsx(I,{pkg:r,variant:"list",spacing:1})]})]})}),S=({packages:i})=>i.length===0?e.jsx(l,{sx:{textAlign:"center",mt:4},children:e.jsx(g,{variant:"h6",color:"text.secondary",children:"No packages found matching your criteria."})}):e.jsx(l,{sx:{width:"100%"},children:e.jsx(v,{sx:{width:"100%"},children:i.map(s=>e.jsx(P,{pkg:s},s.id))})}),B=w.memo(S);export{B as default};
