const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/PackageCard-BP_oNbSA.js","assets/index-Ck-Xm46g.js","assets/index-B7rZpWz0.css","assets/ratingService-FSk1F6jz.js","assets/RatingInput-Bw3FLAra.js","assets/Delete-DM3B0K-c.js","assets/PackageMetrics-q08Zyj1P.js","assets/CardContent-CVF7J8Q4.js","assets/PackageList-Be-ZDjf3.js"])))=>i.map(i=>d[i]);
import{g as Q,a as X,_ as H,u as ka,b as y,c as F,j as o,r as $,d as Y,e as za,s as V,f as q,h as O,i as Z,B as fa,k as G,l as Ra,m as K,n as U,o as ra,C as ja,p as D,q as na,A as Ma,T as ea,F as _a,S as Ta,M as S,I as La,G as ia,t as la,v as va}from"./index-Ck-Xm46g.js";import{R as Ia}from"./ratingService-FSk1F6jz.js";import{g as Na}from"./getValidReactChildren-BPDqWq0F.js";function Oa(a){return Q("MuiPagination",a)}X("MuiPagination",["root","ul","outlined","text"]);const Fa=["boundaryCount","componentName","count","defaultPage","disabled","hideNextButton","hidePrevButton","onChange","page","showFirstButton","showLastButton","siblingCount"];function Wa(a={}){const{boundaryCount:t=1,componentName:e="usePagination",count:s=1,defaultPage:f=1,disabled:p=!1,hideNextButton:u=!1,hidePrevButton:l=!1,onChange:v,page:k,showFirstButton:P=!1,showLastButton:_=!1,siblingCount:b=1}=a,c=H(a,Fa),[g,M]=ka({controlled:k,default:f,name:e,state:"page"}),B=(i,R)=>{k||M(R),v&&v(i,R)},h=(i,R)=>{const W=R-i+1;return Array.from({length:W},(J,aa)=>i+aa)},T=h(1,Math.min(t,s)),z=h(Math.max(s-t+1,t+1),s),L=Math.max(Math.min(g-b,s-t-b*2-1),t+2),j=Math.min(Math.max(g+b,t+b*2+2),z.length>0?z[0]-2:s-1),I=[...P?["first"]:[],...l?[]:["previous"],...T,...L>t+2?["start-ellipsis"]:t+1<s-t?[t+1]:[],...h(L,j),...j<s-t-1?["end-ellipsis"]:s-t>t?[s-t]:[],...z,...u?[]:["next"],..._?["last"]:[]],m=i=>{switch(i){case"first":return 1;case"previous":return g-1;case"next":return g+1;case"last":return s;default:return null}},d=I.map(i=>typeof i=="number"?{onClick:R=>{B(R,i)},type:"page",page:i,selected:i===g,disabled:p,"aria-current":i===g?"true":void 0}:{onClick:R=>{B(R,m(i))},type:i,page:m(i),selected:!1,disabled:p||i.indexOf("ellipsis")===-1&&(i==="next"||i==="last"?g>=s:g<=1)});return y({items:d},c)}function wa(a){return Q("MuiPaginationItem",a)}const N=X("MuiPaginationItem",["root","page","sizeSmall","sizeLarge","text","textPrimary","textSecondary","outlined","outlinedPrimary","outlinedSecondary","rounded","ellipsis","firstLast","previousNext","focusVisible","disabled","selected","icon","colorPrimary","colorSecondary"]),ca=F(o.jsx("path",{d:"M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"}),"FirstPage"),da=F(o.jsx("path",{d:"M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"}),"LastPage"),ua=F(o.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"NavigateBefore"),pa=F(o.jsx("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"NavigateNext"),Da=["className","color","component","components","disabled","page","selected","shape","size","slots","type","variant"],xa=(a,t)=>{const{ownerState:e}=a;return[t.root,t[e.variant],t[`size${O(e.size)}`],e.variant==="text"&&t[`text${O(e.color)}`],e.variant==="outlined"&&t[`outlined${O(e.color)}`],e.shape==="rounded"&&t.rounded,e.type==="page"&&t.page,(e.type==="start-ellipsis"||e.type==="end-ellipsis")&&t.ellipsis,(e.type==="previous"||e.type==="next")&&t.previousNext,(e.type==="first"||e.type==="last")&&t.firstLast]},Va=a=>{const{classes:t,color:e,disabled:s,selected:f,size:p,shape:u,type:l,variant:v}=a,k={root:["root",`size${O(p)}`,v,u,e!=="standard"&&`color${O(e)}`,e!=="standard"&&`${v}${O(e)}`,s&&"disabled",f&&"selected",{page:"page",first:"firstLast",last:"firstLast","start-ellipsis":"ellipsis","end-ellipsis":"ellipsis",previous:"previousNext",next:"previousNext"}[l]],icon:["icon"]};return Z(k,wa,t)},Aa=V("div",{name:"MuiPaginationItem",slot:"Root",overridesResolver:xa})(({theme:a,ownerState:t})=>y({},a.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,padding:"0 6px",margin:"0 3px",color:(a.vars||a).palette.text.primary,height:"auto",[`&.${N.disabled}`]:{opacity:(a.vars||a).palette.action.disabledOpacity}},t.size==="small"&&{minWidth:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},t.size==="large"&&{minWidth:40,borderRadius:40/2,padding:"0 10px",fontSize:a.typography.pxToRem(15)})),Ga=V(fa,{name:"MuiPaginationItem",slot:"Root",overridesResolver:xa})(({theme:a,ownerState:t})=>y({},a.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,height:32,padding:"0 6px",margin:"0 3px",color:(a.vars||a).palette.text.primary,[`&.${N.focusVisible}`]:{backgroundColor:(a.vars||a).palette.action.focus},[`&.${N.disabled}`]:{opacity:(a.vars||a).palette.action.disabledOpacity},transition:a.transitions.create(["color","background-color"],{duration:a.transitions.duration.short}),"&:hover":{backgroundColor:(a.vars||a).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${N.selected}`]:{backgroundColor:(a.vars||a).palette.action.selected,"&:hover":{backgroundColor:a.vars?`rgba(${a.vars.palette.action.selectedChannel} / calc(${a.vars.palette.action.selectedOpacity} + ${a.vars.palette.action.hoverOpacity}))`:G.alpha(a.palette.action.selected,a.palette.action.selectedOpacity+a.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(a.vars||a).palette.action.selected}},[`&.${N.focusVisible}`]:{backgroundColor:a.vars?`rgba(${a.vars.palette.action.selectedChannel} / calc(${a.vars.palette.action.selectedOpacity} + ${a.vars.palette.action.focusOpacity}))`:G.alpha(a.palette.action.selected,a.palette.action.selectedOpacity+a.palette.action.focusOpacity)},[`&.${N.disabled}`]:{opacity:1,color:(a.vars||a).palette.action.disabled,backgroundColor:(a.vars||a).palette.action.selected}}},t.size==="small"&&{minWidth:26,height:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},t.size==="large"&&{minWidth:40,height:40,borderRadius:40/2,padding:"0 10px",fontSize:a.typography.pxToRem(15)},t.shape==="rounded"&&{borderRadius:(a.vars||a).shape.borderRadius}),({theme:a,ownerState:t})=>y({},t.variant==="text"&&{[`&.${N.selected}`]:y({},t.color!=="standard"&&{color:(a.vars||a).palette[t.color].contrastText,backgroundColor:(a.vars||a).palette[t.color].main,"&:hover":{backgroundColor:(a.vars||a).palette[t.color].dark,"@media (hover: none)":{backgroundColor:(a.vars||a).palette[t.color].main}},[`&.${N.focusVisible}`]:{backgroundColor:(a.vars||a).palette[t.color].dark}},{[`&.${N.disabled}`]:{color:(a.vars||a).palette.action.disabled}})},t.variant==="outlined"&&{border:a.vars?`1px solid rgba(${a.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${a.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${N.selected}`]:y({},t.color!=="standard"&&{color:(a.vars||a).palette[t.color].main,border:`1px solid ${a.vars?`rgba(${a.vars.palette[t.color].mainChannel} / 0.5)`:G.alpha(a.palette[t.color].main,.5)}`,backgroundColor:a.vars?`rgba(${a.vars.palette[t.color].mainChannel} / ${a.vars.palette.action.activatedOpacity})`:G.alpha(a.palette[t.color].main,a.palette.action.activatedOpacity),"&:hover":{backgroundColor:a.vars?`rgba(${a.vars.palette[t.color].mainChannel} / calc(${a.vars.palette.action.activatedOpacity} + ${a.vars.palette.action.focusOpacity}))`:G.alpha(a.palette[t.color].main,a.palette.action.activatedOpacity+a.palette.action.focusOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${N.focusVisible}`]:{backgroundColor:a.vars?`rgba(${a.vars.palette[t.color].mainChannel} / calc(${a.vars.palette.action.activatedOpacity} + ${a.vars.palette.action.focusOpacity}))`:G.alpha(a.palette[t.color].main,a.palette.action.activatedOpacity+a.palette.action.focusOpacity)}},{[`&.${N.disabled}`]:{borderColor:(a.vars||a).palette.action.disabledBackground,color:(a.vars||a).palette.action.disabled}})})),Sa=V("div",{name:"MuiPaginationItem",slot:"Icon",overridesResolver:(a,t)=>t.icon})(({theme:a,ownerState:t})=>y({fontSize:a.typography.pxToRem(20),margin:"0 -8px"},t.size==="small"&&{fontSize:a.typography.pxToRem(18)},t.size==="large"&&{fontSize:a.typography.pxToRem(22)})),Ea=$.forwardRef(function(t,e){const s=Y({props:t,name:"MuiPaginationItem"}),{className:f,color:p="standard",component:u,components:l={},disabled:v=!1,page:k,selected:P=!1,shape:_="circular",size:b="medium",slots:c={},type:g="page",variant:M="text"}=s,B=H(s,Da),h=y({},s,{color:p,disabled:v,selected:P,shape:_,size:b,type:g,variant:M}),T=za(),z=Va(h),j=(T?{previous:c.next||l.next||pa,next:c.previous||l.previous||ua,last:c.first||l.first||ca,first:c.last||l.last||da}:{previous:c.previous||l.previous||ua,next:c.next||l.next||pa,first:c.first||l.first||ca,last:c.last||l.last||da})[g];return g==="start-ellipsis"||g==="end-ellipsis"?o.jsx(Aa,{ref:e,ownerState:h,className:q(z.root,f),children:"â€¦"}):o.jsxs(Ga,y({ref:e,ownerState:h,component:u,disabled:v,className:q(z.root,f)},B,{children:[g==="page"&&k,j?o.jsx(Sa,{as:j,ownerState:h,className:z.icon}):null]}))}),Ha=["boundaryCount","className","color","count","defaultPage","disabled","getItemAriaLabel","hideNextButton","hidePrevButton","onChange","page","renderItem","shape","showFirstButton","showLastButton","siblingCount","size","variant"],Ua=a=>{const{classes:t,variant:e}=a;return Z({root:["root",e],ul:["ul"]},Oa,t)},qa=V("nav",{name:"MuiPagination",slot:"Root",overridesResolver:(a,t)=>{const{ownerState:e}=a;return[t.root,t[e.variant]]}})({}),Ja=V("ul",{name:"MuiPagination",slot:"Ul",overridesResolver:(a,t)=>t.ul})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"});function Ka(a,t,e){return a==="page"?`${e?"":"Go to "}page ${t}`:`Go to ${a} page`}const Qa=$.forwardRef(function(t,e){const s=Y({props:t,name:"MuiPagination"}),{boundaryCount:f=1,className:p,color:u="standard",count:l=1,defaultPage:v=1,disabled:k=!1,getItemAriaLabel:P=Ka,hideNextButton:_=!1,hidePrevButton:b=!1,renderItem:c=d=>o.jsx(Ea,y({},d)),shape:g="circular",showFirstButton:M=!1,showLastButton:B=!1,siblingCount:h=1,size:T="medium",variant:z="text"}=s,L=H(s,Ha),{items:j}=Wa(y({},s,{componentName:"Pagination"})),I=y({},s,{boundaryCount:f,color:u,count:l,defaultPage:v,disabled:k,getItemAriaLabel:P,hideNextButton:_,hidePrevButton:b,renderItem:c,shape:g,showFirstButton:M,showLastButton:B,siblingCount:h,size:T,variant:z}),m=Ua(I);return o.jsx(qa,y({"aria-label":"pagination navigation",className:q(m.root,p),ownerState:I,ref:e},L,{children:o.jsx(Ja,{className:m.ul,ownerState:I,children:j.map((d,i)=>o.jsx("li",{children:c(y({},d,{color:u,"aria-label":P(d.type,d.page,d.selected),shape:g,size:T,variant:z}))},i))})}))});function Xa(a){return Q("MuiToggleButton",a)}const E=X("MuiToggleButton",["root","disabled","selected","standard","primary","secondary","sizeSmall","sizeMedium","sizeLarge","fullWidth"]),ba=$.createContext({}),ha=$.createContext(void 0);function Ya(a,t){return t===void 0||a===void 0?!1:Array.isArray(t)?t.indexOf(a)>=0:a===t}const Za=["value"],at=["children","className","color","disabled","disableFocusRipple","fullWidth","onChange","onClick","selected","size","value"],tt=a=>{const{classes:t,fullWidth:e,selected:s,disabled:f,size:p,color:u}=a,l={root:["root",s&&"selected",f&&"disabled",e&&"fullWidth",`size${O(p)}`,u]};return Z(l,Xa,t)},et=V(fa,{name:"MuiToggleButton",slot:"Root",overridesResolver:(a,t)=>{const{ownerState:e}=a;return[t.root,t[`size${O(e.size)}`]]}})(({theme:a,ownerState:t})=>{let e=t.color==="standard"?a.palette.text.primary:a.palette[t.color].main,s;return a.vars&&(e=t.color==="standard"?a.vars.palette.text.primary:a.vars.palette[t.color].main,s=t.color==="standard"?a.vars.palette.text.primaryChannel:a.vars.palette[t.color].mainChannel),y({},a.typography.button,{borderRadius:(a.vars||a).shape.borderRadius,padding:11,border:`1px solid ${(a.vars||a).palette.divider}`,color:(a.vars||a).palette.action.active},t.fullWidth&&{width:"100%"},{[`&.${E.disabled}`]:{color:(a.vars||a).palette.action.disabled,border:`1px solid ${(a.vars||a).palette.action.disabledBackground}`},"&:hover":{textDecoration:"none",backgroundColor:a.vars?`rgba(${a.vars.palette.text.primaryChannel} / ${a.vars.palette.action.hoverOpacity})`:K(a.palette.text.primary,a.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${E.selected}`]:{color:e,backgroundColor:a.vars?`rgba(${s} / ${a.vars.palette.action.selectedOpacity})`:K(e,a.palette.action.selectedOpacity),"&:hover":{backgroundColor:a.vars?`rgba(${s} / calc(${a.vars.palette.action.selectedOpacity} + ${a.vars.palette.action.hoverOpacity}))`:K(e,a.palette.action.selectedOpacity+a.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:a.vars?`rgba(${s} / ${a.vars.palette.action.selectedOpacity})`:K(e,a.palette.action.selectedOpacity)}}}},t.size==="small"&&{padding:7,fontSize:a.typography.pxToRem(13)},t.size==="large"&&{padding:15,fontSize:a.typography.pxToRem(15)})}),ga=$.forwardRef(function(t,e){const s=$.useContext(ba),{value:f}=s,p=H(s,Za),u=$.useContext(ha),l=Ra(y({},p,{selected:Ya(t.value,f)}),t),v=Y({props:l,name:"MuiToggleButton"}),{children:k,className:P,color:_="standard",disabled:b=!1,disableFocusRipple:c=!1,fullWidth:g=!1,onChange:M,onClick:B,selected:h,size:T="medium",value:z}=v,L=H(v,at),j=y({},v,{color:_,disabled:b,disableFocusRipple:c,fullWidth:g,size:T}),I=tt(j),m=i=>{B&&(B(i,z),i.defaultPrevented)||M&&M(i,z)},d=u||"";return o.jsx(et,y({className:q(p.className,I.root,P,d),disabled:b,focusRipple:!c,ref:e,onClick:m,onChange:M,value:z,ownerState:j,"aria-pressed":h},L,{children:k}))});function ot(a){return Q("MuiToggleButtonGroup",a)}const x=X("MuiToggleButtonGroup",["root","selected","horizontal","vertical","disabled","grouped","groupedHorizontal","groupedVertical","fullWidth","firstButton","lastButton","middleButton"]),st=["children","className","color","disabled","exclusive","fullWidth","onChange","orientation","size","value"],rt=a=>{const{classes:t,orientation:e,fullWidth:s,disabled:f}=a,p={root:["root",e==="vertical"&&"vertical",s&&"fullWidth"],grouped:["grouped",`grouped${O(e)}`,f&&"disabled"],firstButton:["firstButton"],lastButton:["lastButton"],middleButton:["middleButton"]};return Z(p,ot,t)},nt=V("div",{name:"MuiToggleButtonGroup",slot:"Root",overridesResolver:(a,t)=>{const{ownerState:e}=a;return[{[`& .${x.grouped}`]:t.grouped},{[`& .${x.grouped}`]:t[`grouped${O(e.orientation)}`]},{[`& .${x.firstButton}`]:t.firstButton},{[`& .${x.lastButton}`]:t.lastButton},{[`& .${x.middleButton}`]:t.middleButton},t.root,e.orientation==="vertical"&&t.vertical,e.fullWidth&&t.fullWidth]}})(({ownerState:a,theme:t})=>y({display:"inline-flex",borderRadius:(t.vars||t).shape.borderRadius},a.orientation==="vertical"&&{flexDirection:"column"},a.fullWidth&&{width:"100%"},{[`& .${x.grouped}`]:y({},a.orientation==="horizontal"?{[`&.${x.selected} + .${x.grouped}.${x.selected}`]:{borderLeft:0,marginLeft:0}}:{[`&.${x.selected} + .${x.grouped}.${x.selected}`]:{borderTop:0,marginTop:0}})},a.orientation==="horizontal"?{[`& .${x.firstButton},& .${x.middleButton}`]:{borderTopRightRadius:0,borderBottomRightRadius:0},[`& .${x.lastButton},& .${x.middleButton}`]:{marginLeft:-1,borderLeft:"1px solid transparent",borderTopLeftRadius:0,borderBottomLeftRadius:0}}:{[`& .${x.firstButton},& .${x.middleButton}`]:{borderBottomLeftRadius:0,borderBottomRightRadius:0},[`& .${x.lastButton},& .${x.middleButton}`]:{marginTop:-1,borderTop:"1px solid transparent",borderTopLeftRadius:0,borderTopRightRadius:0}},a.orientation==="horizontal"?{[`& .${x.lastButton}.${E.disabled},& .${x.middleButton}.${E.disabled}`]:{borderLeft:"1px solid transparent"}}:{[`& .${x.lastButton}.${E.disabled},& .${x.middleButton}.${E.disabled}`]:{borderTop:"1px solid transparent"}})),it=$.forwardRef(function(t,e){const s=Y({props:t,name:"MuiToggleButtonGroup"}),{children:f,className:p,color:u="standard",disabled:l=!1,exclusive:v=!1,fullWidth:k=!1,onChange:P,orientation:_="horizontal",size:b="medium",value:c}=s,g=H(s,st),M=y({},s,{disabled:l,fullWidth:k,orientation:_,size:b}),B=rt(M),h=$.useCallback((m,d)=>{if(!P)return;const i=c&&c.indexOf(d);let R;c&&i>=0?(R=c.slice(),R.splice(i,1)):R=c?c.concat(d):[d],P(m,R)},[P,c]),T=$.useCallback((m,d)=>{P&&P(m,c===d?null:d)},[P,c]),z=$.useMemo(()=>({className:B.grouped,onChange:v?T:h,value:c,size:b,fullWidth:k,color:u,disabled:l}),[B.grouped,v,T,h,c,b,k,u,l]),L=Na(f),j=L.length,I=m=>{const d=m===0,i=m===j-1;return d&&i?"":d?B.firstButton:i?B.lastButton:B.middleButton};return o.jsx(nt,y({role:"group",className:q(B.root,p),ref:e,ownerState:M},g,{children:o.jsx(ba.Provider,{value:z,children:L.map((m,d)=>o.jsx(ha.Provider,{value:I(d),children:m},d))})}))}),lt=F(o.jsx("path",{d:"m20 12-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8z"}),"ArrowDownward"),ct=F(o.jsx("path",{d:"m4 12 1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8z"}),"ArrowUpward"),dt=F(o.jsx("path",{d:"M3 14h4v-4H3zm0 5h4v-4H3zM3 9h4V5H3zm5 5h13v-4H8zm0 5h13v-4H8zM8 5v4h13V5z"}),"ViewList"),ut=F(o.jsx("path",{d:"M14.67 5v6.5H9.33V5zm1 6.5H21V5h-5.33zm-1 7.5v-6.5H9.33V19zm1-6.5V19H21v-6.5zm-7.34 0H3V19h5.33zm0-1V5H3v6.5z"}),"ViewModule"),pt=$.lazy(()=>va(()=>import("./PackageCard-BP_oNbSA.js"),__vite__mapDeps([0,1,2,3,4,5,6,7]))),gt=$.lazy(()=>va(()=>import("./PackageList-Be-ZDjf3.js"),__vite__mapDeps([8,1,2,3,4,5,6])));async function ft(a,t,e=1e3){let s=[],f=0,p=!0;for(;p;){const{data:u,error:l,count:v}=await a.select(t,{count:"exact"}).range(f,f+e-1);if(l)throw console.error("Error fetching paginated data:",l.message),l;u&&u.length>0?(s=s.concat(u),f+=u.length):p=!1,v!==null&&f>=v&&(p=!1),u&&u.length<e&&(p=!1)}return s}const ht=()=>{const{searchTerm:a,selectedTags:t,minStars:e,hasGithub:s,hasWebserver:f,hasPublication:p,minCitations:u,minRating:l,folder1:v,category1:k,selectedLicenses:P,sortBy:_,sortDirection:b,viewMode:c,currentPage:g,totalFilteredCount:M}=U(ra(n=>({searchTerm:n.searchTerm,selectedTags:n.selectedTags,minStars:n.minStars,hasGithub:n.hasGithub,hasWebserver:n.hasWebserver,hasPublication:n.hasPublication,minCitations:n.minCitations,minRating:n.minRating,folder1:n.folder1,category1:n.category1,selectedLicenses:n.selectedLicenses,sortBy:n.sortBy,sortDirection:n.sortDirection,viewMode:n.viewMode,currentPage:n.currentPage,totalFilteredCount:n.totalFilteredCount}))),{setSort:B,setDisplayedPackages:h,setTotalFilteredCount:T,setViewMode:z,setCurrentPage:L,setOriginalPackagesAndDeriveMetadata:j}=U(ra(n=>({setSort:n.setSort,setDisplayedPackages:n.setDisplayedPackages,setTotalFilteredCount:n.setTotalFilteredCount,setViewMode:n.setViewMode,setCurrentPage:n.setCurrentPage,setOriginalPackagesAndDeriveMetadata:n.setOriginalPackagesAndDeriveMetadata}))),[I,m]=$.useState([]),[d,i]=$.useState(!0),[R,W]=$.useState(""),J=24;$.useEffect(()=>{(async()=>{W(""),i(!0);try{const A=await ft(la.from("packages"),"id, package_name, description, tags, license, github_stars, citations, repo_link, webserver, publication, folder1, category1, last_commit, average_rating, ratings_count, github_owner, github_repo, jif, journal, last_commit_ago, link, page_icon, primary_language, ratings_sum");A?j(A):(j([]),W("No packages found for metadata."))}catch(C){console.error("Error in fetchGlobalDataAndSetMetadata:",C.message),W("An unexpected error occurred while loading filter options."),j([])}finally{i(!1)}})()},[j]),$.useEffect(()=>Ia.subscribe(C=>{console.log(`HomePage received rating update for package ${C.packageId}: ${C.averageRating} (${C.ratingsCount} ratings)`),m(r=>r.map(w=>w.id===C.packageId?{...w,average_rating:C.averageRating,ratings_count:C.ratingsCount}:w));const ta=U.getState().displayedPackages.map(r=>r.id===C.packageId?{...r,average_rating:C.averageRating,ratings_count:C.ratingsCount}:r);h(ta)}),[h]),$.useEffect(()=>{(async()=>{U.getState().allAvailableFolders.length===0&&U.getState().originalPackages.length,i(!0),W("");const A=(g-1)*J,ta=A+J-1;try{let r=la.from("packages").select("*, average_rating, ratings_count",{count:"exact"});if(a&&(r=r.or(`package_name.ilike.%${a}%,description.ilike.%${a}%`)),t.length>0){const Ba=JSON.stringify(t);r=r.contains("tags",Ba)}e!==null&&e>0&&(r=r.gte("github_stars",e)),s&&(r=r.not("repo_link","is",null)),f&&(r=r.not("webserver","is",null)),p&&(r=r.not("publication","is",null)),u!==null&&u>0&&(r=r.gte("citations",u)),l!==null&&l>0&&(r=r.gte("average_rating",l)),v&&(r=r.eq("folder1",v)),k&&(r=r.eq("category1",k)),P.length>0&&(r=r.in("license",P)),_&&b?r=r.order(_,{ascending:b==="asc",nullsFirst:!1}):r=r.order("package_name",{ascending:!0,nullsFirst:!1}),r=r.range(A,ta);const{data:w,error:sa,count:Pa}=await r;if(sa)throw sa;w?(m(w),h(w)):(m([]),h([])),T(Pa??0)}catch(r){W(`Failed to fetch packages: ${(r==null?void 0:r.message)||"Unknown error"}`),console.error("Error fetching packages from Supabase:",r),m([]),h([]),T(0)}finally{i(!1)}})()},[g,a,t,e,s,f,p,u,l,v,k,P,_,b,h,T]);const aa=(n,C)=>{L(C),window.scrollTo(0,0)},ya=n=>{const C=n.target.value;L(1),B(C===""?null:C,b)},ma=()=>{L(1),B(_,b==="asc"?"desc":"asc")},Ca=(n,C)=>{C!==null&&z(C)},$a=o.jsx(D,{display:"flex",justifyContent:"center",py:4,children:o.jsx(na,{})}),oa=Math.ceil(M/J);return o.jsxs(ja,{maxWidth:"lg",sx:{pt:2,px:{xs:1,sm:2},pb:0},children:[d&&o.jsx(D,{display:"flex",justifyContent:"center",py:4,children:o.jsx(na,{})}),R&&!d&&o.jsx(D,{py:4,children:o.jsx(Ma,{severity:"error",children:R})}),o.jsxs(D,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,flexWrap:"wrap",gap:1},children:[o.jsxs(ea,{variant:"h4",component:"h1",sx:{mb:{xs:1,sm:0},color:"text.primary",fontWeight:500,letterSpacing:"-0.01em"},children:[M," Entries Found"]}),o.jsxs(D,{sx:{display:"flex",alignItems:"center",gap:1,flexWrap:"wrap"},children:[o.jsx(ea,{variant:"body2",sx:{mr:1,minWidth:55,color:"text.secondary"},children:"Sort by:"}),o.jsx(_a,{size:"small",variant:"outlined",sx:{minWidth:150},children:o.jsxs(Ta,{id:"sort-by-select",name:"sortBy",value:_??"",displayEmpty:!0,onChange:ya,MenuProps:{PaperProps:{sx:{mt:1,borderRadius:2,minWidth:180}}},children:[o.jsx(S,{value:"package_name",children:"Name"}),o.jsx(S,{value:"average_rating",children:"Rating"}),o.jsx(S,{value:"ratings_count",children:"Number of Ratings"}),o.jsx(S,{value:"github_stars",children:"GitHub Stars"}),o.jsx(S,{value:"citations",children:"Citations"}),o.jsx(S,{value:"last_commit",children:"Last Commit"})]})}),o.jsx(La,{onClick:ma,size:"small","aria-label":"toggle sort direction",sx:{border:"1px solid",borderColor:"divider",ml:1,background:n=>n.palette.mode==="dark"?"rgba(255,255,255,0.08)":"rgba(0,0,0,0.04)","&:hover":{background:n=>n.palette.action.hover}},children:b==="asc"?o.jsx(ct,{fontSize:"small"}):o.jsx(lt,{fontSize:"small"})}),o.jsxs(it,{value:c,exclusive:!0,onChange:Ca,"aria-label":"view mode",size:"small",sx:{ml:{sm:2},background:"transparent",borderRadius:2},children:[o.jsx(ga,{value:"card","aria-label":"card view",sx:{borderRadius:1,px:1.5},children:o.jsx(ut,{})}),o.jsx(ga,{value:"list","aria-label":"list view",sx:{borderRadius:1,px:1.5},children:o.jsx(dt,{})})]})]})]}),!d&&!R&&o.jsx($.Suspense,{fallback:$a,children:c==="card"?o.jsxs($.Fragment,{children:[o.jsx(ia,{container:!0,spacing:2,sx:{p:0},children:I.map(n=>o.jsx(ia,{item:!0,xs:12,sm:6,md:4,lg:3,children:o.jsx(pt,{pkg:n})},n.id))}),oa>1&&o.jsx(D,{sx:{display:"flex",justifyContent:"center",mt:4,mb:2},children:o.jsx(Qa,{count:oa,page:g,onChange:aa,color:"primary"})})]}):o.jsx(gt,{packages:I})}),!d&&!R&&I.length===0&&M===0&&o.jsx(D,{sx:{textAlign:"center",mt:4,py:4},children:o.jsx(ea,{variant:"h6",color:"text.secondary",children:"No packages found matching your criteria."})})]})};export{ht as default};
